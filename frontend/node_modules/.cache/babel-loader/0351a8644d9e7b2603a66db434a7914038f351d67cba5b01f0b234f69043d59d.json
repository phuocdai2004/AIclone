{"ast":null,"code":"import _objectSpread from\"D:/IZ/AIClone/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import axios from'axios';import Chat from'./Chat';import API_URL from'./config';// AI Voice Chat Component - Inline\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AIVoiceChat=()=>{const[isActive,setIsActive]=useState(false);const[isListening,setIsListening]=useState(false);const[isSpeaking,setIsSpeaking]=useState(false);const[transcript,setTranscript]=useState('');const[messages,setMessages]=useState([]);const[voicesLoaded,setVoicesLoaded]=useState(false);const recognitionRef=useRef(null);const synthRef=useRef(window.speechSynthesis);const isActiveRef=useRef(false);const isSpeakingRef=useRef(false);// Load voices khi component mount\nuseEffect(()=>{const loadVoices=()=>{const voices=synthRef.current.getVoices();if(voices.length>0){setVoicesLoaded(true);console.log('ğŸ¤ Voices loaded:',voices.length);// Log Vietnamese voices\nconst viVoices=voices.filter(v=>v.lang.startsWith('vi'));if(viVoices.length>0){console.log('ğŸ‡»ğŸ‡³ Vietnamese voices:',viVoices.map(v=>v.name));}else{console.log('âš ï¸ No Vietnamese voices found');}}};loadVoices();// Chrome cáº§n event nÃ y Ä‘á»ƒ load voices\nif(synthRef.current.onvoiceschanged!==undefined){synthRef.current.onvoiceschanged=loadVoices;}},[]);// Khá»Ÿi táº¡o Speech Recognition\nuseEffect(()=>{if('webkitSpeechRecognition'in window||'SpeechRecognition'in window){const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;recognitionRef.current=new SpeechRecognition();recognitionRef.current.continuous=true;recognitionRef.current.interimResults=true;recognitionRef.current.lang='vi-VN';recognitionRef.current.maxAlternatives=1;console.log('ğŸ¤ Speech Recognition initialized');recognitionRef.current.onstart=()=>{console.log('ğŸ¤ Listening started...');setIsListening(true);};recognitionRef.current.onresult=event=>{console.log('ğŸ¤ Got result:',event.results);let finalTranscript='';let interimTranscript='';for(let i=event.resultIndex;i<event.results.length;i++){const transcript=event.results[i][0].transcript;if(event.results[i].isFinal){finalTranscript+=transcript;}else{interimTranscript+=transcript;}}if(interimTranscript){console.log('ğŸ¤ Interim:',interimTranscript);setTranscript(interimTranscript);}if(finalTranscript){console.log('ğŸ¤ Final:',finalTranscript);setTranscript(finalTranscript);handleUserSpeech(finalTranscript);}};recognitionRef.current.onerror=event=>{console.log('ğŸ¤ Speech recognition error:',event.error);switch(event.error){case'not-allowed':alert('âš ï¸ Vui lÃ²ng cho phÃ©p truy cáº­p microphone trong trÃ¬nh duyá»‡t!');break;case'no-speech':// Tá»± Ä‘á»™ng restart náº¿u khÃ´ng nghe tháº¥y gÃ¬\nconsole.log('ğŸ¤ No speech detected, will restart...');break;case'audio-capture':alert('âš ï¸ KhÃ´ng tÃ¬m tháº¥y microphone! Vui lÃ²ng kiá»ƒm tra thiáº¿t bá»‹.');break;case'network':console.log('ğŸ¤ Network error, will retry...');break;case'aborted':console.log('ğŸ¤ Recognition aborted (normal when stopping)');break;default:console.log('ğŸ¤ Unknown error:',event.error);}};recognitionRef.current.onend=()=>{console.log('ğŸ¤ Recognition ended, isActive:',isActiveRef.current,'isSpeaking:',isSpeakingRef.current);setIsListening(false);// Chá»‰ restart náº¿u Ä‘ang active vÃ  khÃ´ng Ä‘ang nÃ³i\nif(isActiveRef.current&&!isSpeakingRef.current){console.log('ğŸ¤ Will restart in 300ms...');setTimeout(()=>restartListening(),300);}};}else{console.error('âŒ Speech Recognition not supported in this browser');alert('âš ï¸ TrÃ¬nh duyá»‡t khÃ´ng há»— trá»£ Speech Recognition! Vui lÃ²ng dÃ¹ng Chrome.');}return()=>{if(recognitionRef.current){recognitionRef.current.stop();}synthRef.current.cancel();};},[]);const restartListening=()=>{console.log('ğŸ¤ restartListening called, isActive:',isActiveRef.current,'isSpeaking:',isSpeakingRef.current);if(!recognitionRef.current){console.log('ğŸ¤ No recognition object!');return;}if(!isActiveRef.current){console.log('ğŸ¤ Not active, skipping restart');return;}if(isSpeakingRef.current){console.log('ğŸ¤ Still speaking, skipping restart');return;}try{recognitionRef.current.start();console.log('âœ… Recognition started successfully!');}catch(e){console.log('ğŸ¤ Start error:',e.message);// Náº¿u Ä‘Ã£ running thÃ¬ OK\nif(e.message.includes('already started')){console.log('ğŸ¤ Already running, OK');}}};// Request microphone permission first\nconst requestMicPermission=async()=>{try{console.log('ğŸ¤ Requesting microphone permission...');const stream=await navigator.mediaDevices.getUserMedia({audio:true});console.log('âœ… Microphone permission granted!');// Stop the stream immediately, we just needed permission\nstream.getTracks().forEach(track=>track.stop());return true;}catch(err){console.error('âŒ Microphone permission denied:',err);alert('âš ï¸ Vui lÃ²ng cho phÃ©p truy cáº­p microphone Ä‘á»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng nÃ y!\\n\\nNháº¥n vÃ o biá»ƒu tÆ°á»£ng ğŸ”’ trÃªn thanh Ä‘á»‹a chá»‰ â†’ Cho phÃ©p Microphone');return false;}};const toggleActive=async()=>{if(!isActive){// Request mic permission first\nconst hasPermission=await requestMicPermission();if(!hasPermission)return;setIsActive(true);isActiveRef.current=true;setMessages([{role:'bot',content:'Xin chÃ o! TÃ´i lÃ  AI-Bot. HÃ£y nÃ³i chuyá»‡n vá»›i tÃ´i!'}]);speak('Xin chÃ o! TÃ´i lÃ  AI Bot. HÃ£y nÃ³i chuyá»‡n vá»›i tÃ´i!');}else{setIsActive(false);isActiveRef.current=false;setIsListening(false);if(recognitionRef.current){recognitionRef.current.stop();}synthRef.current.cancel();}};const handleUserSpeech=async text=>{if(!text.trim()||isSpeakingRef.current)return;setIsListening(false);if(recognitionRef.current){recognitionRef.current.stop();}setMessages(prev=>[...prev,{role:'user',content:text}]);setTranscript('');try{const res=await axios.post(\"\".concat(API_URL,\"/api/ai/chat\"),{message:text});const botResponse=res.data.response||res.data.message||'TÃ´i khÃ´ng hiá»ƒu, báº¡n cÃ³ thá»ƒ nÃ³i láº¡i khÃ´ng?';setMessages(prev=>[...prev,{role:'bot',content:botResponse}]);speak(botResponse);}catch(error){console.error('Error:',error);const errorMsg='Xin lá»—i, cÃ³ lá»—i xáº£y ra. HÃ£y thá»­ láº¡i!';setMessages(prev=>[...prev,{role:'bot',content:errorMsg}]);speak(errorMsg);}};const speak=text=>{if(!synthRef.current)return;synthRef.current.cancel();const utterance=new SpeechSynthesisUtterance(text);utterance.lang='vi-VN';utterance.rate=1.0;// Tá»‘c Ä‘á»™ bÃ¬nh thÆ°á»ng cho giá»ng Google\nutterance.pitch=1.0;// Pitch bÃ¬nh thÆ°á»ng\nutterance.volume=1;// Ã‚m lÆ°á»£ng tá»‘i Ä‘a\n// Láº¥y danh sÃ¡ch giá»ng nÃ³i\nconst voices=synthRef.current.getVoices();console.log('ğŸ”Š Available voices:',voices.map(v=>\"\".concat(v.name,\" (\").concat(v.lang,\")\")));// Æ¯u tiÃªn giá»ng chá»‹ Google tiáº¿ng Viá»‡t\nlet bestVoice=null;// 1. Google tiáº¿ng Viá»‡t (giá»ng chá»‹ Google - tá»‘t nháº¥t!)\nbestVoice=voices.find(voice=>voice.name==='Google tiáº¿ng Viá»‡t'||voice.name.toLowerCase().includes('google')&&voice.lang==='vi-VN');// 2. Báº¥t ká»³ giá»ng Google nÃ o cÃ³ tiáº¿ng Viá»‡t\nif(!bestVoice){bestVoice=voices.find(voice=>voice.name.toLowerCase().includes('google')&&voice.lang.startsWith('vi'));}// 3. Báº¥t ká»³ giá»ng vi-VN nÃ o\nif(!bestVoice){bestVoice=voices.find(voice=>voice.lang==='vi-VN');}// 4. Google English (náº¿u khÃ´ng cÃ³ tiáº¿ng Viá»‡t)\nif(!bestVoice){bestVoice=voices.find(voice=>voice.name.toLowerCase().includes('google')&&voice.lang.startsWith('en'));}if(bestVoice){utterance.voice=bestVoice;// Náº¿u dÃ¹ng giá»ng tiáº¿ng Anh, Ä‘iá»u chá»‰nh Ä‘á»ƒ Ä‘á»c tiáº¿ng Viá»‡t dá»… nghe hÆ¡n\nif(!bestVoice.lang.startsWith('vi')){utterance.rate=0.8;// Cháº­m hÆ¡n\n}console.log('âœ… Using voice:',bestVoice.name,bestVoice.lang);}else{console.log('âš ï¸ No suitable voice found, using default');}utterance.onstart=()=>{setIsSpeaking(true);isSpeakingRef.current=true;};utterance.onend=()=>{console.log('ğŸ”Š Speech ended, will start listening...');setIsSpeaking(false);isSpeakingRef.current=false;if(isActiveRef.current){// Äá»£i lÃ¢u hÆ¡n Ä‘á»ƒ Ä‘áº£m báº£o audio Ä‘Ã£ dá»«ng hoÃ n toÃ n\nsetTimeout(()=>{console.log('ğŸ¤ Starting to listen after speech...');restartListening();},800);}};synthRef.current.speak(utterance);};return/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.container,children:[/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.header,children:[/*#__PURE__*/_jsx(\"h2\",{style:voiceStyles.headerTitle,children:\"\\uD83E\\uDD16 AI Voice Assistant\"}),/*#__PURE__*/_jsx(\"p\",{style:voiceStyles.headerSubtitle,children:\"Tr\\xF2 chuy\\u1EC7n b\\u1EB1ng gi\\u1ECDng n\\xF3i v\\u1EDBi AI\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.avatarSection,children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.robotContainer),{},{animation:isActive?'float 3s ease-in-out infinite':'none'}),children:[/*#__PURE__*/_jsx(\"div\",{style:voiceStyles.antenna,children:/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.antennaLight),{},{background:isActive?'#00ff88':'#ff4757',boxShadow:isActive?'0 0 20px #00ff88, 0 0 40px #00ff88':'0 0 10px #ff4757',animation:isActive?'glow 1s ease-in-out infinite alternate':'none'})})}),/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.robotHead,children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.ear),{},{left:'-15px'})}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.ear),{},{right:'-15px'})}),/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.robotFace,children:[/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.robotEyes,children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.robotEye),{},{background:isActive?'#00ff88':'#00d4ff',boxShadow:isActive?'0 0 15px #00ff88, 0 0 30px #00ff88':'0 0 10px #00d4ff',animation:isListening?'eyePulse 0.5s ease-in-out infinite alternate':'blink 4s infinite'}),children:/*#__PURE__*/_jsx(\"div\",{style:voiceStyles.eyeHighlight})}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.robotEye),{},{background:isActive?'#00ff88':'#00d4ff',boxShadow:isActive?'0 0 15px #00ff88, 0 0 30px #00ff88':'0 0 10px #00d4ff',animation:isListening?'eyePulse 0.5s ease-in-out infinite alternate':'blink 4s infinite'}),children:/*#__PURE__*/_jsx(\"div\",{style:voiceStyles.eyeHighlight})})]}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.robotMouth),{},{animation:isSpeaking?'speak 0.15s ease-in-out infinite alternate':'none',background:isSpeaking?'#00ff88':'#00d4ff'})}),isSpeaking&&/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.soundWaves,children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.wave),{},{animationDelay:'0s'})}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.wave),{},{animationDelay:'0.2s'})}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.wave),{},{animationDelay:'0.4s'})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:voiceStyles.robotBody,children:/*#__PURE__*/_jsx(\"div\",{style:voiceStyles.robotChest,children:/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.chestCore),{},{background:isActive?'#00ff88':'#00d4ff',boxShadow:isActive?'0 0 20px #00ff88':'0 0 10px #00d4ff'})})})})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.status),{},{background:isActive?'linear-gradient(90deg, rgba(0,255,136,0.2), rgba(0,212,255,0.2))':'rgba(0, 0, 0, 0.4)',border:isActive?'2px solid #00ff88':'2px solid rgba(255,255,255,0.1)'}),children:[!isActive&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#888'},children:\"\\uD83D\\uDCA4 Ch\\u01B0a ho\\u1EA1t \\u0111\\u1ED9ng\"}),isActive&&isListening&&!isSpeaking&&/*#__PURE__*/_jsxs(\"span\",{style:{color:'#00ff88',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:voiceStyles.listeningDot}),\"\\u0110ang l\\u1EAFng nghe...\"]}),isActive&&isSpeaking&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#00d4ff'},children:\"\\uD83D\\uDD0A \\u0110ang n\\xF3i...\"}),isActive&&!isListening&&!isSpeaking&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#ffd700'},children:\"\\u23F3 \\u0110ang x\\u1EED l\\xFD...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.messagesContainer,children:[/*#__PURE__*/_jsx(\"h3\",{style:voiceStyles.messagesTitle,children:\"\\uD83D\\uDCAC L\\u1ECBch s\\u1EED h\\u1ED9i tho\\u1EA1i\"}),/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.messagesList,children:[messages.length===0&&/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.emptyMessage,children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDFA4\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Nh\\u1EA5n n\\xFAt b\\xEAn d\\u01B0\\u1EDBi \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u tr\\xF2 chuy\\u1EC7n\"})]}),messages.map((msg,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.message),{},{background:msg.role==='user'?'linear-gradient(135deg, rgba(0, 200, 255, 0.15), rgba(0, 200, 255, 0.05))':'linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 255, 136, 0.05))',borderLeft:msg.role==='user'?'4px solid #00d4ff':'4px solid #00ff88'}),children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.messageAvatar),{},{background:msg.role==='user'?'linear-gradient(135deg, #00d4ff, #0099cc)':'linear-gradient(135deg, #00ff88, #00cc6a)'}),children:msg.role==='user'?'ğŸ‘¤':'ğŸ¤–'}),/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.messageContent,children:[/*#__PURE__*/_jsx(\"span\",{style:voiceStyles.messageRole,children:msg.role==='user'?'Báº¡n':'AI Bot'}),/*#__PURE__*/_jsx(\"span\",{style:voiceStyles.messageText,children:msg.content})]})]},idx)),transcript&&isListening&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.message),{},{background:'rgba(0, 200, 255, 0.05)',borderLeft:'4px dashed #00d4ff',opacity:0.7}),children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},voiceStyles.messageAvatar),{},{background:'linear-gradient(135deg, #00d4ff, #0099cc)'}),children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.messageContent,children:[/*#__PURE__*/_jsx(\"span\",{style:voiceStyles.messageRole,children:\"B\\u1EA1n\"}),/*#__PURE__*/_jsxs(\"span\",{style:_objectSpread(_objectSpread({},voiceStyles.messageText),{},{fontStyle:'italic'}),children:[transcript,\"...\"]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:voiceStyles.controlSection,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:toggleActive,style:_objectSpread(_objectSpread({},voiceStyles.toggleBtn),{},{background:isActive?'linear-gradient(135deg, #ff4757 0%, #ff6b81 100%)':'linear-gradient(135deg, #00d4ff 0%, #00ff88 100%)',boxShadow:isActive?'0 8px 30px rgba(255, 71, 87, 0.4)':'0 8px 30px rgba(0, 212, 255, 0.4)'}),children:[/*#__PURE__*/_jsx(\"span\",{style:voiceStyles.btnIcon,children:isActive?'â¹ï¸':'ğŸ™ï¸'}),/*#__PURE__*/_jsx(\"span\",{children:isActive?'Dá»«ng láº¡i':'Báº¯t Ä‘áº§u nÃ³i chuyá»‡n'})]}),/*#__PURE__*/_jsx(\"p\",{style:voiceStyles.hint,children:isActive?'ğŸ¤ HÃ£y nÃ³i, AI-Bot Ä‘ang láº¯ng nghe báº¡n...':'ğŸ‘† Nháº¥n nÃºt Ä‘á»ƒ báº¯t Ä‘áº§u trÃ² chuyá»‡n báº±ng giá»ng nÃ³i'})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes float {\\n          0%, 100% { transform: translateY(0); }\\n          50% { transform: translateY(-15px); }\\n        }\\n        @keyframes blink {\\n          0%, 90%, 100% { transform: scaleY(1); }\\n          95% { transform: scaleY(0.1); }\\n        }\\n        @keyframes eyePulse {\\n          0% { transform: scale(1); box-shadow: 0 0 15px #00ff88; }\\n          100% { transform: scale(1.2); box-shadow: 0 0 30px #00ff88, 0 0 50px #00ff88; }\\n        }\\n        @keyframes speak {\\n          0% { height: 6px; width: 35px; border-radius: 6px; }\\n          100% { height: 18px; width: 28px; border-radius: 50%; }\\n        }\\n        @keyframes glow {\\n          0% { opacity: 0.5; transform: scale(1); }\\n          100% { opacity: 1; transform: scale(1.2); }\\n        }\\n        @keyframes waveAnim {\\n          0% { transform: scaleY(0.3); opacity: 0.3; }\\n          50% { transform: scaleY(1); opacity: 1; }\\n          100% { transform: scaleY(0.3); opacity: 0.3; }\\n        }\\n        @keyframes listeningPulse {\\n          0%, 100% { opacity: 1; transform: scale(1); }\\n          50% { opacity: 0.5; transform: scale(0.8); }\\n        }\\n      \"})]});};const voiceStyles={container:{display:'flex',flexDirection:'column',gap:'25px',padding:'30px',background:'linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #0f0f23 100%)',borderRadius:'24px',border:'2px solid rgba(0, 200, 255, 0.2)',boxShadow:'0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(0, 200, 255, 0.1), inset 0 1px 0 rgba(255,255,255,0.1)'},header:{textAlign:'center',paddingBottom:'10px',borderBottom:'1px solid rgba(255,255,255,0.1)'},headerTitle:{margin:'0 0 5px 0',fontSize:'24px',background:'linear-gradient(90deg, #00d4ff, #00ff88)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',fontWeight:'bold'},headerSubtitle:{margin:0,color:'rgba(255,255,255,0.5)',fontSize:'13px'},avatarSection:{display:'flex',flexDirection:'column',alignItems:'center',gap:'20px',padding:'20px'},robotContainer:{width:'160px',height:'220px',position:'relative'},antenna:{position:'absolute',top:'-25px',left:'50%',transform:'translateX(-50%)',width:'4px',height:'25px',background:'linear-gradient(180deg, #3a7bd5, #2b5fb3)',borderRadius:'2px'},antennaLight:{position:'absolute',top:'-8px',left:'50%',transform:'translateX(-50%)',width:'12px',height:'12px',borderRadius:'50%'},robotHead:{width:'130px',height:'110px',background:'linear-gradient(180deg, #4a8fe7 0%, #3a7bd5 50%, #2b5fb3 100%)',borderRadius:'25px 25px 20px 20px',position:'absolute',top:'0',left:'15px',boxShadow:'0 15px 40px rgba(58, 123, 213, 0.5), inset 0 2px 0 rgba(255,255,255,0.2), inset 0 -5px 15px rgba(0, 0, 0, 0.3)'},ear:{position:'absolute',top:'30px',width:'20px',height:'40px',background:'linear-gradient(180deg, #3a7bd5, #2b5fb3)',borderRadius:'10px',boxShadow:'0 5px 15px rgba(0,0,0,0.3)'},robotFace:{position:'absolute',top:'20px',left:'15px',width:'100px',height:'65px',background:'linear-gradient(180deg, #0d1117 0%, #161b22 100%)',borderRadius:'15px',border:'3px solid #00d4ff',boxShadow:'inset 0 0 30px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.3)',overflow:'hidden'},robotEyes:{display:'flex',justifyContent:'center',gap:'30px',paddingTop:'15px'},robotEye:{width:'20px',height:'20px',borderRadius:'50%',position:'relative'},eyeHighlight:{position:'absolute',top:'3px',left:'3px',width:'6px',height:'6px',background:'rgba(255,255,255,0.8)',borderRadius:'50%'},robotMouth:{width:'35px',height:'6px',margin:'12px auto 0',borderRadius:'6px'},soundWaves:{position:'absolute',bottom:'8px',left:'50%',transform:'translateX(-50%)',display:'flex',gap:'4px',alignItems:'flex-end',height:'15px'},wave:{width:'4px',height:'100%',background:'#00ff88',borderRadius:'2px',animation:'waveAnim 0.5s ease-in-out infinite'},robotBody:{width:'100px',height:'80px',background:'linear-gradient(180deg, #3a7bd5 0%, #2b5fb3 100%)',borderRadius:'20px 20px 25px 25px',position:'absolute',bottom:'10px',left:'30px',boxShadow:'0 10px 30px rgba(58, 123, 213, 0.4), inset 0 2px 0 rgba(255,255,255,0.1)'},robotChest:{width:'60px',height:'40px',background:'rgba(0, 0, 0, 0.3)',borderRadius:'12px',margin:'15px auto',border:'2px solid rgba(0, 212, 255, 0.3)',display:'flex',alignItems:'center',justifyContent:'center'},chestCore:{width:'20px',height:'20px',borderRadius:'50%'},status:{fontSize:'15px',padding:'12px 25px',borderRadius:'30px',fontWeight:'bold',transition:'all 0.3s'},listeningDot:{width:'10px',height:'10px',background:'#00ff88',borderRadius:'50%',animation:'listeningPulse 1s ease-in-out infinite'},messagesContainer:{background:'rgba(0, 0, 0, 0.3)',borderRadius:'16px',padding:'20px',maxHeight:'280px',border:'1px solid rgba(255,255,255,0.05)'},messagesTitle:{margin:'0 0 15px 0',color:'#00d4ff',fontSize:'15px',fontWeight:'600'},messagesList:{display:'flex',flexDirection:'column',gap:'12px',maxHeight:'220px',overflowY:'auto',paddingRight:'5px'},emptyMessage:{textAlign:'center',padding:'30px',color:'rgba(255,255,255,0.4)',fontSize:'14px'},message:{display:'flex',alignItems:'flex-start',gap:'12px',padding:'14px 16px',borderRadius:'12px',transition:'all 0.2s'},messageAvatar:{width:'36px',height:'36px',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'16px',flexShrink:0},messageContent:{display:'flex',flexDirection:'column',gap:'4px',flex:1},messageRole:{fontSize:'12px',color:'rgba(255,255,255,0.5)',fontWeight:'600'},messageText:{color:'#e0e0e0',fontSize:'14px',lineHeight:'1.5'},controlSection:{display:'flex',flexDirection:'column',alignItems:'center',gap:'12px',paddingTop:'10px'},toggleBtn:{display:'flex',alignItems:'center',justifyContent:'center',gap:'10px',padding:'16px 40px',border:'none',borderRadius:'50px',fontSize:'16px',fontWeight:'bold',cursor:'pointer',color:'#fff',transition:'all 0.3s',textShadow:'0 2px 4px rgba(0,0,0,0.2)'},btnIcon:{fontSize:'20px'},hint:{color:'rgba(255, 255, 255, 0.5)',fontSize:'13px',margin:0}};const UserHome=_ref=>{let{user,role,onLogout}=_ref;const[tab,setTab]=useState('clones');// chat, clones, create\nconst[clones,setClones]=useState([]);const[selectedClone,setSelectedClone]=useState(null);const[chatMessages,setChatMessages]=useState([]);const[chatInput,setChatInput]=useState('');const[loading,setLoading]=useState(false);const[personalClones,setPersonalClones]=useState([]);const token=localStorage.getItem('token');useEffect(()=>{loadClones();},[]);const loadClones=async()=>{try{const response=await axios.get(\"\".concat(API_URL,\"/api/clones/\"));setClones(response.data);// Filter personal clones created by this user\nconst personal=response.data.filter(c=>c.created_by===user.username);setPersonalClones(personal);}catch(error){console.error('Error loading clones:',error);}};const handleSendMessage=async()=>{if(!chatInput.trim()||!selectedClone)return;const newMessage={role:'user',content:chatInput};setChatMessages([...chatMessages,newMessage]);setChatInput('');setLoading(true);try{const response=await axios.post(\"\".concat(API_URL,\"/api/clones/\").concat(selectedClone.id,\"/memory\"),{message:chatInput,conversation_type:'chat'},{headers:{'Authorization':\"Bearer \".concat(token)}});setChatMessages(prev=>[...prev,{role:'assistant',content:response.data.response}]);}catch(error){console.error('Error sending message:',error);setChatMessages(prev=>[...prev,{role:'assistant',content:'Error getting response'}]);}finally{setLoading(false);}};const selectClone=clone=>{setSelectedClone(clone);setChatMessages([]);setTab('chat');};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.header,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"\\uD83E\\uDDEC AIClone\"}),/*#__PURE__*/_jsxs(\"p\",{style:styles.subtitle,children:[\"Welcome, \",user.username,\"!\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:styles.logoutBtn,children:\"\\uD83D\\uDEAA Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.tabs,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab('clones'),style:_objectSpread(_objectSpread({},styles.tab),{},{background:tab==='clones'?'#4ECDC4':'rgba(255,255,255,0.1)'}),children:\"\\uD83D\\uDCDA All Clones\"}),selectedClone&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setTab('chat'),style:_objectSpread(_objectSpread({},styles.tab),{},{background:tab==='chat'?'#27AE60':'rgba(255,255,255,0.1)'}),children:[\"\\uD83D\\uDCAC Chat with \",selectedClone.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab('gemini'),style:_objectSpread(_objectSpread({},styles.tab),{},{background:tab==='gemini'?'#FF9800':'rgba(255,255,255,0.1)'}),children:\"\\uD83E\\uDD16 Chat with Gemini\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab('aibot'),style:_objectSpread(_objectSpread({},styles.tab),{},{background:tab==='aibot'?'#00d4ff':'rgba(255,255,255,0.1)'}),children:\"\\uD83C\\uDF99\\uFE0F AI Voice Chat\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.content,children:[tab==='chat'&&!selectedClone&&/*#__PURE__*/_jsxs(\"div\",{style:styles.section,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.sectionTitle,children:\"\\uD83D\\uDCAC Chat\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.emptyState,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Please select a clone to start chatting\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab('clones'),style:styles.createBtn,children:\"Browse Available Clones \\u2192\"})]})]}),tab==='clones'&&/*#__PURE__*/_jsxs(\"div\",{style:styles.section,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.sectionTitle,children:\"All Available Clones\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.cloneGrid,children:clones.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No clones available yet\"}):clones.map(clone=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>selectClone(clone),style:_objectSpread(_objectSpread({},styles.cloneCard),{},{cursor:'pointer',transform:'scale(1)',transition:'transform 0.2s'}),onMouseEnter:e=>e.currentTarget.style.transform='scale(1.05)',onMouseLeave:e=>e.currentTarget.style.transform='scale(1)',children:[clone.face_image&&/*#__PURE__*/_jsx(\"img\",{src:\"data:image/png;base64,\".concat(clone.face_image),style:styles.cloneImage,alt:clone.name}),/*#__PURE__*/_jsxs(\"div\",{style:styles.cloneInfo,children:[/*#__PURE__*/_jsx(\"h3\",{children:clone.name||'Unnamed Clone'}),/*#__PURE__*/_jsx(\"p\",{style:styles.cloneStyle,children:clone.speaking_style||'Default'}),/*#__PURE__*/_jsx(\"button\",{style:styles.chatBtn,children:\"Start Chat \\u2192\"})]})]},clone.id))})]}),tab==='chat'&&selectedClone&&/*#__PURE__*/_jsxs(\"div\",{style:styles.chatSection,children:[/*#__PURE__*/_jsxs(\"h2\",{style:styles.sectionTitle,children:[\"Chatting with \",selectedClone.name]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.chatContainer,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.messagesBox,children:[chatMessages.length===0&&/*#__PURE__*/_jsx(\"div\",{style:styles.emptyChat,children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDC4B Start a conversation\"})}),chatMessages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},styles.message),{},{alignSelf:msg.role==='user'?'flex-end':'flex-start',background:msg.role==='user'?'#4ECDC4':'#9B59B6'}),children:msg.content},idx)),loading&&/*#__PURE__*/_jsx(\"div\",{style:styles.loading,children:\"\\u23F3 Thinking...\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.inputBox,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:chatInput,onChange:e=>setChatInput(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSendMessage(),placeholder:\"Type your message...\",style:styles.chatInput,disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:loading,style:_objectSpread(_objectSpread({},styles.sendBtn),{},{opacity:loading?0.5:1}),children:\"\\uD83D\\uDCE4 Send\"})]})]})]}),tab==='gemini'&&/*#__PURE__*/_jsx(\"div\",{style:styles.section,children:/*#__PURE__*/_jsx(Chat,{})}),tab==='aibot'&&/*#__PURE__*/_jsx(AIVoiceChat,{})]})]});};const styles={container:{minHeight:'100vh',background:'linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)',color:'white',fontFamily:\"'Segoe UI', sans-serif\"},header:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'30px 40px',background:'rgba(0,0,0,0.3)',borderBottom:'1px solid rgba(255,255,255,0.1)'},title:{fontSize:'2rem',margin:'0 0 5px 0',background:'linear-gradient(90deg, #4ECDC4, #44A08D)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},subtitle:{margin:0,color:'rgba(255,255,255,0.7)',fontSize:'14px'},logoutBtn:{padding:'10px 20px',background:'#E74C3C',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'bold'},tabs:{display:'flex',gap:'10px',padding:'20px 40px',background:'rgba(0,0,0,0.2)',borderBottom:'1px solid rgba(255,255,255,0.1)',overflowX:'auto'},tab:{padding:'10px 20px',border:'none',borderRadius:'8px',cursor:'pointer',color:'white',fontWeight:'bold',fontSize:'14px',whiteSpace:'nowrap',transition:'all 0.3s'},content:{padding:'40px',maxWidth:'1400px',margin:'0 auto'},section:{marginBottom:'40px'},sectionTitle:{fontSize:'1.8rem',marginBottom:'20px',color:'white'},cloneGrid:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(250px, 1fr))',gap:'20px'},cloneCard:{background:'rgba(255,255,255,0.05)',border:'1px solid rgba(255,255,255,0.1)',borderRadius:'12px',overflow:'hidden',transition:'all 0.3s'},cloneImage:{width:'100%',height:'200px',objectFit:'cover'},cloneInfo:{padding:'15px'},cloneStyle:{fontSize:'12px',color:'rgba(255,255,255,0.6)',margin:'5px 0'},chatBtn:{width:'100%',padding:'8px',background:'#4ECDC4',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontWeight:'bold',marginTop:'10px'},emptyState:{textAlign:'center',padding:'60px 20px',background:'rgba(255,255,255,0.05)',borderRadius:'12px'},createBtn:{padding:'12px 30px',background:'linear-gradient(135deg, #ff7043, #ff5722)',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'bold',fontSize:'14px',marginTop:'20px'},createForm:{background:'rgba(255,255,255,0.05)',padding:'40px',borderRadius:'12px',textAlign:'center'},chatSection:{marginBottom:'40px'},chatContainer:{display:'flex',flexDirection:'column',height:'600px',background:'rgba(255,255,255,0.05)',borderRadius:'12px',overflow:'hidden'},messagesBox:{flex:1,padding:'20px',overflowY:'auto',display:'flex',flexDirection:'column',gap:'10px'},message:{padding:'12px 16px',borderRadius:'8px',maxWidth:'60%',wordWrap:'break-word'},emptyChat:{display:'flex',alignItems:'center',justifyContent:'center',height:'100%',color:'rgba(255,255,255,0.4)',fontSize:'18px'},loading:{color:'rgba(255,255,255,0.6)',fontStyle:'italic'},inputBox:{display:'flex',gap:'10px',padding:'15px 20px',borderTop:'1px solid rgba(255,255,255,0.1)'},chatInput:{flex:1,padding:'12px',background:'rgba(255,255,255,0.1)',border:'1px solid rgba(255,255,255,0.2)',borderRadius:'8px',color:'white',fontSize:'14px'},sendBtn:{padding:'12px 20px',background:'#4ECDC4',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'bold'}};export default UserHome;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","Chat","API_URL","jsx","_jsx","jsxs","_jsxs","AIVoiceChat","isActive","setIsActive","isListening","setIsListening","isSpeaking","setIsSpeaking","transcript","setTranscript","messages","setMessages","voicesLoaded","setVoicesLoaded","recognitionRef","synthRef","window","speechSynthesis","isActiveRef","isSpeakingRef","loadVoices","voices","current","getVoices","length","console","log","viVoices","filter","v","lang","startsWith","map","name","onvoiceschanged","undefined","SpeechRecognition","webkitSpeechRecognition","continuous","interimResults","maxAlternatives","onstart","onresult","event","results","finalTranscript","interimTranscript","i","resultIndex","isFinal","handleUserSpeech","onerror","error","alert","onend","setTimeout","restartListening","stop","cancel","start","e","message","includes","requestMicPermission","stream","navigator","mediaDevices","getUserMedia","audio","getTracks","forEach","track","err","toggleActive","hasPermission","role","content","speak","text","trim","prev","res","post","concat","botResponse","data","response","errorMsg","utterance","SpeechSynthesisUtterance","rate","pitch","volume","bestVoice","find","voice","toLowerCase","style","voiceStyles","container","children","header","headerTitle","headerSubtitle","avatarSection","_objectSpread","robotContainer","animation","antenna","antennaLight","background","boxShadow","robotHead","ear","left","right","robotFace","robotEyes","robotEye","eyeHighlight","robotMouth","soundWaves","wave","animationDelay","robotBody","robotChest","chestCore","status","border","color","display","alignItems","gap","listeningDot","messagesContainer","messagesTitle","messagesList","emptyMessage","msg","idx","borderLeft","messageAvatar","messageContent","messageRole","messageText","opacity","fontStyle","controlSection","onClick","toggleBtn","btnIcon","hint","flexDirection","padding","borderRadius","textAlign","paddingBottom","borderBottom","margin","fontSize","WebkitBackgroundClip","WebkitTextFillColor","fontWeight","width","height","position","top","transform","overflow","justifyContent","paddingTop","bottom","transition","maxHeight","overflowY","paddingRight","flexShrink","flex","lineHeight","cursor","textShadow","UserHome","_ref","user","onLogout","tab","setTab","clones","setClones","selectedClone","setSelectedClone","chatMessages","setChatMessages","chatInput","setChatInput","loading","setLoading","personalClones","setPersonalClones","token","localStorage","getItem","loadClones","get","personal","c","created_by","username","handleSendMessage","newMessage","id","conversation_type","headers","selectClone","clone","styles","title","subtitle","logoutBtn","tabs","section","sectionTitle","emptyState","createBtn","cloneGrid","cloneCard","onMouseEnter","currentTarget","onMouseLeave","face_image","src","cloneImage","alt","cloneInfo","cloneStyle","speaking_style","chatBtn","chatSection","chatContainer","messagesBox","emptyChat","alignSelf","inputBox","type","value","onChange","target","onKeyPress","key","placeholder","disabled","sendBtn","minHeight","fontFamily","overflowX","whiteSpace","maxWidth","marginBottom","gridTemplateColumns","objectFit","marginTop","createForm","wordWrap","borderTop"],"sources":["D:/IZ/AIClone/frontend/src/UserHome.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport Chat from './Chat';\r\nimport API_URL from './config';\r\n\r\n// AI Voice Chat Component - Inline\r\nconst AIVoiceChat = () => {\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [transcript, setTranscript] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [voicesLoaded, setVoicesLoaded] = useState(false);\r\n  \r\n  const recognitionRef = useRef(null);\r\n  const synthRef = useRef(window.speechSynthesis);\r\n  const isActiveRef = useRef(false);\r\n  const isSpeakingRef = useRef(false);\r\n  \r\n  // Load voices khi component mount\r\n  useEffect(() => {\r\n    const loadVoices = () => {\r\n      const voices = synthRef.current.getVoices();\r\n      if (voices.length > 0) {\r\n        setVoicesLoaded(true);\r\n        console.log('ğŸ¤ Voices loaded:', voices.length);\r\n        // Log Vietnamese voices\r\n        const viVoices = voices.filter(v => v.lang.startsWith('vi'));\r\n        if (viVoices.length > 0) {\r\n          console.log('ğŸ‡»ğŸ‡³ Vietnamese voices:', viVoices.map(v => v.name));\r\n        } else {\r\n          console.log('âš ï¸ No Vietnamese voices found');\r\n        }\r\n      }\r\n    };\r\n    \r\n    loadVoices();\r\n    \r\n    // Chrome cáº§n event nÃ y Ä‘á»ƒ load voices\r\n    if (synthRef.current.onvoiceschanged !== undefined) {\r\n      synthRef.current.onvoiceschanged = loadVoices;\r\n    }\r\n  }, []);\r\n  \r\n  // Khá»Ÿi táº¡o Speech Recognition\r\n  useEffect(() => {\r\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\r\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n      recognitionRef.current = new SpeechRecognition();\r\n      recognitionRef.current.continuous = true;\r\n      recognitionRef.current.interimResults = true;\r\n      recognitionRef.current.lang = 'vi-VN';\r\n      recognitionRef.current.maxAlternatives = 1;\r\n      \r\n      console.log('ğŸ¤ Speech Recognition initialized');\r\n      \r\n      recognitionRef.current.onstart = () => {\r\n        console.log('ğŸ¤ Listening started...');\r\n        setIsListening(true);\r\n      };\r\n      \r\n      recognitionRef.current.onresult = (event) => {\r\n        console.log('ğŸ¤ Got result:', event.results);\r\n        let finalTranscript = '';\r\n        let interimTranscript = '';\r\n        \r\n        for (let i = event.resultIndex; i < event.results.length; i++) {\r\n          const transcript = event.results[i][0].transcript;\r\n          if (event.results[i].isFinal) {\r\n            finalTranscript += transcript;\r\n          } else {\r\n            interimTranscript += transcript;\r\n          }\r\n        }\r\n        \r\n        if (interimTranscript) {\r\n          console.log('ğŸ¤ Interim:', interimTranscript);\r\n          setTranscript(interimTranscript);\r\n        }\r\n        \r\n        if (finalTranscript) {\r\n          console.log('ğŸ¤ Final:', finalTranscript);\r\n          setTranscript(finalTranscript);\r\n          handleUserSpeech(finalTranscript);\r\n        }\r\n      };\r\n      \r\n      recognitionRef.current.onerror = (event) => {\r\n        console.log('ğŸ¤ Speech recognition error:', event.error);\r\n        \r\n        switch(event.error) {\r\n          case 'not-allowed':\r\n            alert('âš ï¸ Vui lÃ²ng cho phÃ©p truy cáº­p microphone trong trÃ¬nh duyá»‡t!');\r\n            break;\r\n          case 'no-speech':\r\n            // Tá»± Ä‘á»™ng restart náº¿u khÃ´ng nghe tháº¥y gÃ¬\r\n            console.log('ğŸ¤ No speech detected, will restart...');\r\n            break;\r\n          case 'audio-capture':\r\n            alert('âš ï¸ KhÃ´ng tÃ¬m tháº¥y microphone! Vui lÃ²ng kiá»ƒm tra thiáº¿t bá»‹.');\r\n            break;\r\n          case 'network':\r\n            console.log('ğŸ¤ Network error, will retry...');\r\n            break;\r\n          case 'aborted':\r\n            console.log('ğŸ¤ Recognition aborted (normal when stopping)');\r\n            break;\r\n          default:\r\n            console.log('ğŸ¤ Unknown error:', event.error);\r\n        }\r\n      };\r\n      \r\n      recognitionRef.current.onend = () => {\r\n        console.log('ğŸ¤ Recognition ended, isActive:', isActiveRef.current, 'isSpeaking:', isSpeakingRef.current);\r\n        setIsListening(false);\r\n        // Chá»‰ restart náº¿u Ä‘ang active vÃ  khÃ´ng Ä‘ang nÃ³i\r\n        if (isActiveRef.current && !isSpeakingRef.current) {\r\n          console.log('ğŸ¤ Will restart in 300ms...');\r\n          setTimeout(() => restartListening(), 300);\r\n        }\r\n      };\r\n    } else {\r\n      console.error('âŒ Speech Recognition not supported in this browser');\r\n      alert('âš ï¸ TrÃ¬nh duyá»‡t khÃ´ng há»— trá»£ Speech Recognition! Vui lÃ²ng dÃ¹ng Chrome.');\r\n    }\r\n    \r\n    return () => {\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n      synthRef.current.cancel();\r\n    };\r\n  }, []);\r\n  \r\n  const restartListening = () => {\r\n    console.log('ğŸ¤ restartListening called, isActive:', isActiveRef.current, 'isSpeaking:', isSpeakingRef.current);\r\n    if (!recognitionRef.current) {\r\n      console.log('ğŸ¤ No recognition object!');\r\n      return;\r\n    }\r\n    if (!isActiveRef.current) {\r\n      console.log('ğŸ¤ Not active, skipping restart');\r\n      return;\r\n    }\r\n    if (isSpeakingRef.current) {\r\n      console.log('ğŸ¤ Still speaking, skipping restart');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      recognitionRef.current.start();\r\n      console.log('âœ… Recognition started successfully!');\r\n    } catch (e) {\r\n      console.log('ğŸ¤ Start error:', e.message);\r\n      // Náº¿u Ä‘Ã£ running thÃ¬ OK\r\n      if (e.message.includes('already started')) {\r\n        console.log('ğŸ¤ Already running, OK');\r\n      }\r\n    }\r\n  };\r\n  \r\n  // Request microphone permission first\r\n  const requestMicPermission = async () => {\r\n    try {\r\n      console.log('ğŸ¤ Requesting microphone permission...');\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      console.log('âœ… Microphone permission granted!');\r\n      // Stop the stream immediately, we just needed permission\r\n      stream.getTracks().forEach(track => track.stop());\r\n      return true;\r\n    } catch (err) {\r\n      console.error('âŒ Microphone permission denied:', err);\r\n      alert('âš ï¸ Vui lÃ²ng cho phÃ©p truy cáº­p microphone Ä‘á»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng nÃ y!\\n\\nNháº¥n vÃ o biá»ƒu tÆ°á»£ng ğŸ”’ trÃªn thanh Ä‘á»‹a chá»‰ â†’ Cho phÃ©p Microphone');\r\n      return false;\r\n    }\r\n  };\r\n  \r\n  const toggleActive = async () => {\r\n    if (!isActive) {\r\n      // Request mic permission first\r\n      const hasPermission = await requestMicPermission();\r\n      if (!hasPermission) return;\r\n      \r\n      setIsActive(true);\r\n      isActiveRef.current = true;\r\n      setMessages([{ role: 'bot', content: 'Xin chÃ o! TÃ´i lÃ  AI-Bot. HÃ£y nÃ³i chuyá»‡n vá»›i tÃ´i!' }]);\r\n      speak('Xin chÃ o! TÃ´i lÃ  AI Bot. HÃ£y nÃ³i chuyá»‡n vá»›i tÃ´i!');\r\n    } else {\r\n      setIsActive(false);\r\n      isActiveRef.current = false;\r\n      setIsListening(false);\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n      synthRef.current.cancel();\r\n    }\r\n  };\r\n  \r\n  const handleUserSpeech = async (text) => {\r\n    if (!text.trim() || isSpeakingRef.current) return;\r\n    \r\n    setIsListening(false);\r\n    if (recognitionRef.current) {\r\n      recognitionRef.current.stop();\r\n    }\r\n    \r\n    setMessages(prev => [...prev, { role: 'user', content: text }]);\r\n    setTranscript('');\r\n    \r\n    try {\r\n      const res = await axios.post(`${API_URL}/api/ai/chat`, {\r\n        message: text\r\n      });\r\n      \r\n      const botResponse = res.data.response || res.data.message || 'TÃ´i khÃ´ng hiá»ƒu, báº¡n cÃ³ thá»ƒ nÃ³i láº¡i khÃ´ng?';\r\n      setMessages(prev => [...prev, { role: 'bot', content: botResponse }]);\r\n      speak(botResponse);\r\n      \r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      const errorMsg = 'Xin lá»—i, cÃ³ lá»—i xáº£y ra. HÃ£y thá»­ láº¡i!';\r\n      setMessages(prev => [...prev, { role: 'bot', content: errorMsg }]);\r\n      speak(errorMsg);\r\n    }\r\n  };\r\n  \r\n  const speak = (text) => {\r\n    if (!synthRef.current) return;\r\n    \r\n    synthRef.current.cancel();\r\n    \r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    utterance.lang = 'vi-VN';\r\n    utterance.rate = 1.0;   // Tá»‘c Ä‘á»™ bÃ¬nh thÆ°á»ng cho giá»ng Google\r\n    utterance.pitch = 1.0;  // Pitch bÃ¬nh thÆ°á»ng\r\n    utterance.volume = 1;   // Ã‚m lÆ°á»£ng tá»‘i Ä‘a\r\n    \r\n    // Láº¥y danh sÃ¡ch giá»ng nÃ³i\r\n    const voices = synthRef.current.getVoices();\r\n    console.log('ğŸ”Š Available voices:', voices.map(v => `${v.name} (${v.lang})`));\r\n    \r\n    // Æ¯u tiÃªn giá»ng chá»‹ Google tiáº¿ng Viá»‡t\r\n    let bestVoice = null;\r\n    \r\n    // 1. Google tiáº¿ng Viá»‡t (giá»ng chá»‹ Google - tá»‘t nháº¥t!)\r\n    bestVoice = voices.find(voice => \r\n      voice.name === 'Google tiáº¿ng Viá»‡t' || \r\n      (voice.name.toLowerCase().includes('google') && voice.lang === 'vi-VN')\r\n    );\r\n    \r\n    // 2. Báº¥t ká»³ giá»ng Google nÃ o cÃ³ tiáº¿ng Viá»‡t\r\n    if (!bestVoice) {\r\n      bestVoice = voices.find(voice => \r\n        voice.name.toLowerCase().includes('google') && voice.lang.startsWith('vi')\r\n      );\r\n    }\r\n    \r\n    // 3. Báº¥t ká»³ giá»ng vi-VN nÃ o\r\n    if (!bestVoice) {\r\n      bestVoice = voices.find(voice => voice.lang === 'vi-VN');\r\n    }\r\n    \r\n    // 4. Google English (náº¿u khÃ´ng cÃ³ tiáº¿ng Viá»‡t)\r\n    if (!bestVoice) {\r\n      bestVoice = voices.find(voice => \r\n        voice.name.toLowerCase().includes('google') && voice.lang.startsWith('en')\r\n      );\r\n    }\r\n    \r\n    if (bestVoice) {\r\n      utterance.voice = bestVoice;\r\n      // Náº¿u dÃ¹ng giá»ng tiáº¿ng Anh, Ä‘iá»u chá»‰nh Ä‘á»ƒ Ä‘á»c tiáº¿ng Viá»‡t dá»… nghe hÆ¡n\r\n      if (!bestVoice.lang.startsWith('vi')) {\r\n        utterance.rate = 0.8;  // Cháº­m hÆ¡n\r\n      }\r\n      console.log('âœ… Using voice:', bestVoice.name, bestVoice.lang);\r\n    } else {\r\n      console.log('âš ï¸ No suitable voice found, using default');\r\n    }\r\n    \r\n    utterance.onstart = () => {\r\n      setIsSpeaking(true);\r\n      isSpeakingRef.current = true;\r\n    };\r\n    \r\n    utterance.onend = () => {\r\n      console.log('ğŸ”Š Speech ended, will start listening...');\r\n      setIsSpeaking(false);\r\n      isSpeakingRef.current = false;\r\n      if (isActiveRef.current) {\r\n        // Äá»£i lÃ¢u hÆ¡n Ä‘á»ƒ Ä‘áº£m báº£o audio Ä‘Ã£ dá»«ng hoÃ n toÃ n\r\n        setTimeout(() => {\r\n          console.log('ğŸ¤ Starting to listen after speech...');\r\n          restartListening();\r\n        }, 800);\r\n      }\r\n    };\r\n    \r\n    synthRef.current.speak(utterance);\r\n  };\r\n  \r\n  return (\r\n    <div style={voiceStyles.container}>\r\n      {/* Header */}\r\n      <div style={voiceStyles.header}>\r\n        <h2 style={voiceStyles.headerTitle}>ğŸ¤– AI Voice Assistant</h2>\r\n        <p style={voiceStyles.headerSubtitle}>TrÃ² chuyá»‡n báº±ng giá»ng nÃ³i vá»›i AI</p>\r\n      </div>\r\n      \r\n      {/* Robot Avatar */}\r\n      <div style={voiceStyles.avatarSection}>\r\n        <div style={{\r\n          ...voiceStyles.robotContainer,\r\n          animation: isActive ? 'float 3s ease-in-out infinite' : 'none',\r\n        }}>\r\n          {/* Antenna */}\r\n          <div style={voiceStyles.antenna}>\r\n            <div style={{\r\n              ...voiceStyles.antennaLight,\r\n              background: isActive ? '#00ff88' : '#ff4757',\r\n              boxShadow: isActive ? '0 0 20px #00ff88, 0 0 40px #00ff88' : '0 0 10px #ff4757',\r\n              animation: isActive ? 'glow 1s ease-in-out infinite alternate' : 'none',\r\n            }}></div>\r\n          </div>\r\n          \r\n          {/* Head */}\r\n          <div style={voiceStyles.robotHead}>\r\n            {/* Ears/Headphones */}\r\n            <div style={{...voiceStyles.ear, left: '-15px'}}></div>\r\n            <div style={{...voiceStyles.ear, right: '-15px'}}></div>\r\n            \r\n            {/* Face Screen */}\r\n            <div style={voiceStyles.robotFace}>\r\n              {/* Eyes */}\r\n              <div style={voiceStyles.robotEyes}>\r\n                <div style={{\r\n                  ...voiceStyles.robotEye,\r\n                  background: isActive ? '#00ff88' : '#00d4ff',\r\n                  boxShadow: isActive ? '0 0 15px #00ff88, 0 0 30px #00ff88' : '0 0 10px #00d4ff',\r\n                  animation: isListening ? 'eyePulse 0.5s ease-in-out infinite alternate' : 'blink 4s infinite',\r\n                }}>\r\n                  <div style={voiceStyles.eyeHighlight}></div>\r\n                </div>\r\n                <div style={{\r\n                  ...voiceStyles.robotEye,\r\n                  background: isActive ? '#00ff88' : '#00d4ff',\r\n                  boxShadow: isActive ? '0 0 15px #00ff88, 0 0 30px #00ff88' : '0 0 10px #00d4ff',\r\n                  animation: isListening ? 'eyePulse 0.5s ease-in-out infinite alternate' : 'blink 4s infinite',\r\n                }}>\r\n                  <div style={voiceStyles.eyeHighlight}></div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Mouth */}\r\n              <div style={{\r\n                ...voiceStyles.robotMouth,\r\n                animation: isSpeaking ? 'speak 0.15s ease-in-out infinite alternate' : 'none',\r\n                background: isSpeaking ? '#00ff88' : '#00d4ff',\r\n              }}></div>\r\n              \r\n              {/* Sound waves when speaking */}\r\n              {isSpeaking && (\r\n                <div style={voiceStyles.soundWaves}>\r\n                  <div style={{...voiceStyles.wave, animationDelay: '0s'}}></div>\r\n                  <div style={{...voiceStyles.wave, animationDelay: '0.2s'}}></div>\r\n                  <div style={{...voiceStyles.wave, animationDelay: '0.4s'}}></div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Body */}\r\n          <div style={voiceStyles.robotBody}>\r\n            <div style={voiceStyles.robotChest}>\r\n              <div style={{\r\n                ...voiceStyles.chestCore,\r\n                background: isActive ? '#00ff88' : '#00d4ff',\r\n                boxShadow: isActive ? '0 0 20px #00ff88' : '0 0 10px #00d4ff',\r\n              }}></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Status Badge */}\r\n        <div style={{\r\n          ...voiceStyles.status,\r\n          background: isActive \r\n            ? 'linear-gradient(90deg, rgba(0,255,136,0.2), rgba(0,212,255,0.2))' \r\n            : 'rgba(0, 0, 0, 0.4)',\r\n          border: isActive ? '2px solid #00ff88' : '2px solid rgba(255,255,255,0.1)',\r\n        }}>\r\n          {!isActive && <span style={{ color: '#888' }}>ğŸ’¤ ChÆ°a hoáº¡t Ä‘á»™ng</span>}\r\n          {isActive && isListening && !isSpeaking && (\r\n            <span style={{ color: '#00ff88', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n              <span style={voiceStyles.listeningDot}></span>\r\n              Äang láº¯ng nghe...\r\n            </span>\r\n          )}\r\n          {isActive && isSpeaking && <span style={{ color: '#00d4ff' }}>ğŸ”Š Äang nÃ³i...</span>}\r\n          {isActive && !isListening && !isSpeaking && <span style={{ color: '#ffd700' }}>â³ Äang xá»­ lÃ½...</span>}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Messages */}\r\n      <div style={voiceStyles.messagesContainer}>\r\n        <h3 style={voiceStyles.messagesTitle}>ğŸ’¬ Lá»‹ch sá»­ há»™i thoáº¡i</h3>\r\n        <div style={voiceStyles.messagesList}>\r\n          {messages.length === 0 && (\r\n            <div style={voiceStyles.emptyMessage}>\r\n              <span>ğŸ¤</span>\r\n              <p>Nháº¥n nÃºt bÃªn dÆ°á»›i Ä‘á»ƒ báº¯t Ä‘áº§u trÃ² chuyá»‡n</p>\r\n            </div>\r\n          )}\r\n          {messages.map((msg, idx) => (\r\n            <div key={idx} style={{\r\n              ...voiceStyles.message,\r\n              background: msg.role === 'user' \r\n                ? 'linear-gradient(135deg, rgba(0, 200, 255, 0.15), rgba(0, 200, 255, 0.05))' \r\n                : 'linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 255, 136, 0.05))',\r\n              borderLeft: msg.role === 'user' ? '4px solid #00d4ff' : '4px solid #00ff88',\r\n            }}>\r\n              <div style={{\r\n                ...voiceStyles.messageAvatar,\r\n                background: msg.role === 'user' \r\n                  ? 'linear-gradient(135deg, #00d4ff, #0099cc)' \r\n                  : 'linear-gradient(135deg, #00ff88, #00cc6a)',\r\n              }}>\r\n                {msg.role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–'}\r\n              </div>\r\n              <div style={voiceStyles.messageContent}>\r\n                <span style={voiceStyles.messageRole}>{msg.role === 'user' ? 'Báº¡n' : 'AI Bot'}</span>\r\n                <span style={voiceStyles.messageText}>{msg.content}</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          \r\n          {transcript && isListening && (\r\n            <div style={{\r\n              ...voiceStyles.message,\r\n              background: 'rgba(0, 200, 255, 0.05)',\r\n              borderLeft: '4px dashed #00d4ff',\r\n              opacity: 0.7,\r\n            }}>\r\n              <div style={{...voiceStyles.messageAvatar, background: 'linear-gradient(135deg, #00d4ff, #0099cc)'}}>\r\n                ğŸ‘¤\r\n              </div>\r\n              <div style={voiceStyles.messageContent}>\r\n                <span style={voiceStyles.messageRole}>Báº¡n</span>\r\n                <span style={{...voiceStyles.messageText, fontStyle: 'italic'}}>{transcript}...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Control */}\r\n      <div style={voiceStyles.controlSection}>\r\n        <button \r\n          onClick={toggleActive}\r\n          style={{\r\n            ...voiceStyles.toggleBtn,\r\n            background: isActive \r\n              ? 'linear-gradient(135deg, #ff4757 0%, #ff6b81 100%)' \r\n              : 'linear-gradient(135deg, #00d4ff 0%, #00ff88 100%)',\r\n            boxShadow: isActive \r\n              ? '0 8px 30px rgba(255, 71, 87, 0.4)' \r\n              : '0 8px 30px rgba(0, 212, 255, 0.4)',\r\n          }}\r\n        >\r\n          <span style={voiceStyles.btnIcon}>{isActive ? 'â¹ï¸' : 'ğŸ™ï¸'}</span>\r\n          <span>{isActive ? 'Dá»«ng láº¡i' : 'Báº¯t Ä‘áº§u nÃ³i chuyá»‡n'}</span>\r\n        </button>\r\n        <p style={voiceStyles.hint}>\r\n          {isActive \r\n            ? 'ğŸ¤ HÃ£y nÃ³i, AI-Bot Ä‘ang láº¯ng nghe báº¡n...' \r\n            : 'ğŸ‘† Nháº¥n nÃºt Ä‘á»ƒ báº¯t Ä‘áº§u trÃ² chuyá»‡n báº±ng giá»ng nÃ³i'}\r\n        </p>\r\n      </div>\r\n      \r\n      {/* CSS Keyframes */}\r\n      <style>{`\r\n        @keyframes float {\r\n          0%, 100% { transform: translateY(0); }\r\n          50% { transform: translateY(-15px); }\r\n        }\r\n        @keyframes blink {\r\n          0%, 90%, 100% { transform: scaleY(1); }\r\n          95% { transform: scaleY(0.1); }\r\n        }\r\n        @keyframes eyePulse {\r\n          0% { transform: scale(1); box-shadow: 0 0 15px #00ff88; }\r\n          100% { transform: scale(1.2); box-shadow: 0 0 30px #00ff88, 0 0 50px #00ff88; }\r\n        }\r\n        @keyframes speak {\r\n          0% { height: 6px; width: 35px; border-radius: 6px; }\r\n          100% { height: 18px; width: 28px; border-radius: 50%; }\r\n        }\r\n        @keyframes glow {\r\n          0% { opacity: 0.5; transform: scale(1); }\r\n          100% { opacity: 1; transform: scale(1.2); }\r\n        }\r\n        @keyframes waveAnim {\r\n          0% { transform: scaleY(0.3); opacity: 0.3; }\r\n          50% { transform: scaleY(1); opacity: 1; }\r\n          100% { transform: scaleY(0.3); opacity: 0.3; }\r\n        }\r\n        @keyframes listeningPulse {\r\n          0%, 100% { opacity: 1; transform: scale(1); }\r\n          50% { opacity: 0.5; transform: scale(0.8); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst voiceStyles = {\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '25px',\r\n    padding: '30px',\r\n    background: 'linear-gradient(135deg, #0f0f23 0%, #1a1a3e 50%, #0f0f23 100%)',\r\n    borderRadius: '24px',\r\n    border: '2px solid rgba(0, 200, 255, 0.2)',\r\n    boxShadow: '0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(0, 200, 255, 0.1), inset 0 1px 0 rgba(255,255,255,0.1)',\r\n  },\r\n  header: {\r\n    textAlign: 'center',\r\n    paddingBottom: '10px',\r\n    borderBottom: '1px solid rgba(255,255,255,0.1)',\r\n  },\r\n  headerTitle: {\r\n    margin: '0 0 5px 0',\r\n    fontSize: '24px',\r\n    background: 'linear-gradient(90deg, #00d4ff, #00ff88)',\r\n    WebkitBackgroundClip: 'text',\r\n    WebkitTextFillColor: 'transparent',\r\n    fontWeight: 'bold',\r\n  },\r\n  headerSubtitle: {\r\n    margin: 0,\r\n    color: 'rgba(255,255,255,0.5)',\r\n    fontSize: '13px',\r\n  },\r\n  avatarSection: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    gap: '20px',\r\n    padding: '20px',\r\n  },\r\n  robotContainer: {\r\n    width: '160px',\r\n    height: '220px',\r\n    position: 'relative',\r\n  },\r\n  antenna: {\r\n    position: 'absolute',\r\n    top: '-25px',\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n    width: '4px',\r\n    height: '25px',\r\n    background: 'linear-gradient(180deg, #3a7bd5, #2b5fb3)',\r\n    borderRadius: '2px',\r\n  },\r\n  antennaLight: {\r\n    position: 'absolute',\r\n    top: '-8px',\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n    width: '12px',\r\n    height: '12px',\r\n    borderRadius: '50%',\r\n  },\r\n  robotHead: {\r\n    width: '130px',\r\n    height: '110px',\r\n    background: 'linear-gradient(180deg, #4a8fe7 0%, #3a7bd5 50%, #2b5fb3 100%)',\r\n    borderRadius: '25px 25px 20px 20px',\r\n    position: 'absolute',\r\n    top: '0',\r\n    left: '15px',\r\n    boxShadow: '0 15px 40px rgba(58, 123, 213, 0.5), inset 0 2px 0 rgba(255,255,255,0.2), inset 0 -5px 15px rgba(0, 0, 0, 0.3)',\r\n  },\r\n  ear: {\r\n    position: 'absolute',\r\n    top: '30px',\r\n    width: '20px',\r\n    height: '40px',\r\n    background: 'linear-gradient(180deg, #3a7bd5, #2b5fb3)',\r\n    borderRadius: '10px',\r\n    boxShadow: '0 5px 15px rgba(0,0,0,0.3)',\r\n  },\r\n  robotFace: {\r\n    position: 'absolute',\r\n    top: '20px',\r\n    left: '15px',\r\n    width: '100px',\r\n    height: '65px',\r\n    background: 'linear-gradient(180deg, #0d1117 0%, #161b22 100%)',\r\n    borderRadius: '15px',\r\n    border: '3px solid #00d4ff',\r\n    boxShadow: 'inset 0 0 30px rgba(0, 212, 255, 0.2), 0 0 15px rgba(0, 212, 255, 0.3)',\r\n    overflow: 'hidden',\r\n  },\r\n  robotEyes: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    gap: '30px',\r\n    paddingTop: '15px',\r\n  },\r\n  robotEye: {\r\n    width: '20px',\r\n    height: '20px',\r\n    borderRadius: '50%',\r\n    position: 'relative',\r\n  },\r\n  eyeHighlight: {\r\n    position: 'absolute',\r\n    top: '3px',\r\n    left: '3px',\r\n    width: '6px',\r\n    height: '6px',\r\n    background: 'rgba(255,255,255,0.8)',\r\n    borderRadius: '50%',\r\n  },\r\n  robotMouth: {\r\n    width: '35px',\r\n    height: '6px',\r\n    margin: '12px auto 0',\r\n    borderRadius: '6px',\r\n  },\r\n  soundWaves: {\r\n    position: 'absolute',\r\n    bottom: '8px',\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n    display: 'flex',\r\n    gap: '4px',\r\n    alignItems: 'flex-end',\r\n    height: '15px',\r\n  },\r\n  wave: {\r\n    width: '4px',\r\n    height: '100%',\r\n    background: '#00ff88',\r\n    borderRadius: '2px',\r\n    animation: 'waveAnim 0.5s ease-in-out infinite',\r\n  },\r\n  robotBody: {\r\n    width: '100px',\r\n    height: '80px',\r\n    background: 'linear-gradient(180deg, #3a7bd5 0%, #2b5fb3 100%)',\r\n    borderRadius: '20px 20px 25px 25px',\r\n    position: 'absolute',\r\n    bottom: '10px',\r\n    left: '30px',\r\n    boxShadow: '0 10px 30px rgba(58, 123, 213, 0.4), inset 0 2px 0 rgba(255,255,255,0.1)',\r\n  },\r\n  robotChest: {\r\n    width: '60px',\r\n    height: '40px',\r\n    background: 'rgba(0, 0, 0, 0.3)',\r\n    borderRadius: '12px',\r\n    margin: '15px auto',\r\n    border: '2px solid rgba(0, 212, 255, 0.3)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  chestCore: {\r\n    width: '20px',\r\n    height: '20px',\r\n    borderRadius: '50%',\r\n  },\r\n  status: {\r\n    fontSize: '15px',\r\n    padding: '12px 25px',\r\n    borderRadius: '30px',\r\n    fontWeight: 'bold',\r\n    transition: 'all 0.3s',\r\n  },\r\n  listeningDot: {\r\n    width: '10px',\r\n    height: '10px',\r\n    background: '#00ff88',\r\n    borderRadius: '50%',\r\n    animation: 'listeningPulse 1s ease-in-out infinite',\r\n  },\r\n  messagesContainer: {\r\n    background: 'rgba(0, 0, 0, 0.3)',\r\n    borderRadius: '16px',\r\n    padding: '20px',\r\n    maxHeight: '280px',\r\n    border: '1px solid rgba(255,255,255,0.05)',\r\n  },\r\n  messagesTitle: {\r\n    margin: '0 0 15px 0',\r\n    color: '#00d4ff',\r\n    fontSize: '15px',\r\n    fontWeight: '600',\r\n  },\r\n  messagesList: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '12px',\r\n    maxHeight: '220px',\r\n    overflowY: 'auto',\r\n    paddingRight: '5px',\r\n  },\r\n  emptyMessage: {\r\n    textAlign: 'center',\r\n    padding: '30px',\r\n    color: 'rgba(255,255,255,0.4)',\r\n    fontSize: '14px',\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'flex-start',\r\n    gap: '12px',\r\n    padding: '14px 16px',\r\n    borderRadius: '12px',\r\n    transition: 'all 0.2s',\r\n  },\r\n  messageAvatar: {\r\n    width: '36px',\r\n    height: '36px',\r\n    borderRadius: '50%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontSize: '16px',\r\n    flexShrink: 0,\r\n  },\r\n  messageContent: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '4px',\r\n    flex: 1,\r\n  },\r\n  messageRole: {\r\n    fontSize: '12px',\r\n    color: 'rgba(255,255,255,0.5)',\r\n    fontWeight: '600',\r\n  },\r\n  messageText: {\r\n    color: '#e0e0e0',\r\n    fontSize: '14px',\r\n    lineHeight: '1.5',\r\n  },\r\n  controlSection: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    gap: '12px',\r\n    paddingTop: '10px',\r\n  },\r\n  toggleBtn: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    gap: '10px',\r\n    padding: '16px 40px',\r\n    border: 'none',\r\n    borderRadius: '50px',\r\n    fontSize: '16px',\r\n    fontWeight: 'bold',\r\n    cursor: 'pointer',\r\n    color: '#fff',\r\n    transition: 'all 0.3s',\r\n    textShadow: '0 2px 4px rgba(0,0,0,0.2)',\r\n  },\r\n  btnIcon: {\r\n    fontSize: '20px',\r\n  },\r\n  hint: {\r\n    color: 'rgba(255, 255, 255, 0.5)',\r\n    fontSize: '13px',\r\n    margin: 0,\r\n  },\r\n};\r\n\r\nconst UserHome = ({ user, role, onLogout }) => {\r\n  const [tab, setTab] = useState('clones'); // chat, clones, create\r\n  const [clones, setClones] = useState([]);\r\n  const [selectedClone, setSelectedClone] = useState(null);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [chatInput, setChatInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [personalClones, setPersonalClones] = useState([]);\r\n\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    loadClones();\r\n  }, []);\r\n\r\n  const loadClones = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/api/clones/`);\r\n      setClones(response.data);\r\n      // Filter personal clones created by this user\r\n      const personal = response.data.filter(c => c.created_by === user.username);\r\n      setPersonalClones(personal);\r\n    } catch (error) {\r\n      console.error('Error loading clones:', error);\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!chatInput.trim() || !selectedClone) return;\r\n\r\n    const newMessage = { role: 'user', content: chatInput };\r\n    setChatMessages([...chatMessages, newMessage]);\r\n    setChatInput('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        `${API_URL}/api/clones/${selectedClone.id}/memory`,\r\n        {\r\n          message: chatInput,\r\n          conversation_type: 'chat'\r\n        },\r\n        {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        }\r\n      );\r\n\r\n      setChatMessages(prev => [...prev, { role: 'assistant', content: response.data.response }]);\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      setChatMessages(prev => [...prev, { role: 'assistant', content: 'Error getting response' }]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectClone = (clone) => {\r\n    setSelectedClone(clone);\r\n    setChatMessages([]);\r\n    setTab('chat');\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/* Header */}\r\n      <div style={styles.header}>\r\n        <div>\r\n          <h1 style={styles.title}>ğŸ§¬ AIClone</h1>\r\n          <p style={styles.subtitle}>Welcome, {user.username}!</p>\r\n        </div>\r\n        <button onClick={onLogout} style={styles.logoutBtn}>\r\n          ğŸšª Logout\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div style={styles.tabs}>\r\n        <button\r\n          onClick={() => setTab('clones')}\r\n          style={{\r\n            ...styles.tab,\r\n            background: tab === 'clones' ? '#4ECDC4' : 'rgba(255,255,255,0.1)',\r\n          }}\r\n        >\r\n          ğŸ“š All Clones\r\n        </button>\r\n        {selectedClone && (\r\n          <button\r\n            onClick={() => setTab('chat')}\r\n            style={{\r\n              ...styles.tab,\r\n              background: tab === 'chat' ? '#27AE60' : 'rgba(255,255,255,0.1)',\r\n            }}\r\n          >\r\n            ğŸ’¬ Chat with {selectedClone.name}\r\n          </button>\r\n        )}\r\n        <button\r\n          onClick={() => setTab('gemini')}\r\n          style={{\r\n            ...styles.tab,\r\n            background: tab === 'gemini' ? '#FF9800' : 'rgba(255,255,255,0.1)',\r\n          }}\r\n        >\r\n          ğŸ¤– Chat with Gemini\r\n        </button>\r\n        <button\r\n          onClick={() => setTab('aibot')}\r\n          style={{\r\n            ...styles.tab,\r\n            background: tab === 'aibot' ? '#00d4ff' : 'rgba(255,255,255,0.1)',\r\n          }}\r\n        >\r\n          ğŸ™ï¸ AI Voice Chat\r\n        </button>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div style={styles.content}>\r\n        {/* Show message when no clone selected and trying to view chat */}\r\n        {tab === 'chat' && !selectedClone && (\r\n          <div style={styles.section}>\r\n            <h2 style={styles.sectionTitle}>ğŸ’¬ Chat</h2>\r\n            <div style={styles.emptyState}>\r\n              <p>Please select a clone to start chatting</p>\r\n              <button\r\n                onClick={() => setTab('clones')}\r\n                style={styles.createBtn}\r\n              >\r\n                Browse Available Clones â†’\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* All Clones Tab */}\r\n        {tab === 'clones' && (\r\n          <div style={styles.section}>\r\n            <h2 style={styles.sectionTitle}>All Available Clones</h2>\r\n            <div style={styles.cloneGrid}>\r\n              {clones.length === 0 ? (\r\n                <p>No clones available yet</p>\r\n              ) : (\r\n                clones.map(clone => (\r\n                  <div\r\n                    key={clone.id}\r\n                    onClick={() => selectClone(clone)}\r\n                    style={{\r\n                      ...styles.cloneCard,\r\n                      cursor: 'pointer',\r\n                      transform: 'scale(1)',\r\n                      transition: 'transform 0.2s',\r\n                    }}\r\n                    onMouseEnter={(e) => e.currentTarget.style.transform = 'scale(1.05)'}\r\n                    onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n                  >\r\n                    {clone.face_image && (\r\n                      <img\r\n                        src={`data:image/png;base64,${clone.face_image}`}\r\n                        style={styles.cloneImage}\r\n                        alt={clone.name}\r\n                      />\r\n                    )}\r\n                    <div style={styles.cloneInfo}>\r\n                      <h3>{clone.name || 'Unnamed Clone'}</h3>\r\n                      <p style={styles.cloneStyle}>{clone.speaking_style || 'Default'}</p>\r\n                      <button style={styles.chatBtn}>Start Chat â†’</button>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Chat Tab */}\r\n        {tab === 'chat' && selectedClone && (\r\n          <div style={styles.chatSection}>\r\n            <h2 style={styles.sectionTitle}>Chatting with {selectedClone.name}</h2>\r\n            <div style={styles.chatContainer}>\r\n              <div style={styles.messagesBox}>\r\n                {chatMessages.length === 0 && (\r\n                  <div style={styles.emptyChat}>\r\n                    <p>ğŸ‘‹ Start a conversation</p>\r\n                  </div>\r\n                )}\r\n                {chatMessages.map((msg, idx) => (\r\n                  <div\r\n                    key={idx}\r\n                    style={{\r\n                      ...styles.message,\r\n                      alignSelf: msg.role === 'user' ? 'flex-end' : 'flex-start',\r\n                      background: msg.role === 'user' ? '#4ECDC4' : '#9B59B6',\r\n                    }}\r\n                  >\r\n                    {msg.content}\r\n                  </div>\r\n                ))}\r\n                {loading && <div style={styles.loading}>â³ Thinking...</div>}\r\n              </div>\r\n\r\n              <div style={styles.inputBox}>\r\n                <input\r\n                  type=\"text\"\r\n                  value={chatInput}\r\n                  onChange={(e) => setChatInput(e.target.value)}\r\n                  onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                  placeholder=\"Type your message...\"\r\n                  style={styles.chatInput}\r\n                  disabled={loading}\r\n                />\r\n                <button\r\n                  onClick={handleSendMessage}\r\n                  disabled={loading}\r\n                  style={{...styles.sendBtn, opacity: loading ? 0.5 : 1}}\r\n                >\r\n                  ğŸ“¤ Send\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Gemini Chat Tab */}\r\n        {tab === 'gemini' && (\r\n          <div style={styles.section}>\r\n            <Chat />\r\n          </div>\r\n        )}\r\n\r\n        {/* AI Voice Chat Tab */}\r\n        {tab === 'aibot' && (\r\n          <AIVoiceChat />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    minHeight: '100vh',\r\n    background: 'linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)',\r\n    color: 'white',\r\n    fontFamily: \"'Segoe UI', sans-serif\",\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: '30px 40px',\r\n    background: 'rgba(0,0,0,0.3)',\r\n    borderBottom: '1px solid rgba(255,255,255,0.1)',\r\n  },\r\n  title: {\r\n    fontSize: '2rem',\r\n    margin: '0 0 5px 0',\r\n    background: 'linear-gradient(90deg, #4ECDC4, #44A08D)',\r\n    WebkitBackgroundClip: 'text',\r\n    WebkitTextFillColor: 'transparent',\r\n  },\r\n  subtitle: {\r\n    margin: 0,\r\n    color: 'rgba(255,255,255,0.7)',\r\n    fontSize: '14px',\r\n  },\r\n  logoutBtn: {\r\n    padding: '10px 20px',\r\n    background: '#E74C3C',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n  },\r\n  tabs: {\r\n    display: 'flex',\r\n    gap: '10px',\r\n    padding: '20px 40px',\r\n    background: 'rgba(0,0,0,0.2)',\r\n    borderBottom: '1px solid rgba(255,255,255,0.1)',\r\n    overflowX: 'auto',\r\n  },\r\n  tab: {\r\n    padding: '10px 20px',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    cursor: 'pointer',\r\n    color: 'white',\r\n    fontWeight: 'bold',\r\n    fontSize: '14px',\r\n    whiteSpace: 'nowrap',\r\n    transition: 'all 0.3s',\r\n  },\r\n  content: {\r\n    padding: '40px',\r\n    maxWidth: '1400px',\r\n    margin: '0 auto',\r\n  },\r\n  section: {\r\n    marginBottom: '40px',\r\n  },\r\n  sectionTitle: {\r\n    fontSize: '1.8rem',\r\n    marginBottom: '20px',\r\n    color: 'white',\r\n  },\r\n  cloneGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))',\r\n    gap: '20px',\r\n  },\r\n  cloneCard: {\r\n    background: 'rgba(255,255,255,0.05)',\r\n    border: '1px solid rgba(255,255,255,0.1)',\r\n    borderRadius: '12px',\r\n    overflow: 'hidden',\r\n    transition: 'all 0.3s',\r\n  },\r\n  cloneImage: {\r\n    width: '100%',\r\n    height: '200px',\r\n    objectFit: 'cover',\r\n  },\r\n  cloneInfo: {\r\n    padding: '15px',\r\n  },\r\n  cloneStyle: {\r\n    fontSize: '12px',\r\n    color: 'rgba(255,255,255,0.6)',\r\n    margin: '5px 0',\r\n  },\r\n  chatBtn: {\r\n    width: '100%',\r\n    padding: '8px',\r\n    background: '#4ECDC4',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '6px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n    marginTop: '10px',\r\n  },\r\n  emptyState: {\r\n    textAlign: 'center',\r\n    padding: '60px 20px',\r\n    background: 'rgba(255,255,255,0.05)',\r\n    borderRadius: '12px',\r\n  },\r\n  createBtn: {\r\n    padding: '12px 30px',\r\n    background: 'linear-gradient(135deg, #ff7043, #ff5722)',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n    fontSize: '14px',\r\n    marginTop: '20px',\r\n  },\r\n  createForm: {\r\n    background: 'rgba(255,255,255,0.05)',\r\n    padding: '40px',\r\n    borderRadius: '12px',\r\n    textAlign: 'center',\r\n  },\r\n  chatSection: {\r\n    marginBottom: '40px',\r\n  },\r\n  chatContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    height: '600px',\r\n    background: 'rgba(255,255,255,0.05)',\r\n    borderRadius: '12px',\r\n    overflow: 'hidden',\r\n  },\r\n  messagesBox: {\r\n    flex: 1,\r\n    padding: '20px',\r\n    overflowY: 'auto',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '10px',\r\n  },\r\n  message: {\r\n    padding: '12px 16px',\r\n    borderRadius: '8px',\r\n    maxWidth: '60%',\r\n    wordWrap: 'break-word',\r\n  },\r\n  emptyChat: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    height: '100%',\r\n    color: 'rgba(255,255,255,0.4)',\r\n    fontSize: '18px',\r\n  },\r\n  loading: {\r\n    color: 'rgba(255,255,255,0.6)',\r\n    fontStyle: 'italic',\r\n  },\r\n  inputBox: {\r\n    display: 'flex',\r\n    gap: '10px',\r\n    padding: '15px 20px',\r\n    borderTop: '1px solid rgba(255,255,255,0.1)',\r\n  },\r\n  chatInput: {\r\n    flex: 1,\r\n    padding: '12px',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '1px solid rgba(255,255,255,0.2)',\r\n    borderRadius: '8px',\r\n    color: 'white',\r\n    fontSize: '14px',\r\n  },\r\n  sendBtn: {\r\n    padding: '12px 20px',\r\n    background: '#4ECDC4',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n  },\r\n};\r\n\r\nexport default UserHome;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}