{"ast":null,"code":"import _objectSpread from\"D:/IZ/AIClone/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import axios from'axios';import{FiSend,FiTrash2,FiSettings,FiUpload,FiChevronUp,FiFile,FiMapPin,FiPlay,FiMic,FiType,FiSmile,FiThumbsUp,FiDownload,FiSearch,FiCopy,FiEdit2,FiRefreshCw}from'react-icons/fi';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL='http://localhost:8000';function Chat(){const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const[showSettings,setShowSettings]=useState(false);const[uploadQuery,setUploadQuery]=useState('');const[userName,setUserName]=useState('You');const[showUploadMenu,setShowUploadMenu]=useState(false);const[sidebarOpen,setSidebarOpen]=useState(true);const[conversationHistory,setConversationHistory]=useState([]);const[searchQuery,setSearchQuery]=useState('');const[hoveredMsgIdx,setHoveredMsgIdx]=useState(null);const[copiedIdx,setCopiedIdx]=useState(null);const[editingIdx,setEditingIdx]=useState(null);const[editingText,setEditingText]=useState('');const[aiProfile,setAiProfile]=useState({name:'AIClone',avatar:'ü§ñ',status:'Online',color:'#0066FF'});const messagesEndRef=useRef(null);const imageInputRef=useRef(null);const documentInputRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{scrollToBottom();},[messages]);useEffect(()=>{loadHistory();loadAIProfile();},[]);const loadAIProfile=async()=>{try{const response=await axios.get(\"\".concat(API_URL,\"/api/ai-profile\"));setAiProfile(response.data);}catch(error){console.error('Failed to load AI profile:',error);}};const loadHistory=async()=>{try{const response=await axios.get(\"\".concat(API_URL,\"/api/history\"));if(response.data.messages){setMessages(response.data.messages);// T·∫°o l·ªãch s·ª≠ t·ª´ messages\nconst history=response.data.messages.map((msg,idx)=>({id:idx,title:msg.user_message.substring(0,30)+(msg.user_message.length>30?'...':''),timestamp:new Date(msg.timestamp).toLocaleTimeString('vi-VN',{hour:'2-digit',minute:'2-digit'}),date:new Date(msg.timestamp).toLocaleDateString('vi-VN'),preview:msg.user_message}));setConversationHistory(history);}}catch(error){console.error('Failed to load history:',error);}};const sendMessage=async e=>{e.preventDefault();if(!input.trim())return;setLoading(true);const userMessage=input;setInput('');setMessages(prev=>[...prev,{user_message:userMessage,ai_response:'',timestamp:new Date().toISOString(),isLoading:true}]);try{const response=await axios.post(\"\".concat(API_URL,\"/api/chat\"),{text:userMessage,user_name:'User'});setMessages(prev=>{const updated=[...prev];updated[updated.length-1]=_objectSpread(_objectSpread({},response.data),{},{isLoading:false});return updated;});}catch(error){console.error('Error sending message:',error);setMessages(prev=>{const updated=[...prev];updated[updated.length-1]=_objectSpread(_objectSpread({},updated[updated.length-1]),{},{ai_response:'‚ùå L·ªói k·∫øt n·ªëi. Vui l√≤ng ki·ªÉm tra server.',isLoading:false});return updated;});}setLoading(false);};const clearHistory=async()=>{if(window.confirm('B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a l·ªãch s·ª≠ cu·ªôc tr√≤ chuy·ªán?')){try{await axios.delete(\"\".concat(API_URL,\"/api/history\"));setMessages([]);}catch(error){console.error('Failed to clear history:',error);}}};const uploadImage=async file=>{if(!file)return;setLoading(true);const formData=new FormData();formData.append('file',file);formData.append('query',uploadQuery);try{const response=await axios.post(\"\".concat(API_URL,\"/api/upload/image\"),formData,{headers:{'Content-Type':'multipart/form-data'}});setMessages(prev=>[...prev,{user_message:\"[Image: \".concat(file.name,\"]\").concat(uploadQuery?\" - \".concat(uploadQuery):''),ai_response:response.data.ai_response,timestamp:response.data.timestamp}]);setUploadQuery('');if(imageInputRef.current)imageInputRef.current.value='';}catch(error){console.error('Image upload failed:',error);alert('Failed to upload image');}finally{setLoading(false);}};const uploadDocument=async file=>{if(!file)return;setLoading(true);const formData=new FormData();formData.append('file',file);formData.append('query',uploadQuery);try{const response=await axios.post(\"\".concat(API_URL,\"/api/upload/document\"),formData,{headers:{'Content-Type':'multipart/form-data'}});setMessages(prev=>[...prev,{user_message:\"[Document: \".concat(file.name,\"]\").concat(uploadQuery?\" - \".concat(uploadQuery):''),ai_response:response.data.ai_response||response.data.message,timestamp:response.data.timestamp||new Date().toISOString()}]);setUploadQuery('');if(documentInputRef.current)documentInputRef.current.value='';}catch(error){console.error('Document upload failed:',error);alert('Failed to upload document');}finally{setLoading(false);}};// Copy message to clipboard\nconst copyMessage=text=>{navigator.clipboard.writeText(text);setCopiedIdx(hoveredMsgIdx);setTimeout(()=>setCopiedIdx(null),2000);};// Edit message\nconst handleEditMessage=idx=>{setEditingIdx(idx);setEditingText(messages[idx].user_message);};// Save edited message and resend\nconst handleSaveEdit=async idx=>{if(!editingText.trim())return;setLoading(true);const updatedMessage=editingText;setEditingIdx(null);setMessages(prev=>{const updated=[...prev];updated[idx]=_objectSpread(_objectSpread({},updated[idx]),{},{user_message:updatedMessage,isLoading:true});return updated;});try{const response=await axios.post(\"\".concat(API_URL,\"/api/chat\"),{text:updatedMessage,user_name:'User'});setMessages(prev=>{const updated=[...prev];updated[idx]=_objectSpread(_objectSpread({},updated[idx]),{},{user_message:updatedMessage,ai_response:response.data.ai_response,timestamp:response.data.timestamp,isLoading:false});return updated;});}catch(error){console.error('Error sending edited message:',error);setMessages(prev=>{const updated=[...prev];updated[idx]=_objectSpread(_objectSpread({},updated[idx]),{},{ai_response:'‚ùå L·ªói k·∫øt n·ªëi.',isLoading:false});return updated;});}setLoading(false);};// Regenerate AI response\nconst regenerateResponse=async idx=>{const userMessage=messages[idx].user_message;setLoading(true);setMessages(prev=>{const updated=[...prev];updated[idx]=_objectSpread(_objectSpread({},updated[idx]),{},{isLoading:true});return updated;});try{const response=await axios.post(\"\".concat(API_URL,\"/api/chat\"),{text:userMessage,user_name:'User'});setMessages(prev=>{const updated=[...prev];updated[idx]=_objectSpread(_objectSpread({},updated[idx]),{},{ai_response:response.data.ai_response,timestamp:response.data.timestamp,isLoading:false});return updated;});}catch(error){console.error('Error regenerating response:',error);}setLoading(false);};// Export chat as JSON\nconst exportChat=()=>{const chatData={exportDate:new Date().toISOString(),aiName:aiProfile.name,userName:userName,messages:messages};const dataStr=JSON.stringify(chatData,null,2);const dataBlob=new Blob([dataStr],{type:'application/json'});const url=URL.createObjectURL(dataBlob);const link=document.createElement('a');link.href=url;link.download=\"chat-\".concat(new Date().toISOString().slice(0,10),\".json\");link.click();};// Start new chat\nconst startNewChat=()=>{if(messages.length>0&&window.confirm('B·∫Øt ƒë·∫ßu cu·ªôc tr√≤ chuy·ªán m·ªõi?')){setMessages([]);setInput('');}};// Search in history\nconst filteredHistory=conversationHistory.filter(conv=>conv.title.toLowerCase().includes(searchQuery.toLowerCase())||conv.preview.toLowerCase().includes(searchQuery.toLowerCase()));return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-900 flex p-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(sidebarOpen?'w-64':'w-20',\" bg-gradient-to-b from-gray-950 to-gray-900 border-r border-gray-700 flex flex-col transition-all duration-300 overflow-hidden\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-gray-700 flex items-center justify-between\",children:[sidebarOpen&&/*#__PURE__*/_jsx(\"h2\",{className:\"text-white font-bold text-lg\",children:\"\\uD83D\\uDCCB L\\u1ECBch s\\u1EED\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(!sidebarOpen),className:\"text-gray-400 hover:text-white transition p-1 ml-auto\",children:sidebarOpen?'‚óÄ':'‚ñ∂'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:startNewChat,className:\"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white py-2.5 px-4 font-semibold transition-all shadow-lg flex items-center justify-center gap-2\",children:sidebarOpen?/*#__PURE__*/_jsx(_Fragment,{children:\"\\u2795 Cu\\u1ED9c tr\\xF2 chuy\\u1EC7n m\\u1EDBi\"}):/*#__PURE__*/_jsx(_Fragment,{children:\"\\u2795\"})})}),sidebarOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"px-3 pb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(FiSearch,{className:\"absolute left-3 top-3 text-gray-500 size-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"T\\xECm ki\\u1EBFm...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"w-full bg-gray-800 text-white text-sm py-2 pl-8 pr-3 rounded-lg border border-gray-700 focus:border-blue-500 focus:outline-none\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-3 space-y-2\",children:[filteredHistory.map(conv=>/*#__PURE__*/_jsx(\"div\",{className:\"group p-3 rounded-lg bg-gray-800 hover:bg-gray-700 transition-all cursor-pointer border border-transparent hover:border-blue-500 hover:shadow-lg\",title:conv.preview,children:sidebarOpen&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-white text-sm font-medium truncate group-hover:text-blue-400 transition\",children:[\"\\uD83D\\uDCAC \",conv.title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-xs\",children:conv.timestamp}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();if(window.confirm('X√≥a cu·ªôc tr√≤ chuy·ªán n√†y?')){clearHistory();}},className:\"text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition text-sm\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]})},conv.id)),filteredHistory.length===0&&sidebarOpen&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8 text-sm\",children:\"Kh\\xF4ng c\\xF3 cu\\u1ED9c tr\\xF2 chuy\\u1EC7n n\\xE0o\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border-t border-gray-700 space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:exportChat,className:\"w-full text-gray-400 hover:text-white hover:bg-gray-800 py-2 px-3 rounded-lg transition text-sm flex items-center justify-center gap-2\",children:sidebarOpen?/*#__PURE__*/_jsx(_Fragment,{children:\"\\uD83D\\uDCE5 Xu\\u1EA5t chat\"}):/*#__PURE__*/_jsx(_Fragment,{children:\"\\uD83D\\uDCE5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettings(!showSettings),className:\"w-full text-gray-400 hover:text-white hover:bg-gray-800 py-2 px-3 rounded-lg transition text-sm flex items-center justify-center gap-2\",children:sidebarOpen?/*#__PURE__*/_jsx(_Fragment,{children:\"\\u2699\\uFE0F C\\xE0i \\u0111\\u1EB7t\"}):/*#__PURE__*/_jsx(_Fragment,{children:\"\\u2699\\uFE0F\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col bg-gray-800 h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 border-b border-gray-700 p-5 text-white flex justify-between items-center sticky top-0 z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-3xl font-bold overflow-hidden flex-shrink-0\",children:aiProfile.avatar.startsWith('http')?/*#__PURE__*/_jsx(\"img\",{src:aiProfile.avatar,alt:\"AI\",style:{width:'100%',height:'100%',objectFit:'cover'},onError:e=>e.target.style.display='none'}):aiProfile.avatar}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:aiProfile.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:aiProfile.status})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-gray-700 rounded-lg transition\",title:\"Video call\",children:\"\\uD83D\\uDCF9\"}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 hover:bg-gray-700 rounded-lg transition\",title:\"Phone call\",children:\"\\u260E\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettings(!showSettings),className:\"p-2 hover:bg-gray-700 rounded-lg transition\",title:\"Settings\",children:\"\\u2699\\uFE0F\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-8 space-y-5 bg-gray-800\",children:[messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full text-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-9xl mb-6\",children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300 text-3xl font-bold mb-2\",children:[\"Xin ch\\xE0o \",userName,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-xl\",children:[\"H\\xE3y b\\u1EAFt \\u0111\\u1EA7u cu\\u1ED9c tr\\xF2 chuy\\u1EC7n v\\u1EDBi \",aiProfile.name]})]})}):messages.map((msg,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",onMouseEnter:()=>setHoveredMsgIdx(idx),onMouseLeave:()=>setHoveredMsgIdx(null),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 text-right mb-2 px-3 font-medium\",children:userName}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[editingIdx===idx?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-600 text-white rounded-3xl rounded-tr-none px-6 py-3 shadow-lg\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:editingText,onChange:e=>setEditingText(e.target.value),className:\"w-full bg-blue-700 text-white rounded-lg p-2 text-base focus:outline-none\",rows:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSaveEdit(idx),className:\"bg-blue-800 hover:bg-blue-900 px-3 py-1 rounded text-sm\",children:\"L\\u01B0u\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIdx(null),className:\"bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded text-sm\",children:\"H\\u1EE7y\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 text-white rounded-3xl rounded-tr-none px-6 py-3 shadow-lg break-words max-w-2xl\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-base\",children:msg.user_message})}),hoveredMsgIdx===idx&&editingIdx!==idx&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute -top-10 right-0 flex gap-2 bg-gray-700 rounded-lg p-2 shadow-lg opacity-0 group-hover:opacity-100 transition\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyMessage(msg.user_message),className:\"text-gray-300 hover:text-white transition p-1\",title:\"Copy\",children:copiedIdx===idx?'‚úì':/*#__PURE__*/_jsx(FiCopy,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditMessage(idx),className:\"text-gray-300 hover:text-white transition p-1\",title:\"Ch\\u1EC9nh s\\u1EEDa\",children:/*#__PURE__*/_jsx(FiEdit2,{size:16})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0 text-sm font-bold\",children:userName.charAt(0).toUpperCase()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0 text-white text-sm font-bold overflow-hidden\",children:aiProfile.avatar.startsWith('http')?/*#__PURE__*/_jsx(\"img\",{src:aiProfile.avatar,alt:\"AI\",style:{width:'100%',height:'100%',objectFit:'cover'},onError:e=>e.target.style.display='none'}):aiProfile.avatar}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-400 mb-2 px-3 font-medium\",children:[aiProfile.name,\" \",new Date(msg.timestamp).toLocaleTimeString('vi-VN',{hour:'2-digit',minute:'2-digit'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-700 text-gray-100 rounded-3xl rounded-tl-none px-6 py-3 shadow-lg break-words max-w-2xl\",children:msg.isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"\\u0110ang suy ngh\\u0129\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.4s'}})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-base whitespace-pre-wrap\",children:msg.ai_response})}),hoveredMsgIdx===idx&&!msg.isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute -top-10 left-0 flex gap-2 bg-gray-700 rounded-lg p-2 shadow-lg opacity-0 group-hover:opacity-100 transition\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyMessage(msg.ai_response),className:\"text-gray-300 hover:text-white transition p-1\",title:\"Copy\",children:copiedIdx===idx?'‚úì':/*#__PURE__*/_jsx(FiCopy,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>regenerateResponse(idx),className:\"text-gray-300 hover:text-white transition p-1\",title:\"T\\u1EA1o l\\u1EA1i\",children:/*#__PURE__*/_jsx(FiRefreshCw,{size:16})})]})]})]})]})]},idx)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),showSettings&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-700 border-t border-gray-600 p-4 flex gap-2 items-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userName,onChange:e=>setUserName(e.target.value||'You'),placeholder:\"T\\xEAn c\\u1EE7a b\\u1EA1n...\",className:\"flex-1 border border-gray-600 rounded-lg px-4 py-2 text-base bg-gray-600 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500\",maxLength:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 border-t border-gray-700 p-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,className:\"flex gap-3 items-center max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _imageInputRef$curren;return(_imageInputRef$curren=imageInputRef.current)===null||_imageInputRef$curren===void 0?void 0:_imageInputRef$curren.click();},disabled:loading,className:\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition text-lg\",title:\"\\uD83D\\uDCF8 T\\u1EA3i \\u1EA3nh\",children:\"\\uD83D\\uDCF8\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _documentInputRef$cur;return(_documentInputRef$cur=documentInputRef.current)===null||_documentInputRef$cur===void 0?void 0:_documentInputRef$cur.click();},disabled:loading,className:\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition text-lg\",title:\"\\uD83D\\uDCCE T\\u1EA3i file\",children:\"\\uD83D\\uDCCE\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:loading,className:\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\",title:\"\\uD83C\\uDFA4 Voice\",children:/*#__PURE__*/_jsx(FiMic,{size:20})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:loading,className:\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\",title:\"Aa Text size\",children:/*#__PURE__*/_jsx(FiType,{size:20})})]}),/*#__PURE__*/_jsx(\"input\",{ref:imageInputRef,type:\"file\",accept:\"image/*\",onChange:e=>{var _e$target$files;return uploadImage((_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0]);},style:{display:'none'}}),/*#__PURE__*/_jsx(\"input\",{ref:documentInputRef,type:\"file\",accept:\".pdf,.docx,.txt\",onChange:e=>{var _e$target$files2;return uploadDocument((_e$target$files2=e.target.files)===null||_e$target$files2===void 0?void 0:_e$target$files2[0]);},style:{display:'none'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"Nh\\u1EADp tin nh\\u1EAFn...\",className:\"flex-1 border border-gray-600 rounded-full px-6 py-3 text-base text-white bg-gray-700 placeholder-gray-500 focus:outline-none focus:border-blue-500 transition\",disabled:loading}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:loading,className:\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\",title:\"\\uD83D\\uDE0A Emoji\",children:/*#__PURE__*/_jsx(FiSmile,{size:20})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!input.trim(),className:\"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-full p-3 transition font-medium\",title:\"G\\u1EEDi\",children:/*#__PURE__*/_jsx(FiSend,{size:20})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",disabled:loading,className:\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\",title:\"\\uD83D\\uDC4D Like\",children:/*#__PURE__*/_jsx(FiThumbsUp,{size:20})})]})]})})]})]});}export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","FiSend","FiTrash2","FiSettings","FiUpload","FiChevronUp","FiFile","FiMapPin","FiPlay","FiMic","FiType","FiSmile","FiThumbsUp","FiDownload","FiSearch","FiCopy","FiEdit2","FiRefreshCw","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","Chat","messages","setMessages","input","setInput","loading","setLoading","showSettings","setShowSettings","uploadQuery","setUploadQuery","userName","setUserName","showUploadMenu","setShowUploadMenu","sidebarOpen","setSidebarOpen","conversationHistory","setConversationHistory","searchQuery","setSearchQuery","hoveredMsgIdx","setHoveredMsgIdx","copiedIdx","setCopiedIdx","editingIdx","setEditingIdx","editingText","setEditingText","aiProfile","setAiProfile","name","avatar","status","color","messagesEndRef","imageInputRef","documentInputRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","loadHistory","loadAIProfile","response","get","concat","data","error","console","history","map","msg","idx","id","title","user_message","substring","length","timestamp","Date","toLocaleTimeString","hour","minute","date","toLocaleDateString","preview","sendMessage","e","preventDefault","trim","userMessage","prev","ai_response","toISOString","isLoading","post","text","user_name","updated","_objectSpread","clearHistory","window","confirm","delete","uploadImage","file","formData","FormData","append","headers","value","alert","uploadDocument","message","copyMessage","navigator","clipboard","writeText","setTimeout","handleEditMessage","handleSaveEdit","updatedMessage","regenerateResponse","exportChat","chatData","exportDate","aiName","dataStr","JSON","stringify","dataBlob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","slice","click","startNewChat","filteredHistory","filter","conv","toLowerCase","includes","className","children","onClick","placeholder","onChange","target","stopPropagation","startsWith","src","alt","style","width","height","objectFit","onError","display","onMouseEnter","onMouseLeave","rows","size","charAt","toUpperCase","animationDelay","ref","maxLength","onSubmit","_imageInputRef$curren","disabled","_documentInputRef$cur","accept","_e$target$files","files","_e$target$files2"],"sources":["D:/IZ/AIClone/frontend/src/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { FiSend, FiTrash2, FiSettings, FiUpload, FiChevronUp, FiFile, FiMapPin, FiPlay, FiMic, FiType, FiSmile, FiThumbsUp, FiDownload, FiSearch, FiCopy, FiEdit2, FiRefreshCw } from 'react-icons/fi';\r\nimport './App.css';\r\n\r\nconst API_URL = 'http://localhost:8000';\r\n\r\nfunction Chat() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [uploadQuery, setUploadQuery] = useState('');\r\n  const [userName, setUserName] = useState('You');\r\n  const [showUploadMenu, setShowUploadMenu] = useState(false);\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [conversationHistory, setConversationHistory] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [hoveredMsgIdx, setHoveredMsgIdx] = useState(null);\r\n  const [copiedIdx, setCopiedIdx] = useState(null);\r\n  const [editingIdx, setEditingIdx] = useState(null);\r\n  const [editingText, setEditingText] = useState('');\r\n  const [aiProfile, setAiProfile] = useState({\r\n    name: 'AIClone',\r\n    avatar: 'ü§ñ',\r\n    status: 'Online',\r\n    color: '#0066FF'\r\n  });\r\n  const messagesEndRef = useRef(null);\r\n  const imageInputRef = useRef(null);\r\n  const documentInputRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    loadHistory();\r\n    loadAIProfile();\r\n  }, []);\r\n\r\n  const loadAIProfile = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/api/ai-profile`);\r\n      setAiProfile(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to load AI profile:', error);\r\n    }\r\n  };\r\n\r\n  const loadHistory = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/api/history`);\r\n      if (response.data.messages) {\r\n        setMessages(response.data.messages);\r\n        // T·∫°o l·ªãch s·ª≠ t·ª´ messages\r\n        const history = response.data.messages.map((msg, idx) => ({\r\n          id: idx,\r\n          title: msg.user_message.substring(0, 30) + (msg.user_message.length > 30 ? '...' : ''),\r\n          timestamp: new Date(msg.timestamp).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' }),\r\n          date: new Date(msg.timestamp).toLocaleDateString('vi-VN'),\r\n          preview: msg.user_message\r\n        }));\r\n        setConversationHistory(history);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load history:', error);\r\n    }\r\n  };\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    setLoading(true);\r\n    const userMessage = input;\r\n    setInput('');\r\n\r\n    setMessages(prev => [...prev, {\r\n      user_message: userMessage,\r\n      ai_response: '',\r\n      timestamp: new Date().toISOString(),\r\n      isLoading: true\r\n    }]);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/chat`, {\r\n        text: userMessage,\r\n        user_name: 'User'\r\n      });\r\n\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[updated.length - 1] = {\r\n          ...response.data,\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[updated.length - 1] = {\r\n          ...updated[updated.length - 1],\r\n          ai_response: '‚ùå L·ªói k·∫øt n·ªëi. Vui l√≤ng ki·ªÉm tra server.',\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const clearHistory = async () => {\r\n    if (window.confirm('B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a l·ªãch s·ª≠ cu·ªôc tr√≤ chuy·ªán?')) {\r\n      try {\r\n        await axios.delete(`${API_URL}/api/history`);\r\n        setMessages([]);\r\n      } catch (error) {\r\n        console.error('Failed to clear history:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const uploadImage = async (file) => {\r\n    if (!file) return;\r\n    \r\n    setLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('query', uploadQuery);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/upload/image`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      \r\n      setMessages(prev => [...prev, {\r\n        user_message: `[Image: ${file.name}]${uploadQuery ? ` - ${uploadQuery}` : ''}`,\r\n        ai_response: response.data.ai_response,\r\n        timestamp: response.data.timestamp\r\n      }]);\r\n      \r\n      setUploadQuery('');\r\n      if (imageInputRef.current) imageInputRef.current.value = '';\r\n    } catch (error) {\r\n      console.error('Image upload failed:', error);\r\n      alert('Failed to upload image');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const uploadDocument = async (file) => {\r\n    if (!file) return;\r\n    \r\n    setLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('query', uploadQuery);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/upload/document`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      \r\n      setMessages(prev => [...prev, {\r\n        user_message: `[Document: ${file.name}]${uploadQuery ? ` - ${uploadQuery}` : ''}`,\r\n        ai_response: response.data.ai_response || response.data.message,\r\n        timestamp: response.data.timestamp || new Date().toISOString()\r\n      }]);\r\n      \r\n      setUploadQuery('');\r\n      if (documentInputRef.current) documentInputRef.current.value = '';\r\n    } catch (error) {\r\n      console.error('Document upload failed:', error);\r\n      alert('Failed to upload document');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Copy message to clipboard\r\n  const copyMessage = (text) => {\r\n    navigator.clipboard.writeText(text);\r\n    setCopiedIdx(hoveredMsgIdx);\r\n    setTimeout(() => setCopiedIdx(null), 2000);\r\n  };\r\n\r\n  // Edit message\r\n  const handleEditMessage = (idx) => {\r\n    setEditingIdx(idx);\r\n    setEditingText(messages[idx].user_message);\r\n  };\r\n\r\n  // Save edited message and resend\r\n  const handleSaveEdit = async (idx) => {\r\n    if (!editingText.trim()) return;\r\n    \r\n    setLoading(true);\r\n    const updatedMessage = editingText;\r\n    setEditingIdx(null);\r\n\r\n    setMessages(prev => {\r\n      const updated = [...prev];\r\n      updated[idx] = {\r\n        ...updated[idx],\r\n        user_message: updatedMessage,\r\n        isLoading: true\r\n      };\r\n      return updated;\r\n    });\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/chat`, {\r\n        text: updatedMessage,\r\n        user_name: 'User'\r\n      });\r\n\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[idx] = {\r\n          ...updated[idx],\r\n          user_message: updatedMessage,\r\n          ai_response: response.data.ai_response,\r\n          timestamp: response.data.timestamp,\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error sending edited message:', error);\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[idx] = {\r\n          ...updated[idx],\r\n          ai_response: '‚ùå L·ªói k·∫øt n·ªëi.',\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  // Regenerate AI response\r\n  const regenerateResponse = async (idx) => {\r\n    const userMessage = messages[idx].user_message;\r\n    \r\n    setLoading(true);\r\n    setMessages(prev => {\r\n      const updated = [...prev];\r\n      updated[idx] = { ...updated[idx], isLoading: true };\r\n      return updated;\r\n    });\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/chat`, {\r\n        text: userMessage,\r\n        user_name: 'User'\r\n      });\r\n\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[idx] = {\r\n          ...updated[idx],\r\n          ai_response: response.data.ai_response,\r\n          timestamp: response.data.timestamp,\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error regenerating response:', error);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  // Export chat as JSON\r\n  const exportChat = () => {\r\n    const chatData = {\r\n      exportDate: new Date().toISOString(),\r\n      aiName: aiProfile.name,\r\n      userName: userName,\r\n      messages: messages\r\n    };\r\n    \r\n    const dataStr = JSON.stringify(chatData, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `chat-${new Date().toISOString().slice(0, 10)}.json`;\r\n    link.click();\r\n  };\r\n\r\n  // Start new chat\r\n  const startNewChat = () => {\r\n    if (messages.length > 0 && window.confirm('B·∫Øt ƒë·∫ßu cu·ªôc tr√≤ chuy·ªán m·ªõi?')) {\r\n      setMessages([]);\r\n      setInput('');\r\n    }\r\n  };\r\n\r\n  // Search in history\r\n  const filteredHistory = conversationHistory.filter(conv =>\r\n    conv.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    conv.preview.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-900 flex p-0\">\r\n      {/* SIDEBAR */}\r\n      <div className={`${sidebarOpen ? 'w-64' : 'w-20'} bg-gradient-to-b from-gray-950 to-gray-900 border-r border-gray-700 flex flex-col transition-all duration-300 overflow-hidden`}>\r\n        \r\n        {/* Sidebar Header */}\r\n        <div className=\"p-4 border-b border-gray-700 flex items-center justify-between\">\r\n          {sidebarOpen && <h2 className=\"text-white font-bold text-lg\">üìã L·ªãch s·ª≠</h2>}\r\n          <button \r\n            onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            className=\"text-gray-400 hover:text-white transition p-1 ml-auto\"\r\n          >\r\n            {sidebarOpen ? '‚óÄ' : '‚ñ∂'}\r\n          </button>\r\n        </div>\r\n\r\n        {/* New Conversation Button */}\r\n        <div className=\"p-3\">\r\n          <button \r\n            onClick={startNewChat}\r\n            className=\"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white py-2.5 px-4 font-semibold transition-all shadow-lg flex items-center justify-center gap-2\"\r\n          >\r\n            {sidebarOpen ? <>‚ûï Cu·ªôc tr√≤ chuy·ªán m·ªõi</> : <>‚ûï</>}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Search Bar */}\r\n        {sidebarOpen && (\r\n          <div className=\"px-3 pb-3\">\r\n            <div className=\"relative\">\r\n              <FiSearch className=\"absolute left-3 top-3 text-gray-500 size-4\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"T√¨m ki·∫øm...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"w-full bg-gray-800 text-white text-sm py-2 pl-8 pr-3 rounded-lg border border-gray-700 focus:border-blue-500 focus:outline-none\"\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Conversations List */}\r\n        <div className=\"flex-1 overflow-y-auto p-3 space-y-2\">\r\n          {filteredHistory.map((conv) => (\r\n            <div \r\n              key={conv.id}\r\n              className=\"group p-3 rounded-lg bg-gray-800 hover:bg-gray-700 transition-all cursor-pointer border border-transparent hover:border-blue-500 hover:shadow-lg\"\r\n              title={conv.preview}\r\n            >\r\n              {sidebarOpen && (\r\n                <>\r\n                  <p className=\"text-white text-sm font-medium truncate group-hover:text-blue-400 transition\">üí¨ {conv.title}</p>\r\n                  <div className=\"flex justify-between items-center mt-1\">\r\n                    <p className=\"text-gray-500 text-xs\">{conv.timestamp}</p>\r\n                    <button \r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        if (window.confirm('X√≥a cu·ªôc tr√≤ chuy·ªán n√†y?')) {\r\n                          clearHistory();\r\n                        }\r\n                      }}\r\n                      className=\"text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition text-sm\"\r\n                    >\r\n                      üóëÔ∏è\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          ))}\r\n          {filteredHistory.length === 0 && sidebarOpen && (\r\n            <p className=\"text-gray-500 text-center py-8 text-sm\">Kh√¥ng c√≥ cu·ªôc tr√≤ chuy·ªán n√†o</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Sidebar Footer */}\r\n        <div className=\"p-3 border-t border-gray-700 space-y-2\">\r\n          <button \r\n            onClick={exportChat}\r\n            className=\"w-full text-gray-400 hover:text-white hover:bg-gray-800 py-2 px-3 rounded-lg transition text-sm flex items-center justify-center gap-2\"\r\n          >\r\n            {sidebarOpen ? <>üì• Xu·∫•t chat</> : <>üì•</>}\r\n          </button>\r\n          <button \r\n            onClick={() => setShowSettings(!showSettings)}\r\n            className=\"w-full text-gray-400 hover:text-white hover:bg-gray-800 py-2 px-3 rounded-lg transition text-sm flex items-center justify-center gap-2\"\r\n          >\r\n            {sidebarOpen ? <>‚öôÔ∏è C√†i ƒë·∫∑t</> : <>‚öôÔ∏è</>}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* MAIN CHAT AREA */}\r\n      <div className=\"flex-1 flex flex-col bg-gray-800 h-screen\">\r\n        \r\n        {/* HEADER - FULL WIDTH */}\r\n        <div className=\"bg-gray-900 border-b border-gray-700 p-5 text-white flex justify-between items-center sticky top-0 z-10\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-3xl font-bold overflow-hidden flex-shrink-0\">\r\n              {aiProfile.avatar.startsWith('http') ? (\r\n                <img src={aiProfile.avatar} alt=\"AI\" style={{width: '100%', height: '100%', objectFit: 'cover'}} onError={(e) => e.target.style.display = 'none'} />\r\n              ) : (\r\n                aiProfile.avatar\r\n              )}\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\">{aiProfile.name}</h1>\r\n              <p className=\"text-sm text-gray-400\">{aiProfile.status}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-3\">\r\n            <button className=\"p-2 hover:bg-gray-700 rounded-lg transition\" title=\"Video call\">\r\n              üìπ\r\n            </button>\r\n            <button className=\"p-2 hover:bg-gray-700 rounded-lg transition\" title=\"Phone call\">\r\n              ‚òéÔ∏è\r\n            </button>\r\n            <button \r\n              onClick={() => setShowSettings(!showSettings)}\r\n              className=\"p-2 hover:bg-gray-700 rounded-lg transition\" \r\n              title=\"Settings\"\r\n            >\r\n              ‚öôÔ∏è\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* MESSAGES CONTAINER - FULL WIDTH, FLEX-GROW */}\r\n        <div className=\"flex-1 overflow-y-auto p-8 space-y-5 bg-gray-800\">\r\n          {messages.length === 0 ? (\r\n            <div className=\"flex items-center justify-center h-full text-center\">\r\n              <div>\r\n                <p className=\"text-9xl mb-6\">üí¨</p>\r\n                <p className=\"text-gray-300 text-3xl font-bold mb-2\">Xin ch√†o {userName}!</p>\r\n                <p className=\"text-gray-500 text-xl\">H√£y b·∫Øt ƒë·∫ßu cu·ªôc tr√≤ chuy·ªán v·ªõi {aiProfile.name}</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            messages.map((msg, idx) => (\r\n              <div \r\n                key={idx} \r\n                className=\"space-y-4\"\r\n                onMouseEnter={() => setHoveredMsgIdx(idx)}\r\n                onMouseLeave={() => setHoveredMsgIdx(null)}\r\n              >\r\n                {/* User Message */}\r\n                <div className=\"flex justify-end gap-3\">\r\n                  <div className=\"max-w-2xl group\">\r\n                    <div className=\"text-xs text-gray-400 text-right mb-2 px-3 font-medium\">{userName}</div>\r\n                    <div className=\"relative\">\r\n                      {editingIdx === idx ? (\r\n                        <div className=\"bg-blue-600 text-white rounded-3xl rounded-tr-none px-6 py-3 shadow-lg\">\r\n                          <textarea\r\n                            value={editingText}\r\n                            onChange={(e) => setEditingText(e.target.value)}\r\n                            className=\"w-full bg-blue-700 text-white rounded-lg p-2 text-base focus:outline-none\"\r\n                            rows=\"3\"\r\n                          />\r\n                          <div className=\"flex gap-2 mt-2\">\r\n                            <button\r\n                              onClick={() => handleSaveEdit(idx)}\r\n                              className=\"bg-blue-800 hover:bg-blue-900 px-3 py-1 rounded text-sm\"\r\n                            >\r\n                              L∆∞u\r\n                            </button>\r\n                            <button\r\n                              onClick={() => setEditingIdx(null)}\r\n                              className=\"bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded text-sm\"\r\n                            >\r\n                              H·ªßy\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"bg-blue-600 text-white rounded-3xl rounded-tr-none px-6 py-3 shadow-lg break-words max-w-2xl\">\r\n                          <p className=\"text-base\">{msg.user_message}</p>\r\n                        </div>\r\n                      )}\r\n                      {hoveredMsgIdx === idx && editingIdx !== idx && (\r\n                        <div className=\"absolute -top-10 right-0 flex gap-2 bg-gray-700 rounded-lg p-2 shadow-lg opacity-0 group-hover:opacity-100 transition\">\r\n                          <button\r\n                            onClick={() => copyMessage(msg.user_message)}\r\n                            className=\"text-gray-300 hover:text-white transition p-1\"\r\n                            title=\"Copy\"\r\n                          >\r\n                            {copiedIdx === idx ? '‚úì' : <FiCopy size={16} />}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleEditMessage(idx)}\r\n                            className=\"text-gray-300 hover:text-white transition p-1\"\r\n                            title=\"Ch·ªânh s·ª≠a\"\r\n                          >\r\n                            <FiEdit2 size={16} />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0 text-sm font-bold\">\r\n                    {userName.charAt(0).toUpperCase()}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* AI Response */}\r\n                <div className=\"flex justify-start gap-3\">\r\n                  <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0 text-white text-sm font-bold overflow-hidden\">\r\n                    {aiProfile.avatar.startsWith('http') ? (\r\n                      <img src={aiProfile.avatar} alt=\"AI\" style={{width: '100%', height: '100%', objectFit: 'cover'}} onError={(e) => e.target.style.display = 'none'} />\r\n                    ) : (\r\n                      aiProfile.avatar\r\n                    )}\r\n                  </div>\r\n                  <div className=\"max-w-2xl group\">\r\n                    <div className=\"text-xs text-gray-400 mb-2 px-3 font-medium\">{aiProfile.name} {new Date(msg.timestamp).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })}</div>\r\n                    <div className=\"relative\">\r\n                      <div className=\"bg-gray-700 text-gray-100 rounded-3xl rounded-tl-none px-6 py-3 shadow-lg break-words max-w-2xl\">\r\n                        {msg.isLoading ? (\r\n                          <div className=\"flex gap-2 items-center\">\r\n                            <span className=\"text-sm\">ƒêang suy nghƒ©</span>\r\n                            <div className=\"flex gap-1\">\r\n                              <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" />\r\n                              <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }} />\r\n                              <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.4s' }} />\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <p className=\"text-base whitespace-pre-wrap\">{msg.ai_response}</p>\r\n                        )}\r\n                      </div>\r\n                      {hoveredMsgIdx === idx && !msg.isLoading && (\r\n                        <div className=\"absolute -top-10 left-0 flex gap-2 bg-gray-700 rounded-lg p-2 shadow-lg opacity-0 group-hover:opacity-100 transition\">\r\n                          <button\r\n                            onClick={() => copyMessage(msg.ai_response)}\r\n                            className=\"text-gray-300 hover:text-white transition p-1\"\r\n                            title=\"Copy\"\r\n                          >\r\n                            {copiedIdx === idx ? '‚úì' : <FiCopy size={16} />}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => regenerateResponse(idx)}\r\n                            className=\"text-gray-300 hover:text-white transition p-1\"\r\n                            title=\"T·∫°o l·∫°i\"\r\n                          >\r\n                            <FiRefreshCw size={16} />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Settings Panel */}\r\n        {showSettings && (\r\n          <div className=\"bg-gray-700 border-t border-gray-600 p-4 flex gap-2 items-center\">\r\n            <input\r\n              type=\"text\"\r\n              value={userName}\r\n              onChange={(e) => setUserName(e.target.value || 'You')}\r\n              placeholder=\"T√™n c·ªßa b·∫°n...\"\r\n              className=\"flex-1 border border-gray-600 rounded-lg px-4 py-2 text-base bg-gray-600 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500\"\r\n              maxLength={20}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* INPUT FORM - BOTTOM */}\r\n        <div className=\"bg-gray-800 border-t border-gray-700 p-5\">\r\n          <form onSubmit={sendMessage} className=\"flex gap-3 items-center max-w-6xl mx-auto\">\r\n            {/* Bottom Action Buttons */}\r\n            <div className=\"flex gap-1\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => imageInputRef.current?.click()}\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition text-lg\"\r\n                title=\"üì∏ T·∫£i ·∫£nh\"\r\n              >\r\n                üì∏\r\n              </button>\r\n              \r\n              <button\r\n                type=\"button\"\r\n                onClick={() => documentInputRef.current?.click()}\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition text-lg\"\r\n                title=\"üìé T·∫£i file\"\r\n              >\r\n                üìé\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\"\r\n                title=\"üé§ Voice\"\r\n              >\r\n                <FiMic size={20} />\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\"\r\n                title=\"Aa Text size\"\r\n              >\r\n                <FiType size={20} />\r\n              </button>\r\n            </div>\r\n\r\n            <input\r\n              ref={imageInputRef}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={(e) => uploadImage(e.target.files?.[0])}\r\n              style={{ display: 'none' }}\r\n            />\r\n            \r\n            <input\r\n              ref={documentInputRef}\r\n              type=\"file\"\r\n              accept=\".pdf,.docx,.txt\"\r\n              onChange={(e) => uploadDocument(e.target.files?.[0])}\r\n              style={{ display: 'none' }}\r\n            />\r\n\r\n            {/* Message Input */}\r\n            <input\r\n              type=\"text\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              placeholder=\"Nh·∫≠p tin nh·∫Øn...\"\r\n              className=\"flex-1 border border-gray-600 rounded-full px-6 py-3 text-base text-white bg-gray-700 placeholder-gray-500 focus:outline-none focus:border-blue-500 transition\"\r\n              disabled={loading}\r\n            />\r\n            \r\n            {/* Right Actions */}\r\n            <div className=\"flex gap-1\">\r\n              <button\r\n                type=\"button\"\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\"\r\n                title=\"üòä Emoji\"\r\n              >\r\n                <FiSmile size={20} />\r\n              </button>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading || !input.trim()}\r\n                className=\"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-full p-3 transition font-medium\"\r\n                title=\"G·ª≠i\"\r\n              >\r\n                <FiSend size={20} />\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\"\r\n                title=\"üëç Like\"\r\n              >\r\n                <FiThumbsUp size={20} />\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}