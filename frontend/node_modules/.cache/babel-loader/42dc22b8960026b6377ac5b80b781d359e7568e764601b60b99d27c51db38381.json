{"ast":null,"code":"var _jsxFileName = \"D:\\\\IZ\\\\AIClone\\\\frontend\\\\src\\\\Chat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { FiSend, FiTrash2, FiSettings, FiUpload, FiChevronUp, FiFile, FiMapPin, FiPlay, FiMic, FiType, FiSmile, FiThumbsUp, FiDownload, FiSearch, FiCopy, FiEdit2, FiRefreshCw } from 'react-icons/fi';\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:8000';\nfunction Chat() {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const [uploadQuery, setUploadQuery] = useState('');\n  const [userName, setUserName] = useState('You');\n  const [showUploadMenu, setShowUploadMenu] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [conversationHistory, setConversationHistory] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [hoveredMsgIdx, setHoveredMsgIdx] = useState(null);\n  const [copiedIdx, setCopiedIdx] = useState(null);\n  const [editingIdx, setEditingIdx] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  const [aiProfile, setAiProfile] = useState({\n    name: 'AIClone',\n    avatar: 'ðŸ¤–',\n    status: 'Online',\n    color: '#0066FF'\n  });\n  const messagesEndRef = useRef(null);\n  const imageInputRef = useRef(null);\n  const documentInputRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  useEffect(() => {\n    loadHistory();\n    loadAIProfile();\n  }, []);\n  const loadAIProfile = async () => {\n    try {\n      const response = await axios.get(`${API_URL}/api/ai-profile`);\n      setAiProfile(response.data);\n    } catch (error) {\n      console.error('Failed to load AI profile:', error);\n    }\n  };\n  const loadHistory = async () => {\n    try {\n      const response = await axios.get(`${API_URL}/api/history`);\n      if (response.data.messages) {\n        setMessages(response.data.messages);\n        // Táº¡o lá»‹ch sá»­ tá»« messages\n        const history = response.data.messages.map((msg, idx) => ({\n          id: idx,\n          title: msg.user_message.substring(0, 30) + (msg.user_message.length > 30 ? '...' : ''),\n          timestamp: new Date(msg.timestamp).toLocaleTimeString('vi-VN', {\n            hour: '2-digit',\n            minute: '2-digit'\n          }),\n          date: new Date(msg.timestamp).toLocaleDateString('vi-VN'),\n          preview: msg.user_message\n        }));\n        setConversationHistory(history);\n      }\n    } catch (error) {\n      console.error('Failed to load history:', error);\n    }\n  };\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    setLoading(true);\n    const userMessage = input;\n    setInput('');\n    setMessages(prev => [...prev, {\n      user_message: userMessage,\n      ai_response: '',\n      timestamp: new Date().toISOString(),\n      isLoading: true\n    }]);\n    try {\n      const response = await axios.post(`${API_URL}/api/chat`, {\n        text: userMessage,\n        user_name: 'User'\n      });\n      setMessages(prev => {\n        const updated = [...prev];\n        updated[updated.length - 1] = {\n          ...response.data,\n          isLoading: false\n        };\n        return updated;\n      });\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages(prev => {\n        const updated = [...prev];\n        updated[updated.length - 1] = {\n          ...updated[updated.length - 1],\n          ai_response: 'âŒ Lá»—i káº¿t ná»‘i. Vui lÃ²ng kiá»ƒm tra server.',\n          isLoading: false\n        };\n        return updated;\n      });\n    }\n    setLoading(false);\n  };\n  const clearHistory = async () => {\n    if (window.confirm('Báº¡n cháº¯c cháº¯n muá»‘n xÃ³a lá»‹ch sá»­ cuá»™c trÃ² chuyá»‡n?')) {\n      try {\n        await axios.delete(`${API_URL}/api/history`);\n        setMessages([]);\n      } catch (error) {\n        console.error('Failed to clear history:', error);\n      }\n    }\n  };\n  const uploadImage = async file => {\n    if (!file) return;\n    setLoading(true);\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('query', uploadQuery);\n    try {\n      const response = await axios.post(`${API_URL}/api/upload/image`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setMessages(prev => [...prev, {\n        user_message: `[Image: ${file.name}]${uploadQuery ? ` - ${uploadQuery}` : ''}`,\n        ai_response: response.data.ai_response,\n        timestamp: response.data.timestamp\n      }]);\n      setUploadQuery('');\n      if (imageInputRef.current) imageInputRef.current.value = '';\n    } catch (error) {\n      console.error('Image upload failed:', error);\n      alert('Failed to upload image');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const uploadDocument = async file => {\n    if (!file) return;\n    setLoading(true);\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('query', uploadQuery);\n    try {\n      const response = await axios.post(`${API_URL}/api/upload/document`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setMessages(prev => [...prev, {\n        user_message: `[Document: ${file.name}]${uploadQuery ? ` - ${uploadQuery}` : ''}`,\n        ai_response: response.data.ai_response || response.data.message,\n        timestamp: response.data.timestamp || new Date().toISOString()\n      }]);\n      setUploadQuery('');\n      if (documentInputRef.current) documentInputRef.current.value = '';\n    } catch (error) {\n      console.error('Document upload failed:', error);\n      alert('Failed to upload document');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Copy message to clipboard\n  const copyMessage = text => {\n    navigator.clipboard.writeText(text);\n    setCopiedIdx(hoveredMsgIdx);\n    setTimeout(() => setCopiedIdx(null), 2000);\n  };\n\n  // Edit message\n  const handleEditMessage = idx => {\n    setEditingIdx(idx);\n    setEditingText(messages[idx].user_message);\n  };\n\n  // Save edited message and resend\n  const handleSaveEdit = async idx => {\n    if (!editingText.trim()) return;\n    setLoading(true);\n    const updatedMessage = editingText;\n    setEditingIdx(null);\n    setMessages(prev => {\n      const updated = [...prev];\n      updated[idx] = {\n        ...updated[idx],\n        user_message: updatedMessage,\n        isLoading: true\n      };\n      return updated;\n    });\n    try {\n      const response = await axios.post(`${API_URL}/api/chat`, {\n        text: updatedMessage,\n        user_name: 'User'\n      });\n      setMessages(prev => {\n        const updated = [...prev];\n        updated[idx] = {\n          ...updated[idx],\n          user_message: updatedMessage,\n          ai_response: response.data.ai_response,\n          timestamp: response.data.timestamp,\n          isLoading: false\n        };\n        return updated;\n      });\n    } catch (error) {\n      console.error('Error sending edited message:', error);\n      setMessages(prev => {\n        const updated = [...prev];\n        updated[idx] = {\n          ...updated[idx],\n          ai_response: 'âŒ Lá»—i káº¿t ná»‘i.',\n          isLoading: false\n        };\n        return updated;\n      });\n    }\n    setLoading(false);\n  };\n\n  // Regenerate AI response\n  const regenerateResponse = async idx => {\n    const userMessage = messages[idx].user_message;\n    setLoading(true);\n    setMessages(prev => {\n      const updated = [...prev];\n      updated[idx] = {\n        ...updated[idx],\n        isLoading: true\n      };\n      return updated;\n    });\n    try {\n      const response = await axios.post(`${API_URL}/api/chat`, {\n        text: userMessage,\n        user_name: 'User'\n      });\n      setMessages(prev => {\n        const updated = [...prev];\n        updated[idx] = {\n          ...updated[idx],\n          ai_response: response.data.ai_response,\n          timestamp: response.data.timestamp,\n          isLoading: false\n        };\n        return updated;\n      });\n    } catch (error) {\n      console.error('Error regenerating response:', error);\n    }\n    setLoading(false);\n  };\n\n  // Export chat as JSON\n  const exportChat = () => {\n    const chatData = {\n      exportDate: new Date().toISOString(),\n      aiName: aiProfile.name,\n      userName: userName,\n      messages: messages\n    };\n    const dataStr = JSON.stringify(chatData, null, 2);\n    const dataBlob = new Blob([dataStr], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `chat-${new Date().toISOString().slice(0, 10)}.json`;\n    link.click();\n  };\n\n  // Start new chat\n  const startNewChat = () => {\n    if (messages.length > 0 && window.confirm('Báº¯t Ä‘áº§u cuá»™c trÃ² chuyá»‡n má»›i?')) {\n      setMessages([]);\n      setInput('');\n    }\n  };\n\n  // Search in history\n  const filteredHistory = conversationHistory.filter(conv => conv.title.toLowerCase().includes(searchQuery.toLowerCase()) || conv.preview.toLowerCase().includes(searchQuery.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 flex p-0\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${sidebarOpen ? 'w-64' : 'w-20'} bg-gradient-to-b from-gray-950 to-gray-900 border-r border-gray-700 flex flex-col transition-all duration-300 overflow-hidden`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-gray-700 flex items-center justify-between\",\n        children: [sidebarOpen && /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-white font-bold text-lg\",\n          children: \"\\uD83D\\uDCCB L\\u1ECBch s\\u1EED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSidebarOpen(!sidebarOpen),\n          className: \"text-gray-400 hover:text-white transition p-1 ml-auto\",\n          children: sidebarOpen ? 'â—€' : 'â–¶'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startNewChat,\n          className: \"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white py-2.5 px-4 font-semibold transition-all shadow-lg flex items-center justify-center gap-2\",\n          children: sidebarOpen ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"\\u2795 Cu\\u1ED9c tr\\xF2 chuy\\u1EC7n m\\u1EDBi\"\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"\\u2795\"\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), sidebarOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-3 pb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(FiSearch, {\n            className: \"absolute left-3 top-3 text-gray-500 size-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"T\\xECm ki\\u1EBFm...\",\n            value: searchQuery,\n            onChange: e => setSearchQuery(e.target.value),\n            className: \"w-full bg-gray-800 text-white text-sm py-2 pl-8 pr-3 rounded-lg border border-gray-700 focus:border-blue-500 focus:outline-none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto p-3 space-y-2\",\n        children: [filteredHistory.map(conv => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"group p-3 rounded-lg bg-gray-800 hover:bg-gray-700 transition-all cursor-pointer border border-transparent hover:border-blue-500 hover:shadow-lg\",\n          title: conv.preview,\n          children: sidebarOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white text-sm font-medium truncate group-hover:text-blue-400 transition\",\n              children: [\"\\uD83D\\uDCAC \", conv.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-500 text-xs\",\n                children: conv.timestamp\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  if (window.confirm('XÃ³a cuá»™c trÃ² chuyá»‡n nÃ y?')) {\n                    clearHistory();\n                  }\n                },\n                className: \"text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition text-sm\",\n                children: \"\\uD83D\\uDDD1\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, conv.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)), filteredHistory.length === 0 && sidebarOpen && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 text-center py-8 text-sm\",\n          children: \"Kh\\xF4ng c\\xF3 cu\\u1ED9c tr\\xF2 chuy\\u1EC7n n\\xE0o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 border-t border-gray-700 space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportChat,\n          className: \"w-full text-gray-400 hover:text-white hover:bg-gray-800 py-2 px-3 rounded-lg transition text-sm flex items-center justify-center gap-2\",\n          children: sidebarOpen ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"\\uD83D\\uDCE5 Xu\\u1EA5t chat\"\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"\\uD83D\\uDCE5\"\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowSettings(!showSettings),\n          className: \"w-full text-gray-400 hover:text-white hover:bg-gray-800 py-2 px-3 rounded-lg transition text-sm flex items-center justify-center gap-2\",\n          children: sidebarOpen ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"\\u2699\\uFE0F C\\xE0i \\u0111\\u1EB7t\"\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"\\u2699\\uFE0F\"\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col bg-gray-800 h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-900 border-b border-gray-700 p-5 text-white flex justify-between items-center sticky top-0 z-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-3xl font-bold overflow-hidden flex-shrink-0\",\n            children: aiProfile.avatar.startsWith('http') ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: aiProfile.avatar,\n              alt: \"AI\",\n              style: {\n                width: '100%',\n                height: '100%',\n                objectFit: 'cover'\n              },\n              onError: e => e.target.style.display = 'none'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this) : aiProfile.avatar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold\",\n              children: aiProfile.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-400\",\n              children: aiProfile.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"p-2 hover:bg-gray-700 rounded-lg transition\",\n            title: \"Video call\",\n            children: \"\\uD83D\\uDCF9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"p-2 hover:bg-gray-700 rounded-lg transition\",\n            title: \"Phone call\",\n            children: \"\\u260E\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowSettings(!showSettings),\n            className: \"p-2 hover:bg-gray-700 rounded-lg transition\",\n            title: \"Settings\",\n            children: \"\\u2699\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto p-8 space-y-5 bg-gray-800\",\n        children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center h-full text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-9xl mb-6\",\n              children: \"\\uD83D\\uDCAC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-300 text-3xl font-bold mb-2\",\n              children: [\"Xin ch\\xE0o \", userName, \"!\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500 text-xl\",\n              children: [\"H\\xE3y b\\u1EAFt \\u0111\\u1EA7u cu\\u1ED9c tr\\xF2 chuy\\u1EC7n v\\u1EDBi \", aiProfile.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this) : messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          onMouseEnter: () => setHoveredMsgIdx(idx),\n          onMouseLeave: () => setHoveredMsgIdx(null),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-w-2xl group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-400 text-right mb-2 px-3 font-medium\",\n                children: userName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [editingIdx === idx ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-600 text-white rounded-3xl rounded-tr-none px-6 py-3 shadow-lg\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: editingText,\n                    onChange: e => setEditingText(e.target.value),\n                    className: \"w-full bg-blue-700 text-white rounded-lg p-2 text-base focus:outline-none\",\n                    rows: \"3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 472,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex gap-2 mt-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleSaveEdit(idx),\n                      className: \"bg-blue-800 hover:bg-blue-900 px-3 py-1 rounded text-sm\",\n                      children: \"L\\u01B0u\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 479,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setEditingIdx(null),\n                      className: \"bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded text-sm\",\n                      children: \"H\\u1EE7y\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 485,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-600 text-white rounded-3xl rounded-tr-none px-6 py-3 shadow-lg break-words max-w-2xl\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-base\",\n                    children: msg.user_message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 495,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 25\n                }, this), hoveredMsgIdx === idx && editingIdx !== idx && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -top-10 right-0 flex gap-2 bg-gray-700 rounded-lg p-2 shadow-lg opacity-0 group-hover:opacity-100 transition\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => copyMessage(msg.user_message),\n                    className: \"text-gray-300 hover:text-white transition p-1\",\n                    title: \"Copy\",\n                    children: copiedIdx === idx ? 'âœ“' : /*#__PURE__*/_jsxDEV(FiCopy, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 505,\n                      columnNumber: 56\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleEditMessage(idx),\n                    className: \"text-gray-300 hover:text-white transition p-1\",\n                    title: \"Ch\\u1EC9nh s\\u1EEDa\",\n                    children: /*#__PURE__*/_jsxDEV(FiEdit2, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 512,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0 text-sm font-bold\",\n              children: userName.charAt(0).toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-start gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0 text-white text-sm font-bold overflow-hidden\",\n              children: aiProfile.avatar.startsWith('http') ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: aiProfile.avatar,\n                alt: \"AI\",\n                style: {\n                  width: '100%',\n                  height: '100%',\n                  objectFit: 'cover'\n                },\n                onError: e => e.target.style.display = 'none'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 23\n              }, this) : aiProfile.avatar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-w-2xl group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-400 mb-2 px-3 font-medium\",\n                children: [aiProfile.name, \" \", new Date(msg.timestamp).toLocaleTimeString('vi-VN', {\n                  hour: '2-digit',\n                  minute: '2-digit'\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-gray-700 text-gray-100 rounded-3xl rounded-tl-none px-6 py-3 shadow-lg break-words max-w-2xl\",\n                  children: msg.isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex gap-2 items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: \"\\u0110ang suy ngh\\u0129\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 538,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex gap-1\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 540,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                        style: {\n                          animationDelay: '0.2s'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 541,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n                        style: {\n                          animationDelay: '0.4s'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 542,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 539,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 537,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-base whitespace-pre-wrap\",\n                    children: msg.ai_response\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 546,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 23\n                }, this), hoveredMsgIdx === idx && !msg.isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -top-10 left-0 flex gap-2 bg-gray-700 rounded-lg p-2 shadow-lg opacity-0 group-hover:opacity-100 transition\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => copyMessage(msg.ai_response),\n                    className: \"text-gray-300 hover:text-white transition p-1\",\n                    title: \"Copy\",\n                    children: copiedIdx === idx ? 'âœ“' : /*#__PURE__*/_jsxDEV(FiCopy, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 556,\n                      columnNumber: 56\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => regenerateResponse(idx),\n                    className: \"text-gray-300 hover:text-white transition p-1\",\n                    title: \"T\\u1EA1o l\\u1EA1i\",\n                    children: /*#__PURE__*/_jsxDEV(FiRefreshCw, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 563,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 558,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 550,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 17\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this), showSettings && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-700 border-t border-gray-600 p-4 flex gap-2 items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: userName,\n          onChange: e => setUserName(e.target.value || 'You'),\n          placeholder: \"T\\xEAn c\\u1EE7a b\\u1EA1n...\",\n          className: \"flex-1 border border-gray-600 rounded-lg px-4 py-2 text-base bg-gray-600 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500\",\n          maxLength: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 border-t border-gray-700 p-5\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: sendMessage,\n          className: \"flex gap-3 items-center max-w-6xl mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                var _imageInputRef$curren;\n                return (_imageInputRef$curren = imageInputRef.current) === null || _imageInputRef$curren === void 0 ? void 0 : _imageInputRef$curren.click();\n              },\n              disabled: loading,\n              className: \"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition text-lg\",\n              title: \"\\uD83D\\uDCF8 T\\u1EA3i \\u1EA3nh\",\n              children: \"\\uD83D\\uDCF8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => {\n                var _documentInputRef$cur;\n                return (_documentInputRef$cur = documentInputRef.current) === null || _documentInputRef$cur === void 0 ? void 0 : _documentInputRef$cur.click();\n              },\n              disabled: loading,\n              className: \"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition text-lg\",\n              title: \"\\uD83D\\uDCCE T\\u1EA3i file\",\n              children: \"\\uD83D\\uDCCE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              disabled: loading,\n              className: \"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\",\n              title: \"\\uD83C\\uDFA4 Voice\",\n              children: /*#__PURE__*/_jsxDEV(FiMic, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              disabled: loading,\n              className: \"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\",\n              title: \"Aa Text size\",\n              children: /*#__PURE__*/_jsxDEV(FiType, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: imageInputRef,\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => {\n              var _e$target$files;\n              return uploadImage((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0]);\n            },\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: documentInputRef,\n            type: \"file\",\n            accept: \".pdf,.docx,.txt\",\n            onChange: e => {\n              var _e$target$files2;\n              return uploadDocument((_e$target$files2 = e.target.files) === null || _e$target$files2 === void 0 ? void 0 : _e$target$files2[0]);\n            },\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: input,\n            onChange: e => setInput(e.target.value),\n            placeholder: \"Nh\\u1EADp tin nh\\u1EAFn...\",\n            className: \"flex-1 border border-gray-600 rounded-full px-6 py-3 text-base text-white bg-gray-700 placeholder-gray-500 focus:outline-none focus:border-blue-500 transition\",\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              disabled: loading,\n              className: \"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\",\n              title: \"\\uD83D\\uDE0A Emoji\",\n              children: /*#__PURE__*/_jsxDEV(FiSmile, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 668,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading || !input.trim(),\n              className: \"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-full p-3 transition font-medium\",\n              title: \"G\\u1EEDi\",\n              children: /*#__PURE__*/_jsxDEV(FiSend, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              disabled: loading,\n              className: \"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\",\n              title: \"\\uD83D\\uDC4D Like\",\n              children: /*#__PURE__*/_jsxDEV(FiThumbsUp, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 686,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"NRd9kZAQ0GB5IQHBTQob+NcrHEQ=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","FiSend","FiTrash2","FiSettings","FiUpload","FiChevronUp","FiFile","FiMapPin","FiPlay","FiMic","FiType","FiSmile","FiThumbsUp","FiDownload","FiSearch","FiCopy","FiEdit2","FiRefreshCw","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","Chat","_s","messages","setMessages","input","setInput","loading","setLoading","showSettings","setShowSettings","uploadQuery","setUploadQuery","userName","setUserName","showUploadMenu","setShowUploadMenu","sidebarOpen","setSidebarOpen","conversationHistory","setConversationHistory","searchQuery","setSearchQuery","hoveredMsgIdx","setHoveredMsgIdx","copiedIdx","setCopiedIdx","editingIdx","setEditingIdx","editingText","setEditingText","aiProfile","setAiProfile","name","avatar","status","color","messagesEndRef","imageInputRef","documentInputRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","loadHistory","loadAIProfile","response","get","data","error","console","history","map","msg","idx","id","title","user_message","substring","length","timestamp","Date","toLocaleTimeString","hour","minute","date","toLocaleDateString","preview","sendMessage","e","preventDefault","trim","userMessage","prev","ai_response","toISOString","isLoading","post","text","user_name","updated","clearHistory","window","confirm","delete","uploadImage","file","formData","FormData","append","headers","value","alert","uploadDocument","message","copyMessage","navigator","clipboard","writeText","setTimeout","handleEditMessage","handleSaveEdit","updatedMessage","regenerateResponse","exportChat","chatData","exportDate","aiName","dataStr","JSON","stringify","dataBlob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","slice","click","startNewChat","filteredHistory","filter","conv","toLowerCase","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","onChange","target","stopPropagation","startsWith","src","alt","style","width","height","objectFit","onError","display","onMouseEnter","onMouseLeave","rows","size","charAt","toUpperCase","animationDelay","ref","maxLength","onSubmit","_imageInputRef$curren","disabled","_documentInputRef$cur","accept","_e$target$files","files","_e$target$files2","_c","$RefreshReg$"],"sources":["D:/IZ/AIClone/frontend/src/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { FiSend, FiTrash2, FiSettings, FiUpload, FiChevronUp, FiFile, FiMapPin, FiPlay, FiMic, FiType, FiSmile, FiThumbsUp, FiDownload, FiSearch, FiCopy, FiEdit2, FiRefreshCw } from 'react-icons/fi';\r\nimport './App.css';\r\n\r\nconst API_URL = 'http://localhost:8000';\r\n\r\nfunction Chat() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [uploadQuery, setUploadQuery] = useState('');\r\n  const [userName, setUserName] = useState('You');\r\n  const [showUploadMenu, setShowUploadMenu] = useState(false);\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [conversationHistory, setConversationHistory] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [hoveredMsgIdx, setHoveredMsgIdx] = useState(null);\r\n  const [copiedIdx, setCopiedIdx] = useState(null);\r\n  const [editingIdx, setEditingIdx] = useState(null);\r\n  const [editingText, setEditingText] = useState('');\r\n  const [aiProfile, setAiProfile] = useState({\r\n    name: 'AIClone',\r\n    avatar: 'ðŸ¤–',\r\n    status: 'Online',\r\n    color: '#0066FF'\r\n  });\r\n  const messagesEndRef = useRef(null);\r\n  const imageInputRef = useRef(null);\r\n  const documentInputRef = useRef(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    loadHistory();\r\n    loadAIProfile();\r\n  }, []);\r\n\r\n  const loadAIProfile = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/api/ai-profile`);\r\n      setAiProfile(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to load AI profile:', error);\r\n    }\r\n  };\r\n\r\n  const loadHistory = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/api/history`);\r\n      if (response.data.messages) {\r\n        setMessages(response.data.messages);\r\n        // Táº¡o lá»‹ch sá»­ tá»« messages\r\n        const history = response.data.messages.map((msg, idx) => ({\r\n          id: idx,\r\n          title: msg.user_message.substring(0, 30) + (msg.user_message.length > 30 ? '...' : ''),\r\n          timestamp: new Date(msg.timestamp).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' }),\r\n          date: new Date(msg.timestamp).toLocaleDateString('vi-VN'),\r\n          preview: msg.user_message\r\n        }));\r\n        setConversationHistory(history);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load history:', error);\r\n    }\r\n  };\r\n\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    setLoading(true);\r\n    const userMessage = input;\r\n    setInput('');\r\n\r\n    setMessages(prev => [...prev, {\r\n      user_message: userMessage,\r\n      ai_response: '',\r\n      timestamp: new Date().toISOString(),\r\n      isLoading: true\r\n    }]);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/chat`, {\r\n        text: userMessage,\r\n        user_name: 'User'\r\n      });\r\n\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[updated.length - 1] = {\r\n          ...response.data,\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[updated.length - 1] = {\r\n          ...updated[updated.length - 1],\r\n          ai_response: 'âŒ Lá»—i káº¿t ná»‘i. Vui lÃ²ng kiá»ƒm tra server.',\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const clearHistory = async () => {\r\n    if (window.confirm('Báº¡n cháº¯c cháº¯n muá»‘n xÃ³a lá»‹ch sá»­ cuá»™c trÃ² chuyá»‡n?')) {\r\n      try {\r\n        await axios.delete(`${API_URL}/api/history`);\r\n        setMessages([]);\r\n      } catch (error) {\r\n        console.error('Failed to clear history:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const uploadImage = async (file) => {\r\n    if (!file) return;\r\n    \r\n    setLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('query', uploadQuery);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/upload/image`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      \r\n      setMessages(prev => [...prev, {\r\n        user_message: `[Image: ${file.name}]${uploadQuery ? ` - ${uploadQuery}` : ''}`,\r\n        ai_response: response.data.ai_response,\r\n        timestamp: response.data.timestamp\r\n      }]);\r\n      \r\n      setUploadQuery('');\r\n      if (imageInputRef.current) imageInputRef.current.value = '';\r\n    } catch (error) {\r\n      console.error('Image upload failed:', error);\r\n      alert('Failed to upload image');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const uploadDocument = async (file) => {\r\n    if (!file) return;\r\n    \r\n    setLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    formData.append('query', uploadQuery);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/upload/document`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      \r\n      setMessages(prev => [...prev, {\r\n        user_message: `[Document: ${file.name}]${uploadQuery ? ` - ${uploadQuery}` : ''}`,\r\n        ai_response: response.data.ai_response || response.data.message,\r\n        timestamp: response.data.timestamp || new Date().toISOString()\r\n      }]);\r\n      \r\n      setUploadQuery('');\r\n      if (documentInputRef.current) documentInputRef.current.value = '';\r\n    } catch (error) {\r\n      console.error('Document upload failed:', error);\r\n      alert('Failed to upload document');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Copy message to clipboard\r\n  const copyMessage = (text) => {\r\n    navigator.clipboard.writeText(text);\r\n    setCopiedIdx(hoveredMsgIdx);\r\n    setTimeout(() => setCopiedIdx(null), 2000);\r\n  };\r\n\r\n  // Edit message\r\n  const handleEditMessage = (idx) => {\r\n    setEditingIdx(idx);\r\n    setEditingText(messages[idx].user_message);\r\n  };\r\n\r\n  // Save edited message and resend\r\n  const handleSaveEdit = async (idx) => {\r\n    if (!editingText.trim()) return;\r\n    \r\n    setLoading(true);\r\n    const updatedMessage = editingText;\r\n    setEditingIdx(null);\r\n\r\n    setMessages(prev => {\r\n      const updated = [...prev];\r\n      updated[idx] = {\r\n        ...updated[idx],\r\n        user_message: updatedMessage,\r\n        isLoading: true\r\n      };\r\n      return updated;\r\n    });\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/chat`, {\r\n        text: updatedMessage,\r\n        user_name: 'User'\r\n      });\r\n\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[idx] = {\r\n          ...updated[idx],\r\n          user_message: updatedMessage,\r\n          ai_response: response.data.ai_response,\r\n          timestamp: response.data.timestamp,\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error sending edited message:', error);\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[idx] = {\r\n          ...updated[idx],\r\n          ai_response: 'âŒ Lá»—i káº¿t ná»‘i.',\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  // Regenerate AI response\r\n  const regenerateResponse = async (idx) => {\r\n    const userMessage = messages[idx].user_message;\r\n    \r\n    setLoading(true);\r\n    setMessages(prev => {\r\n      const updated = [...prev];\r\n      updated[idx] = { ...updated[idx], isLoading: true };\r\n      return updated;\r\n    });\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/chat`, {\r\n        text: userMessage,\r\n        user_name: 'User'\r\n      });\r\n\r\n      setMessages(prev => {\r\n        const updated = [...prev];\r\n        updated[idx] = {\r\n          ...updated[idx],\r\n          ai_response: response.data.ai_response,\r\n          timestamp: response.data.timestamp,\r\n          isLoading: false\r\n        };\r\n        return updated;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error regenerating response:', error);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  // Export chat as JSON\r\n  const exportChat = () => {\r\n    const chatData = {\r\n      exportDate: new Date().toISOString(),\r\n      aiName: aiProfile.name,\r\n      userName: userName,\r\n      messages: messages\r\n    };\r\n    \r\n    const dataStr = JSON.stringify(chatData, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `chat-${new Date().toISOString().slice(0, 10)}.json`;\r\n    link.click();\r\n  };\r\n\r\n  // Start new chat\r\n  const startNewChat = () => {\r\n    if (messages.length > 0 && window.confirm('Báº¯t Ä‘áº§u cuá»™c trÃ² chuyá»‡n má»›i?')) {\r\n      setMessages([]);\r\n      setInput('');\r\n    }\r\n  };\r\n\r\n  // Search in history\r\n  const filteredHistory = conversationHistory.filter(conv =>\r\n    conv.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    conv.preview.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-900 flex p-0\">\r\n      {/* SIDEBAR */}\r\n      <div className={`${sidebarOpen ? 'w-64' : 'w-20'} bg-gradient-to-b from-gray-950 to-gray-900 border-r border-gray-700 flex flex-col transition-all duration-300 overflow-hidden`}>\r\n        \r\n        {/* Sidebar Header */}\r\n        <div className=\"p-4 border-b border-gray-700 flex items-center justify-between\">\r\n          {sidebarOpen && <h2 className=\"text-white font-bold text-lg\">ðŸ“‹ Lá»‹ch sá»­</h2>}\r\n          <button \r\n            onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            className=\"text-gray-400 hover:text-white transition p-1 ml-auto\"\r\n          >\r\n            {sidebarOpen ? 'â—€' : 'â–¶'}\r\n          </button>\r\n        </div>\r\n\r\n        {/* New Conversation Button */}\r\n        <div className=\"p-3\">\r\n          <button \r\n            onClick={startNewChat}\r\n            className=\"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white py-2.5 px-4 font-semibold transition-all shadow-lg flex items-center justify-center gap-2\"\r\n          >\r\n            {sidebarOpen ? <>âž• Cuá»™c trÃ² chuyá»‡n má»›i</> : <>âž•</>}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Search Bar */}\r\n        {sidebarOpen && (\r\n          <div className=\"px-3 pb-3\">\r\n            <div className=\"relative\">\r\n              <FiSearch className=\"absolute left-3 top-3 text-gray-500 size-4\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"TÃ¬m kiáº¿m...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"w-full bg-gray-800 text-white text-sm py-2 pl-8 pr-3 rounded-lg border border-gray-700 focus:border-blue-500 focus:outline-none\"\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Conversations List */}\r\n        <div className=\"flex-1 overflow-y-auto p-3 space-y-2\">\r\n          {filteredHistory.map((conv) => (\r\n            <div \r\n              key={conv.id}\r\n              className=\"group p-3 rounded-lg bg-gray-800 hover:bg-gray-700 transition-all cursor-pointer border border-transparent hover:border-blue-500 hover:shadow-lg\"\r\n              title={conv.preview}\r\n            >\r\n              {sidebarOpen && (\r\n                <>\r\n                  <p className=\"text-white text-sm font-medium truncate group-hover:text-blue-400 transition\">ðŸ’¬ {conv.title}</p>\r\n                  <div className=\"flex justify-between items-center mt-1\">\r\n                    <p className=\"text-gray-500 text-xs\">{conv.timestamp}</p>\r\n                    <button \r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        if (window.confirm('XÃ³a cuá»™c trÃ² chuyá»‡n nÃ y?')) {\r\n                          clearHistory();\r\n                        }\r\n                      }}\r\n                      className=\"text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition text-sm\"\r\n                    >\r\n                      ðŸ—‘ï¸\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          ))}\r\n          {filteredHistory.length === 0 && sidebarOpen && (\r\n            <p className=\"text-gray-500 text-center py-8 text-sm\">KhÃ´ng cÃ³ cuá»™c trÃ² chuyá»‡n nÃ o</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Sidebar Footer */}\r\n        <div className=\"p-3 border-t border-gray-700 space-y-2\">\r\n          <button \r\n            onClick={exportChat}\r\n            className=\"w-full text-gray-400 hover:text-white hover:bg-gray-800 py-2 px-3 rounded-lg transition text-sm flex items-center justify-center gap-2\"\r\n          >\r\n            {sidebarOpen ? <>ðŸ“¥ Xuáº¥t chat</> : <>ðŸ“¥</>}\r\n          </button>\r\n          <button \r\n            onClick={() => setShowSettings(!showSettings)}\r\n            className=\"w-full text-gray-400 hover:text-white hover:bg-gray-800 py-2 px-3 rounded-lg transition text-sm flex items-center justify-center gap-2\"\r\n          >\r\n            {sidebarOpen ? <>âš™ï¸ CÃ i Ä‘áº·t</> : <>âš™ï¸</>}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* MAIN CHAT AREA */}\r\n      <div className=\"flex-1 flex flex-col bg-gray-800 h-screen\">\r\n        \r\n        {/* HEADER - FULL WIDTH */}\r\n        <div className=\"bg-gray-900 border-b border-gray-700 p-5 text-white flex justify-between items-center sticky top-0 z-10\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-3xl font-bold overflow-hidden flex-shrink-0\">\r\n              {aiProfile.avatar.startsWith('http') ? (\r\n                <img src={aiProfile.avatar} alt=\"AI\" style={{width: '100%', height: '100%', objectFit: 'cover'}} onError={(e) => e.target.style.display = 'none'} />\r\n              ) : (\r\n                aiProfile.avatar\r\n              )}\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\">{aiProfile.name}</h1>\r\n              <p className=\"text-sm text-gray-400\">{aiProfile.status}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-3\">\r\n            <button className=\"p-2 hover:bg-gray-700 rounded-lg transition\" title=\"Video call\">\r\n              ðŸ“¹\r\n            </button>\r\n            <button className=\"p-2 hover:bg-gray-700 rounded-lg transition\" title=\"Phone call\">\r\n              â˜Žï¸\r\n            </button>\r\n            <button \r\n              onClick={() => setShowSettings(!showSettings)}\r\n              className=\"p-2 hover:bg-gray-700 rounded-lg transition\" \r\n              title=\"Settings\"\r\n            >\r\n              âš™ï¸\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* MESSAGES CONTAINER - FULL WIDTH, FLEX-GROW */}\r\n        <div className=\"flex-1 overflow-y-auto p-8 space-y-5 bg-gray-800\">\r\n          {messages.length === 0 ? (\r\n            <div className=\"flex items-center justify-center h-full text-center\">\r\n              <div>\r\n                <p className=\"text-9xl mb-6\">ðŸ’¬</p>\r\n                <p className=\"text-gray-300 text-3xl font-bold mb-2\">Xin chÃ o {userName}!</p>\r\n                <p className=\"text-gray-500 text-xl\">HÃ£y báº¯t Ä‘áº§u cuá»™c trÃ² chuyá»‡n vá»›i {aiProfile.name}</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            messages.map((msg, idx) => (\r\n              <div \r\n                key={idx} \r\n                className=\"space-y-4\"\r\n                onMouseEnter={() => setHoveredMsgIdx(idx)}\r\n                onMouseLeave={() => setHoveredMsgIdx(null)}\r\n              >\r\n                {/* User Message */}\r\n                <div className=\"flex justify-end gap-3\">\r\n                  <div className=\"max-w-2xl group\">\r\n                    <div className=\"text-xs text-gray-400 text-right mb-2 px-3 font-medium\">{userName}</div>\r\n                    <div className=\"relative\">\r\n                      {editingIdx === idx ? (\r\n                        <div className=\"bg-blue-600 text-white rounded-3xl rounded-tr-none px-6 py-3 shadow-lg\">\r\n                          <textarea\r\n                            value={editingText}\r\n                            onChange={(e) => setEditingText(e.target.value)}\r\n                            className=\"w-full bg-blue-700 text-white rounded-lg p-2 text-base focus:outline-none\"\r\n                            rows=\"3\"\r\n                          />\r\n                          <div className=\"flex gap-2 mt-2\">\r\n                            <button\r\n                              onClick={() => handleSaveEdit(idx)}\r\n                              className=\"bg-blue-800 hover:bg-blue-900 px-3 py-1 rounded text-sm\"\r\n                            >\r\n                              LÆ°u\r\n                            </button>\r\n                            <button\r\n                              onClick={() => setEditingIdx(null)}\r\n                              className=\"bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded text-sm\"\r\n                            >\r\n                              Há»§y\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"bg-blue-600 text-white rounded-3xl rounded-tr-none px-6 py-3 shadow-lg break-words max-w-2xl\">\r\n                          <p className=\"text-base\">{msg.user_message}</p>\r\n                        </div>\r\n                      )}\r\n                      {hoveredMsgIdx === idx && editingIdx !== idx && (\r\n                        <div className=\"absolute -top-10 right-0 flex gap-2 bg-gray-700 rounded-lg p-2 shadow-lg opacity-0 group-hover:opacity-100 transition\">\r\n                          <button\r\n                            onClick={() => copyMessage(msg.user_message)}\r\n                            className=\"text-gray-300 hover:text-white transition p-1\"\r\n                            title=\"Copy\"\r\n                          >\r\n                            {copiedIdx === idx ? 'âœ“' : <FiCopy size={16} />}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleEditMessage(idx)}\r\n                            className=\"text-gray-300 hover:text-white transition p-1\"\r\n                            title=\"Chá»‰nh sá»­a\"\r\n                          >\r\n                            <FiEdit2 size={16} />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0 text-sm font-bold\">\r\n                    {userName.charAt(0).toUpperCase()}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* AI Response */}\r\n                <div className=\"flex justify-start gap-3\">\r\n                  <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0 text-white text-sm font-bold overflow-hidden\">\r\n                    {aiProfile.avatar.startsWith('http') ? (\r\n                      <img src={aiProfile.avatar} alt=\"AI\" style={{width: '100%', height: '100%', objectFit: 'cover'}} onError={(e) => e.target.style.display = 'none'} />\r\n                    ) : (\r\n                      aiProfile.avatar\r\n                    )}\r\n                  </div>\r\n                  <div className=\"max-w-2xl group\">\r\n                    <div className=\"text-xs text-gray-400 mb-2 px-3 font-medium\">{aiProfile.name} {new Date(msg.timestamp).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })}</div>\r\n                    <div className=\"relative\">\r\n                      <div className=\"bg-gray-700 text-gray-100 rounded-3xl rounded-tl-none px-6 py-3 shadow-lg break-words max-w-2xl\">\r\n                        {msg.isLoading ? (\r\n                          <div className=\"flex gap-2 items-center\">\r\n                            <span className=\"text-sm\">Äang suy nghÄ©</span>\r\n                            <div className=\"flex gap-1\">\r\n                              <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" />\r\n                              <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }} />\r\n                              <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.4s' }} />\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <p className=\"text-base whitespace-pre-wrap\">{msg.ai_response}</p>\r\n                        )}\r\n                      </div>\r\n                      {hoveredMsgIdx === idx && !msg.isLoading && (\r\n                        <div className=\"absolute -top-10 left-0 flex gap-2 bg-gray-700 rounded-lg p-2 shadow-lg opacity-0 group-hover:opacity-100 transition\">\r\n                          <button\r\n                            onClick={() => copyMessage(msg.ai_response)}\r\n                            className=\"text-gray-300 hover:text-white transition p-1\"\r\n                            title=\"Copy\"\r\n                          >\r\n                            {copiedIdx === idx ? 'âœ“' : <FiCopy size={16} />}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => regenerateResponse(idx)}\r\n                            className=\"text-gray-300 hover:text-white transition p-1\"\r\n                            title=\"Táº¡o láº¡i\"\r\n                          >\r\n                            <FiRefreshCw size={16} />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Settings Panel */}\r\n        {showSettings && (\r\n          <div className=\"bg-gray-700 border-t border-gray-600 p-4 flex gap-2 items-center\">\r\n            <input\r\n              type=\"text\"\r\n              value={userName}\r\n              onChange={(e) => setUserName(e.target.value || 'You')}\r\n              placeholder=\"TÃªn cá»§a báº¡n...\"\r\n              className=\"flex-1 border border-gray-600 rounded-lg px-4 py-2 text-base bg-gray-600 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500\"\r\n              maxLength={20}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* INPUT FORM - BOTTOM */}\r\n        <div className=\"bg-gray-800 border-t border-gray-700 p-5\">\r\n          <form onSubmit={sendMessage} className=\"flex gap-3 items-center max-w-6xl mx-auto\">\r\n            {/* Bottom Action Buttons */}\r\n            <div className=\"flex gap-1\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => imageInputRef.current?.click()}\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition text-lg\"\r\n                title=\"ðŸ“¸ Táº£i áº£nh\"\r\n              >\r\n                ðŸ“¸\r\n              </button>\r\n              \r\n              <button\r\n                type=\"button\"\r\n                onClick={() => documentInputRef.current?.click()}\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition text-lg\"\r\n                title=\"ðŸ“Ž Táº£i file\"\r\n              >\r\n                ðŸ“Ž\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\"\r\n                title=\"ðŸŽ¤ Voice\"\r\n              >\r\n                <FiMic size={20} />\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\"\r\n                title=\"Aa Text size\"\r\n              >\r\n                <FiType size={20} />\r\n              </button>\r\n            </div>\r\n\r\n            <input\r\n              ref={imageInputRef}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={(e) => uploadImage(e.target.files?.[0])}\r\n              style={{ display: 'none' }}\r\n            />\r\n            \r\n            <input\r\n              ref={documentInputRef}\r\n              type=\"file\"\r\n              accept=\".pdf,.docx,.txt\"\r\n              onChange={(e) => uploadDocument(e.target.files?.[0])}\r\n              style={{ display: 'none' }}\r\n            />\r\n\r\n            {/* Message Input */}\r\n            <input\r\n              type=\"text\"\r\n              value={input}\r\n              onChange={(e) => setInput(e.target.value)}\r\n              placeholder=\"Nháº­p tin nháº¯n...\"\r\n              className=\"flex-1 border border-gray-600 rounded-full px-6 py-3 text-base text-white bg-gray-700 placeholder-gray-500 focus:outline-none focus:border-blue-500 transition\"\r\n              disabled={loading}\r\n            />\r\n            \r\n            {/* Right Actions */}\r\n            <div className=\"flex gap-1\">\r\n              <button\r\n                type=\"button\"\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\"\r\n                title=\"ðŸ˜Š Emoji\"\r\n              >\r\n                <FiSmile size={20} />\r\n              </button>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading || !input.trim()}\r\n                className=\"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-full p-3 transition font-medium\"\r\n                title=\"Gá»­i\"\r\n              >\r\n                <FiSend size={20} />\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                disabled={loading}\r\n                className=\"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 text-gray-300 hover:text-white rounded-full p-3 transition\"\r\n                title=\"ðŸ‘ Like\"\r\n              >\r\n                <FiThumbsUp size={20} />\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}