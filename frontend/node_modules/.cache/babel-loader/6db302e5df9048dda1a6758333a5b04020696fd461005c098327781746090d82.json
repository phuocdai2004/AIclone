{"ast":null,"code":"var _jsxFileName = \"D:\\\\IZ\\\\AIClone\\\\frontend\\\\src\\\\AIBot.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport './AIBot.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AIBot = () => {\n  _s();\n  const [isActive, setIsActive] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [response, setResponse] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const recognitionRef = useRef(null);\n  const synthRef = useRef(window.speechSynthesis);\n\n  // Kh·ªüi t·∫°o Speech Recognition\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = true;\n      recognitionRef.current.interimResults = true;\n      recognitionRef.current.lang = 'vi-VN'; // Ti·∫øng Vi·ªát\n\n      recognitionRef.current.onresult = event => {\n        let finalTranscript = '';\n        let interimTranscript = '';\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          const transcript = event.results[i][0].transcript;\n          if (event.results[i].isFinal) {\n            finalTranscript += transcript;\n          } else {\n            interimTranscript += transcript;\n          }\n        }\n        if (interimTranscript) {\n          setTranscript(interimTranscript);\n        }\n        if (finalTranscript) {\n          setTranscript(finalTranscript);\n          handleUserSpeech(finalTranscript);\n        }\n      };\n      recognitionRef.current.onerror = event => {\n        console.error('Speech recognition error:', event.error);\n        if (event.error === 'no-speech') {\n          // Restart if no speech detected\n          if (isActive && !isSpeaking) {\n            restartListening();\n          }\n        }\n      };\n      recognitionRef.current.onend = () => {\n        // T·ª± ƒë·ªông restart n·∫øu ƒëang active v√† kh√¥ng speaking\n        if (isActive && !isSpeaking) {\n          restartListening();\n        }\n      };\n    }\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n      synthRef.current.cancel();\n    };\n  }, [isActive, isSpeaking]);\n  const restartListening = () => {\n    if (recognitionRef.current && isActive && !isSpeaking) {\n      try {\n        recognitionRef.current.start();\n        setIsListening(true);\n      } catch (e) {\n        // Already started\n      }\n    }\n  };\n\n  // B·∫≠t/t·∫Øt AI Bot\n  const toggleActive = () => {\n    if (!isActive) {\n      setIsActive(true);\n      setMessages([{\n        role: 'bot',\n        content: 'Xin ch√†o! T√¥i l√† AI-Bot. H√£y n√≥i chuy·ªán v·ªõi t√¥i!'\n      }]);\n      speak('Xin ch√†o! T√¥i l√† AI Bot. H√£y n√≥i chuy·ªán v·ªõi t√¥i!');\n    } else {\n      setIsActive(false);\n      setIsListening(false);\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n      synthRef.current.cancel();\n    }\n  };\n\n  // X·ª≠ l√Ω khi ng∆∞·ªùi d√πng n√≥i\n  const handleUserSpeech = async text => {\n    if (!text.trim() || isSpeaking) return;\n\n    // D·ª´ng l·∫Øng nghe khi x·ª≠ l√Ω\n    setIsListening(false);\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n\n    // Th√™m message c·ªßa user\n    setMessages(prev => [...prev, {\n      role: 'user',\n      content: text\n    }]);\n    setTranscript('');\n    try {\n      // G·ªçi API ƒë·ªÉ l·∫•y response\n      const res = await axios.post('http://localhost:8000/api/ai/chat', {\n        message: text\n      });\n      const botResponse = res.data.response || res.data.message || 'T√¥i kh√¥ng hi·ªÉu, b·∫°n c√≥ th·ªÉ n√≥i l·∫°i kh√¥ng?';\n\n      // Th√™m message c·ªßa bot\n      setMessages(prev => [...prev, {\n        role: 'bot',\n        content: botResponse\n      }]);\n      setResponse(botResponse);\n\n      // Ph√°t gi·ªçng n√≥i\n      speak(botResponse);\n    } catch (error) {\n      console.error('Error:', error);\n      const errorMsg = 'Xin l·ªói, c√≥ l·ªói x·∫£y ra. H√£y th·ª≠ l·∫°i!';\n      setMessages(prev => [...prev, {\n        role: 'bot',\n        content: errorMsg\n      }]);\n      speak(errorMsg);\n    }\n  };\n\n  // Text-to-Speech\n  const speak = text => {\n    if (!synthRef.current) return;\n\n    // Cancel any ongoing speech\n    synthRef.current.cancel();\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'vi-VN';\n    utterance.rate = 1;\n    utterance.pitch = 1;\n\n    // Ch·ªçn voice ti·∫øng Vi·ªát n·∫øu c√≥\n    const voices = synthRef.current.getVoices();\n    const vietnameseVoice = voices.find(voice => voice.lang.includes('vi'));\n    if (vietnameseVoice) {\n      utterance.voice = vietnameseVoice;\n    }\n    utterance.onstart = () => {\n      setIsSpeaking(true);\n    };\n    utterance.onend = () => {\n      setIsSpeaking(false);\n      // B·∫Øt ƒë·∫ßu l·∫Øng nghe l·∫°i sau khi n√≥i xong\n      if (isActive) {\n        setTimeout(() => {\n          restartListening();\n        }, 500);\n      }\n    };\n    synthRef.current.speak(utterance);\n  };\n  if (isMinimized) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aibot-minimized\",\n      onClick: () => setIsMinimized(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aibot-mini-icon\",\n        children: \"\\uD83E\\uDD16\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"aibot-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aibot-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"aibot-title\",\n        children: \"\\uD83E\\uDD16 AI-BOT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aibot-controls\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"aibot-minimize\",\n          onClick: () => setIsMinimized(true),\n          children: \"\\u2212\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `aibot-avatar ${isActive ? 'active' : ''} ${isSpeaking ? 'speaking' : ''} ${isListening ? 'listening' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"robot\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"robot-head\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"robot-face\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"robot-eyes\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"robot-eye left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"robot-eye right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `robot-mouth ${isSpeaking ? 'speaking' : ''}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"robot-ears\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"robot-ear left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"robot-ear right\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-indicator\",\n        children: [!isActive && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-off\",\n          children: \"\\uD83D\\uDCA4 Ch\\u01B0a ho\\u1EA1t \\u0111\\u1ED9ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 25\n        }, this), isActive && isListening && !isSpeaking && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-listening\",\n          children: \"\\uD83C\\uDFA4 \\u0110ang l\\u1EAFng nghe...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 54\n        }, this), isActive && isSpeaking && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-speaking\",\n          children: \"\\uD83D\\uDD0A \\u0110ang n\\xF3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 38\n        }, this), isActive && !isListening && !isSpeaking && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-processing\",\n          children: \"\\u23F3 \\u0110ang x\\u1EED l\\xFD...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 55\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aibot-messages\",\n      children: [messages.slice(-4).map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `aibot-message ${msg.role}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"message-icon\",\n          children: msg.role === 'user' ? 'üë§' : 'ü§ñ'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"message-text\",\n          children: msg.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)), transcript && isListening && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aibot-message user interim\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"message-icon\",\n          children: \"\\uD83D\\uDC64\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"message-text\",\n          children: [transcript, \"...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aibot-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `aibot-toggle ${isActive ? 'active' : ''}`,\n        onClick: toggleActive,\n        children: isActive ? '‚èπÔ∏è D·ª´ng l·∫°i' : 'üéôÔ∏è B·∫Øt ƒë·∫ßu n√≥i chuy·ªán'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n};\n_s(AIBot, \"y7HIMC4qDNhA3dnvR+DgF5uF7Lk=\");\n_c = AIBot;\nexport default AIBot;\nvar _c;\n$RefreshReg$(_c, \"AIBot\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","AIBot","_s","isActive","setIsActive","isListening","setIsListening","isSpeaking","setIsSpeaking","transcript","setTranscript","response","setResponse","messages","setMessages","isMinimized","setIsMinimized","recognitionRef","synthRef","window","speechSynthesis","SpeechRecognition","webkitSpeechRecognition","current","continuous","interimResults","lang","onresult","event","finalTranscript","interimTranscript","i","resultIndex","results","length","isFinal","handleUserSpeech","onerror","console","error","restartListening","onend","stop","cancel","start","e","toggleActive","role","content","speak","text","trim","prev","res","post","message","botResponse","data","errorMsg","utterance","SpeechSynthesisUtterance","rate","pitch","voices","getVoices","vietnameseVoice","find","voice","includes","onstart","setTimeout","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","slice","map","msg","idx","_c","$RefreshReg$"],"sources":["D:/IZ/AIClone/frontend/src/AIBot.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport './AIBot.css';\r\n\r\nconst AIBot = () => {\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [transcript, setTranscript] = useState('');\r\n  const [response, setResponse] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n  const [isMinimized, setIsMinimized] = useState(false);\r\n  \r\n  const recognitionRef = useRef(null);\r\n  const synthRef = useRef(window.speechSynthesis);\r\n  \r\n  // Kh·ªüi t·∫°o Speech Recognition\r\n  useEffect(() => {\r\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\r\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n      recognitionRef.current = new SpeechRecognition();\r\n      recognitionRef.current.continuous = true;\r\n      recognitionRef.current.interimResults = true;\r\n      recognitionRef.current.lang = 'vi-VN'; // Ti·∫øng Vi·ªát\r\n      \r\n      recognitionRef.current.onresult = (event) => {\r\n        let finalTranscript = '';\r\n        let interimTranscript = '';\r\n        \r\n        for (let i = event.resultIndex; i < event.results.length; i++) {\r\n          const transcript = event.results[i][0].transcript;\r\n          if (event.results[i].isFinal) {\r\n            finalTranscript += transcript;\r\n          } else {\r\n            interimTranscript += transcript;\r\n          }\r\n        }\r\n        \r\n        if (interimTranscript) {\r\n          setTranscript(interimTranscript);\r\n        }\r\n        \r\n        if (finalTranscript) {\r\n          setTranscript(finalTranscript);\r\n          handleUserSpeech(finalTranscript);\r\n        }\r\n      };\r\n      \r\n      recognitionRef.current.onerror = (event) => {\r\n        console.error('Speech recognition error:', event.error);\r\n        if (event.error === 'no-speech') {\r\n          // Restart if no speech detected\r\n          if (isActive && !isSpeaking) {\r\n            restartListening();\r\n          }\r\n        }\r\n      };\r\n      \r\n      recognitionRef.current.onend = () => {\r\n        // T·ª± ƒë·ªông restart n·∫øu ƒëang active v√† kh√¥ng speaking\r\n        if (isActive && !isSpeaking) {\r\n          restartListening();\r\n        }\r\n      };\r\n    }\r\n    \r\n    return () => {\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n      synthRef.current.cancel();\r\n    };\r\n  }, [isActive, isSpeaking]);\r\n  \r\n  const restartListening = () => {\r\n    if (recognitionRef.current && isActive && !isSpeaking) {\r\n      try {\r\n        recognitionRef.current.start();\r\n        setIsListening(true);\r\n      } catch (e) {\r\n        // Already started\r\n      }\r\n    }\r\n  };\r\n  \r\n  // B·∫≠t/t·∫Øt AI Bot\r\n  const toggleActive = () => {\r\n    if (!isActive) {\r\n      setIsActive(true);\r\n      setMessages([{ role: 'bot', content: 'Xin ch√†o! T√¥i l√† AI-Bot. H√£y n√≥i chuy·ªán v·ªõi t√¥i!' }]);\r\n      speak('Xin ch√†o! T√¥i l√† AI Bot. H√£y n√≥i chuy·ªán v·ªõi t√¥i!');\r\n    } else {\r\n      setIsActive(false);\r\n      setIsListening(false);\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n      synthRef.current.cancel();\r\n    }\r\n  };\r\n  \r\n  // X·ª≠ l√Ω khi ng∆∞·ªùi d√πng n√≥i\r\n  const handleUserSpeech = async (text) => {\r\n    if (!text.trim() || isSpeaking) return;\r\n    \r\n    // D·ª´ng l·∫Øng nghe khi x·ª≠ l√Ω\r\n    setIsListening(false);\r\n    if (recognitionRef.current) {\r\n      recognitionRef.current.stop();\r\n    }\r\n    \r\n    // Th√™m message c·ªßa user\r\n    setMessages(prev => [...prev, { role: 'user', content: text }]);\r\n    setTranscript('');\r\n    \r\n    try {\r\n      // G·ªçi API ƒë·ªÉ l·∫•y response\r\n      const res = await axios.post('http://localhost:8000/api/ai/chat', {\r\n        message: text\r\n      });\r\n      \r\n      const botResponse = res.data.response || res.data.message || 'T√¥i kh√¥ng hi·ªÉu, b·∫°n c√≥ th·ªÉ n√≥i l·∫°i kh√¥ng?';\r\n      \r\n      // Th√™m message c·ªßa bot\r\n      setMessages(prev => [...prev, { role: 'bot', content: botResponse }]);\r\n      setResponse(botResponse);\r\n      \r\n      // Ph√°t gi·ªçng n√≥i\r\n      speak(botResponse);\r\n      \r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      const errorMsg = 'Xin l·ªói, c√≥ l·ªói x·∫£y ra. H√£y th·ª≠ l·∫°i!';\r\n      setMessages(prev => [...prev, { role: 'bot', content: errorMsg }]);\r\n      speak(errorMsg);\r\n    }\r\n  };\r\n  \r\n  // Text-to-Speech\r\n  const speak = (text) => {\r\n    if (!synthRef.current) return;\r\n    \r\n    // Cancel any ongoing speech\r\n    synthRef.current.cancel();\r\n    \r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    utterance.lang = 'vi-VN';\r\n    utterance.rate = 1;\r\n    utterance.pitch = 1;\r\n    \r\n    // Ch·ªçn voice ti·∫øng Vi·ªát n·∫øu c√≥\r\n    const voices = synthRef.current.getVoices();\r\n    const vietnameseVoice = voices.find(voice => voice.lang.includes('vi'));\r\n    if (vietnameseVoice) {\r\n      utterance.voice = vietnameseVoice;\r\n    }\r\n    \r\n    utterance.onstart = () => {\r\n      setIsSpeaking(true);\r\n    };\r\n    \r\n    utterance.onend = () => {\r\n      setIsSpeaking(false);\r\n      // B·∫Øt ƒë·∫ßu l·∫Øng nghe l·∫°i sau khi n√≥i xong\r\n      if (isActive) {\r\n        setTimeout(() => {\r\n          restartListening();\r\n        }, 500);\r\n      }\r\n    };\r\n    \r\n    synthRef.current.speak(utterance);\r\n  };\r\n  \r\n  if (isMinimized) {\r\n    return (\r\n      <div className=\"aibot-minimized\" onClick={() => setIsMinimized(false)}>\r\n        <div className=\"aibot-mini-icon\">ü§ñ</div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className=\"aibot-container\">\r\n      <div className=\"aibot-header\">\r\n        <span className=\"aibot-title\">ü§ñ AI-BOT</span>\r\n        <div className=\"aibot-controls\">\r\n          <button className=\"aibot-minimize\" onClick={() => setIsMinimized(true)}>‚àí</button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Robot Avatar */}\r\n      <div className={`aibot-avatar ${isActive ? 'active' : ''} ${isSpeaking ? 'speaking' : ''} ${isListening ? 'listening' : ''}`}>\r\n        <div className=\"robot\">\r\n          <div className=\"robot-head\">\r\n            <div className=\"robot-face\">\r\n              <div className=\"robot-eyes\">\r\n                <div className=\"robot-eye left\"></div>\r\n                <div className=\"robot-eye right\"></div>\r\n              </div>\r\n              <div className={`robot-mouth ${isSpeaking ? 'speaking' : ''}`}></div>\r\n            </div>\r\n          </div>\r\n          <div className=\"robot-ears\">\r\n            <div className=\"robot-ear left\"></div>\r\n            <div className=\"robot-ear right\"></div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Status indicator */}\r\n        <div className=\"status-indicator\">\r\n          {!isActive && <span className=\"status-off\">üí§ Ch∆∞a ho·∫°t ƒë·ªông</span>}\r\n          {isActive && isListening && !isSpeaking && <span className=\"status-listening\">üé§ ƒêang l·∫Øng nghe...</span>}\r\n          {isActive && isSpeaking && <span className=\"status-speaking\">üîä ƒêang n√≥i...</span>}\r\n          {isActive && !isListening && !isSpeaking && <span className=\"status-processing\">‚è≥ ƒêang x·ª≠ l√Ω...</span>}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Messages */}\r\n      <div className=\"aibot-messages\">\r\n        {messages.slice(-4).map((msg, idx) => (\r\n          <div key={idx} className={`aibot-message ${msg.role}`}>\r\n            <span className=\"message-icon\">{msg.role === 'user' ? 'üë§' : 'ü§ñ'}</span>\r\n            <span className=\"message-text\">{msg.content}</span>\r\n          </div>\r\n        ))}\r\n        \r\n        {/* Current transcript */}\r\n        {transcript && isListening && (\r\n          <div className=\"aibot-message user interim\">\r\n            <span className=\"message-icon\">üë§</span>\r\n            <span className=\"message-text\">{transcript}...</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Control Button */}\r\n      <div className=\"aibot-footer\">\r\n        <button \r\n          className={`aibot-toggle ${isActive ? 'active' : ''}`}\r\n          onClick={toggleActive}\r\n        >\r\n          {isActive ? '‚èπÔ∏è D·ª´ng l·∫°i' : 'üéôÔ∏è B·∫Øt ƒë·∫ßu n√≥i chuy·ªán'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AIBot;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}