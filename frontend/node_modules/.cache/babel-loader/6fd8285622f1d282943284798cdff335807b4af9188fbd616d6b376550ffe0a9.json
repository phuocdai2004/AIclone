{"ast":null,"code":"var _jsxFileName = \"D:\\\\IZ\\\\AIClone\\\\frontend\\\\src\\\\Avatar3D.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as THREE from 'three';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Avatar3D = () => {\n  _s();\n  const mountRef = useRef(null);\n  const sceneRef = useRef(null);\n  const cameraRef = useRef(null);\n  const rendererRef = useRef(null);\n  const headRef = useRef(null);\n  const leftEyeRef = useRef(null);\n  const rightEyeRef = useRef(null);\n  const mouthRef = useRef(null);\n  const [message, setMessage] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [avatarConfig, setAvatarConfig] = useState({\n    skinColor: '#FDB4A8',\n    eyeColor: '#4A90E2',\n    hairColor: '#8B4513',\n    mouthColor: '#E74C3C'\n  });\n\n  // Initialize Three.js scene\n  useEffect(() => {\n    if (!mountRef.current) return;\n\n    // Scene setup\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0xf0f0f0);\n    sceneRef.current = scene;\n\n    // Camera setup\n    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    camera.position.z = 3;\n    cameraRef.current = camera;\n\n    // Renderer setup\n    const renderer = new THREE.WebGLRenderer({\n      antialias: true,\n      alpha: true\n    });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.shadowMap.enabled = true;\n    mountRef.current.appendChild(renderer.domElement);\n    rendererRef.current = renderer;\n\n    // Lighting\n    const light = new THREE.DirectionalLight(0xffffff, 1);\n    light.position.set(5, 5, 5);\n    light.castShadow = true;\n    scene.add(light);\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);\n    scene.add(ambientLight);\n\n    // Create head (sphere)\n    const headGeometry = new THREE.SphereGeometry(1, 32, 32);\n    const headMaterial = new THREE.MeshStandardMaterial({\n      color: avatarConfig.skinColor,\n      roughness: 0.4,\n      metalness: 0.1\n    });\n    const head = new THREE.Mesh(headGeometry, headMaterial);\n    head.castShadow = true;\n    head.receiveShadow = true;\n    scene.add(head);\n    headRef.current = head;\n\n    // Create hair\n    const hairGeometry = new THREE.SphereGeometry(1.08, 32, 32, 0, Math.PI * 2, 0, Math.PI * 0.5);\n    const hairMaterial = new THREE.MeshStandardMaterial({\n      color: avatarConfig.hairColor,\n      roughness: 0.5\n    });\n    const hair = new THREE.Mesh(hairGeometry, hairMaterial);\n    hair.position.y = 0.5;\n    hair.castShadow = true;\n    head.add(hair);\n\n    // Create eyes\n    const eyeGeometry = new THREE.SphereGeometry(0.2, 16, 16);\n    const eyeMaterial = new THREE.MeshStandardMaterial({\n      color: avatarConfig.eyeColor,\n      roughness: 0.2\n    });\n    const leftEye = new THREE.Mesh(eyeGeometry, eyeMaterial);\n    leftEye.position.set(-0.3, 0.3, 0.95);\n    leftEye.castShadow = true;\n    head.add(leftEye);\n    leftEyeRef.current = leftEye;\n    const rightEye = new THREE.Mesh(eyeGeometry, eyeMaterial);\n    rightEye.position.set(0.3, 0.3, 0.95);\n    rightEye.castShadow = true;\n    head.add(rightEye);\n    rightEyeRef.current = rightEye;\n\n    // Create pupils\n    const pupilGeometry = new THREE.SphereGeometry(0.1, 16, 16);\n    const pupilMaterial = new THREE.MeshStandardMaterial({\n      color: 0x000000\n    });\n    const leftPupil = new THREE.Mesh(pupilGeometry, pupilMaterial);\n    leftPupil.position.z = 0.15;\n    leftEye.add(leftPupil);\n    const rightPupil = new THREE.Mesh(pupilGeometry, pupilMaterial);\n    rightPupil.position.z = 0.15;\n    rightEye.add(rightPupil);\n\n    // Create mouth\n    const mouthGeometry = new THREE.BoxGeometry(0.5, 0.2, 0.3);\n    const mouthMaterial = new THREE.MeshStandardMaterial({\n      color: avatarConfig.mouthColor,\n      roughness: 0.6\n    });\n    const mouth = new THREE.Mesh(mouthGeometry, mouthMaterial);\n    mouth.position.set(0, -0.3, 0.8);\n    mouth.castShadow = true;\n    head.add(mouth);\n    mouthRef.current = mouth;\n\n    // Mouse tracking for head rotation\n    const onMouseMove = event => {\n      const x = event.clientX / window.innerWidth * 2 - 1;\n      const y = -(event.clientY / window.innerHeight) * 2 + 1;\n      if (headRef.current) {\n        headRef.current.rotation.y = x * 0.5;\n        headRef.current.rotation.x = y * 0.3;\n      }\n    };\n    window.addEventListener('mousemove', onMouseMove);\n\n    // Animation loop\n    let blinkTimer = 0;\n    let isBlinking = false;\n    const animate = () => {\n      requestAnimationFrame(animate);\n\n      // Blinking animation\n      blinkTimer++;\n      if (blinkTimer > 100) {\n        isBlinking = true;\n        if (leftEyeRef.current && rightEyeRef.current) {\n          leftEyeRef.current.scale.y = Math.max(0, 1 - (blinkTimer - 100) * 0.05);\n          rightEyeRef.current.scale.y = Math.max(0, 1 - (blinkTimer - 100) * 0.05);\n        }\n        if (blinkTimer > 110) {\n          blinkTimer = 0;\n          isBlinking = false;\n        }\n      } else {\n        if (leftEyeRef.current && rightEyeRef.current) {\n          leftEyeRef.current.scale.y = 1;\n          rightEyeRef.current.scale.y = 1;\n        }\n      }\n      renderer.render(scene, camera);\n    };\n    animate();\n\n    // Handle window resize\n    const handleResize = () => {\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      camera.aspect = width / height;\n      camera.updateProjectionMatrix();\n      renderer.setSize(width, height);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('resize', handleResize);\n      if (mountRef.current && renderer.domElement.parentNode === mountRef.current) {\n        mountRef.current.removeChild(renderer.domElement);\n      }\n    };\n  }, [avatarConfig]);\n\n  // Voice recognition\n  const startListening = () => {\n    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\n    recognition.lang = 'vi-VN';\n    recognition.continuous = false;\n    recognition.onstart = () => {\n      setIsListening(true);\n      console.log('Listening...');\n    };\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setMessage(transcript);\n      setIsListening(false);\n      sendMessage(transcript);\n    };\n    recognition.onerror = event => {\n      console.error('Speech recognition error:', event.error);\n      setIsListening(false);\n    };\n    recognition.start();\n  };\n\n  // Send message to AI\n  const sendMessage = async msg => {\n    try {\n      setIsSpeaking(true);\n      const response = await axios.post('http://localhost:8000/api/chat', {\n        text: msg\n      });\n      const aiResponse = response.data.ai_response;\n      setMessage(aiResponse);\n\n      // Animate mouth while speaking\n      animateMouth(aiResponse.length * 50); // Duration based on text length\n\n      // Text-to-speech\n      const utterance = new SpeechSynthesisUtterance(aiResponse);\n      utterance.lang = 'vi-VN';\n      utterance.onend = () => {\n        setIsSpeaking(false);\n      };\n      window.speechSynthesis.speak(utterance);\n    } catch (error) {\n      console.error('Error:', error);\n      setIsSpeaking(false);\n    }\n  };\n\n  // Animate mouth opening/closing\n  const animateMouth = duration => {\n    if (!mouthRef.current) return;\n    let elapsed = 0;\n    const animate = () => {\n      elapsed += 16;\n      const progress = Math.sin(elapsed / duration * Math.PI);\n      mouthRef.current.scale.y = 0.5 + progress * 0.5;\n      if (elapsed < duration) {\n        requestAnimationFrame(animate);\n      } else {\n        mouthRef.current.scale.y = 1;\n      }\n    };\n    animate();\n  };\n\n  // Handle avatar customization\n  const handleConfigChange = (key, value) => {\n    setAvatarConfig(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '100vh',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mountRef,\n      style: {\n        flex: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        bottom: 20,\n        left: 20,\n        background: 'rgba(255, 255, 255, 0.9)',\n        padding: '20px',\n        borderRadius: '10px',\n        maxWidth: '400px',\n        boxShadow: '0 2px 10px rgba(0,0,0,0.1)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Avatar 3D AI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Type or speak...\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && sendMessage(message),\n          style: {\n            width: '100%',\n            padding: '8px',\n            marginBottom: '10px',\n            borderRadius: '5px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startListening,\n            disabled: isListening || isSpeaking,\n            style: {\n              flex: 1,\n              padding: '8px',\n              background: isListening ? '#FF6B6B' : '#4ECDC4',\n              color: 'white',\n              border: 'none',\n              borderRadius: '5px',\n              cursor: 'pointer'\n            },\n            children: isListening ? 'ðŸŽ¤ Listening...' : 'ðŸŽ¤ Speak'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => sendMessage(message),\n            disabled: isSpeaking,\n            style: {\n              flex: 1,\n              padding: '8px',\n              background: isSpeaking ? '#FFB84D' : '#45B7D1',\n              color: 'white',\n              border: 'none',\n              borderRadius: '5px',\n              cursor: 'pointer'\n            },\n            children: isSpeaking ? 'ðŸ”Š Speaking...' : 'ðŸ’¬ Send'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderTop: '1px solid #ddd',\n          paddingTop: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Customize Face\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '8px'\n            },\n            children: [\"Skin Color:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: avatarConfig.skinColor,\n              onChange: e => handleConfigChange('skinColor', e.target.value),\n              style: {\n                marginLeft: '10px',\n                cursor: 'pointer'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '8px'\n            },\n            children: [\"Eye Color:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: avatarConfig.eyeColor,\n              onChange: e => handleConfigChange('eyeColor', e.target.value),\n              style: {\n                marginLeft: '10px',\n                cursor: 'pointer'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '8px'\n            },\n            children: [\"Hair Color:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: avatarConfig.hairColor,\n              onChange: e => handleConfigChange('hairColor', e.target.value),\n              style: {\n                marginLeft: '10px',\n                cursor: 'pointer'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block'\n            },\n            children: [\"Mouth Color:\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: avatarConfig.mouthColor,\n              onChange: e => handleConfigChange('mouthColor', e.target.value),\n              style: {\n                marginLeft: '10px',\n                cursor: 'pointer'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 5\n  }, this);\n};\n_s(Avatar3D, \"gLqO1viSolEPIZo6P332tepSFeY=\");\n_c = Avatar3D;\nexport default Avatar3D;\nvar _c;\n$RefreshReg$(_c, \"Avatar3D\");","map":{"version":3,"names":["React","useEffect","useRef","useState","THREE","axios","jsxDEV","_jsxDEV","Avatar3D","_s","mountRef","sceneRef","cameraRef","rendererRef","headRef","leftEyeRef","rightEyeRef","mouthRef","message","setMessage","isListening","setIsListening","isSpeaking","setIsSpeaking","avatarConfig","setAvatarConfig","skinColor","eyeColor","hairColor","mouthColor","current","scene","Scene","background","Color","camera","PerspectiveCamera","window","innerWidth","innerHeight","position","z","renderer","WebGLRenderer","antialias","alpha","setSize","shadowMap","enabled","appendChild","domElement","light","DirectionalLight","set","castShadow","add","ambientLight","AmbientLight","headGeometry","SphereGeometry","headMaterial","MeshStandardMaterial","color","roughness","metalness","head","Mesh","receiveShadow","hairGeometry","Math","PI","hairMaterial","hair","y","eyeGeometry","eyeMaterial","leftEye","rightEye","pupilGeometry","pupilMaterial","leftPupil","rightPupil","mouthGeometry","BoxGeometry","mouthMaterial","mouth","onMouseMove","event","x","clientX","clientY","rotation","addEventListener","blinkTimer","isBlinking","animate","requestAnimationFrame","scale","max","render","handleResize","width","height","aspect","updateProjectionMatrix","removeEventListener","parentNode","removeChild","startListening","recognition","SpeechRecognition","webkitSpeechRecognition","lang","continuous","onstart","console","log","onresult","transcript","results","sendMessage","onerror","error","start","msg","response","post","text","aiResponse","data","ai_response","animateMouth","length","utterance","SpeechSynthesisUtterance","onend","speechSynthesis","speak","duration","elapsed","progress","sin","handleConfigChange","key","value","prev","style","display","flexDirection","children","ref","flex","fileName","_jsxFileName","lineNumber","columnNumber","bottom","left","padding","borderRadius","maxWidth","boxShadow","marginBottom","type","placeholder","onChange","e","target","onKeyPress","border","gap","onClick","disabled","cursor","borderTop","paddingTop","fontSize","marginLeft","_c","$RefreshReg$"],"sources":["D:/IZ/AIClone/frontend/src/Avatar3D.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport * as THREE from 'three';\r\nimport axios from 'axios';\r\n\r\nconst Avatar3D = () => {\r\n  const mountRef = useRef(null);\r\n  const sceneRef = useRef(null);\r\n  const cameraRef = useRef(null);\r\n  const rendererRef = useRef(null);\r\n  const headRef = useRef(null);\r\n  const leftEyeRef = useRef(null);\r\n  const rightEyeRef = useRef(null);\r\n  const mouthRef = useRef(null);\r\n  \r\n  const [message, setMessage] = useState('');\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [avatarConfig, setAvatarConfig] = useState({\r\n    skinColor: '#FDB4A8',\r\n    eyeColor: '#4A90E2',\r\n    hairColor: '#8B4513',\r\n    mouthColor: '#E74C3C',\r\n  });\r\n\r\n  // Initialize Three.js scene\r\n  useEffect(() => {\r\n    if (!mountRef.current) return;\r\n\r\n    // Scene setup\r\n    const scene = new THREE.Scene();\r\n    scene.background = new THREE.Color(0xf0f0f0);\r\n    sceneRef.current = scene;\r\n\r\n    // Camera setup\r\n    const camera = new THREE.PerspectiveCamera(\r\n      75,\r\n      window.innerWidth / window.innerHeight,\r\n      0.1,\r\n      1000\r\n    );\r\n    camera.position.z = 3;\r\n    cameraRef.current = camera;\r\n\r\n    // Renderer setup\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    renderer.shadowMap.enabled = true;\r\n    mountRef.current.appendChild(renderer.domElement);\r\n    rendererRef.current = renderer;\r\n\r\n    // Lighting\r\n    const light = new THREE.DirectionalLight(0xffffff, 1);\r\n    light.position.set(5, 5, 5);\r\n    light.castShadow = true;\r\n    scene.add(light);\r\n\r\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);\r\n    scene.add(ambientLight);\r\n\r\n    // Create head (sphere)\r\n    const headGeometry = new THREE.SphereGeometry(1, 32, 32);\r\n    const headMaterial = new THREE.MeshStandardMaterial({\r\n      color: avatarConfig.skinColor,\r\n      roughness: 0.4,\r\n      metalness: 0.1,\r\n    });\r\n    const head = new THREE.Mesh(headGeometry, headMaterial);\r\n    head.castShadow = true;\r\n    head.receiveShadow = true;\r\n    scene.add(head);\r\n    headRef.current = head;\r\n\r\n    // Create hair\r\n    const hairGeometry = new THREE.SphereGeometry(1.08, 32, 32, 0, Math.PI * 2, 0, Math.PI * 0.5);\r\n    const hairMaterial = new THREE.MeshStandardMaterial({\r\n      color: avatarConfig.hairColor,\r\n      roughness: 0.5,\r\n    });\r\n    const hair = new THREE.Mesh(hairGeometry, hairMaterial);\r\n    hair.position.y = 0.5;\r\n    hair.castShadow = true;\r\n    head.add(hair);\r\n\r\n    // Create eyes\r\n    const eyeGeometry = new THREE.SphereGeometry(0.2, 16, 16);\r\n    const eyeMaterial = new THREE.MeshStandardMaterial({\r\n      color: avatarConfig.eyeColor,\r\n      roughness: 0.2,\r\n    });\r\n\r\n    const leftEye = new THREE.Mesh(eyeGeometry, eyeMaterial);\r\n    leftEye.position.set(-0.3, 0.3, 0.95);\r\n    leftEye.castShadow = true;\r\n    head.add(leftEye);\r\n    leftEyeRef.current = leftEye;\r\n\r\n    const rightEye = new THREE.Mesh(eyeGeometry, eyeMaterial);\r\n    rightEye.position.set(0.3, 0.3, 0.95);\r\n    rightEye.castShadow = true;\r\n    head.add(rightEye);\r\n    rightEyeRef.current = rightEye;\r\n\r\n    // Create pupils\r\n    const pupilGeometry = new THREE.SphereGeometry(0.1, 16, 16);\r\n    const pupilMaterial = new THREE.MeshStandardMaterial({ color: 0x000000 });\r\n\r\n    const leftPupil = new THREE.Mesh(pupilGeometry, pupilMaterial);\r\n    leftPupil.position.z = 0.15;\r\n    leftEye.add(leftPupil);\r\n\r\n    const rightPupil = new THREE.Mesh(pupilGeometry, pupilMaterial);\r\n    rightPupil.position.z = 0.15;\r\n    rightEye.add(rightPupil);\r\n\r\n    // Create mouth\r\n    const mouthGeometry = new THREE.BoxGeometry(0.5, 0.2, 0.3);\r\n    const mouthMaterial = new THREE.MeshStandardMaterial({\r\n      color: avatarConfig.mouthColor,\r\n      roughness: 0.6,\r\n    });\r\n    const mouth = new THREE.Mesh(mouthGeometry, mouthMaterial);\r\n    mouth.position.set(0, -0.3, 0.8);\r\n    mouth.castShadow = true;\r\n    head.add(mouth);\r\n    mouthRef.current = mouth;\r\n\r\n    // Mouse tracking for head rotation\r\n    const onMouseMove = (event) => {\r\n      const x = (event.clientX / window.innerWidth) * 2 - 1;\r\n      const y = -(event.clientY / window.innerHeight) * 2 + 1;\r\n\r\n      if (headRef.current) {\r\n        headRef.current.rotation.y = x * 0.5;\r\n        headRef.current.rotation.x = y * 0.3;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('mousemove', onMouseMove);\r\n\r\n    // Animation loop\r\n    let blinkTimer = 0;\r\n    let isBlinking = false;\r\n\r\n    const animate = () => {\r\n      requestAnimationFrame(animate);\r\n\r\n      // Blinking animation\r\n      blinkTimer++;\r\n      if (blinkTimer > 100) {\r\n        isBlinking = true;\r\n        if (leftEyeRef.current && rightEyeRef.current) {\r\n          leftEyeRef.current.scale.y = Math.max(0, 1 - (blinkTimer - 100) * 0.05);\r\n          rightEyeRef.current.scale.y = Math.max(0, 1 - (blinkTimer - 100) * 0.05);\r\n        }\r\n        if (blinkTimer > 110) {\r\n          blinkTimer = 0;\r\n          isBlinking = false;\r\n        }\r\n      } else {\r\n        if (leftEyeRef.current && rightEyeRef.current) {\r\n          leftEyeRef.current.scale.y = 1;\r\n          rightEyeRef.current.scale.y = 1;\r\n        }\r\n      }\r\n\r\n      renderer.render(scene, camera);\r\n    };\r\n\r\n    animate();\r\n\r\n    // Handle window resize\r\n    const handleResize = () => {\r\n      const width = window.innerWidth;\r\n      const height = window.innerHeight;\r\n      camera.aspect = width / height;\r\n      camera.updateProjectionMatrix();\r\n      renderer.setSize(width, height);\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', onMouseMove);\r\n      window.removeEventListener('resize', handleResize);\r\n      if (mountRef.current && renderer.domElement.parentNode === mountRef.current) {\r\n        mountRef.current.removeChild(renderer.domElement);\r\n      }\r\n    };\r\n  }, [avatarConfig]);\r\n\r\n  // Voice recognition\r\n  const startListening = () => {\r\n    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\r\n    recognition.lang = 'vi-VN';\r\n    recognition.continuous = false;\r\n\r\n    recognition.onstart = () => {\r\n      setIsListening(true);\r\n      console.log('Listening...');\r\n    };\r\n\r\n    recognition.onresult = (event) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      setMessage(transcript);\r\n      setIsListening(false);\r\n      sendMessage(transcript);\r\n    };\r\n\r\n    recognition.onerror = (event) => {\r\n      console.error('Speech recognition error:', event.error);\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.start();\r\n  };\r\n\r\n  // Send message to AI\r\n  const sendMessage = async (msg) => {\r\n    try {\r\n      setIsSpeaking(true);\r\n      const response = await axios.post('http://localhost:8000/api/chat', {\r\n        text: msg,\r\n      });\r\n\r\n      const aiResponse = response.data.ai_response;\r\n      setMessage(aiResponse);\r\n\r\n      // Animate mouth while speaking\r\n      animateMouth(aiResponse.length * 50); // Duration based on text length\r\n\r\n      // Text-to-speech\r\n      const utterance = new SpeechSynthesisUtterance(aiResponse);\r\n      utterance.lang = 'vi-VN';\r\n      utterance.onend = () => {\r\n        setIsSpeaking(false);\r\n      };\r\n      window.speechSynthesis.speak(utterance);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setIsSpeaking(false);\r\n    }\r\n  };\r\n\r\n  // Animate mouth opening/closing\r\n  const animateMouth = (duration) => {\r\n    if (!mouthRef.current) return;\r\n\r\n    let elapsed = 0;\r\n    const animate = () => {\r\n      elapsed += 16;\r\n      const progress = Math.sin((elapsed / duration) * Math.PI);\r\n      mouthRef.current.scale.y = 0.5 + progress * 0.5;\r\n\r\n      if (elapsed < duration) {\r\n        requestAnimationFrame(animate);\r\n      } else {\r\n        mouthRef.current.scale.y = 1;\r\n      }\r\n    };\r\n\r\n    animate();\r\n  };\r\n\r\n  // Handle avatar customization\r\n  const handleConfigChange = (key, value) => {\r\n    setAvatarConfig((prev) => ({\r\n      ...prev,\r\n      [key]: value,\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100vh', display: 'flex', flexDirection: 'column' }}>\r\n      <div ref={mountRef} style={{ flex: 1 }} />\r\n\r\n      {/* Control Panel */}\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          bottom: 20,\r\n          left: 20,\r\n          background: 'rgba(255, 255, 255, 0.9)',\r\n          padding: '20px',\r\n          borderRadius: '10px',\r\n          maxWidth: '400px',\r\n          boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n        }}\r\n      >\r\n        <h3>Avatar 3D AI</h3>\r\n\r\n        {/* Chat */}\r\n        <div style={{ marginBottom: '15px' }}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Type or speak...\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            onKeyPress={(e) => e.key === 'Enter' && sendMessage(message)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '8px',\r\n              marginBottom: '10px',\r\n              borderRadius: '5px',\r\n              border: '1px solid #ccc',\r\n            }}\r\n          />\r\n          <div style={{ display: 'flex', gap: '10px' }}>\r\n            <button\r\n              onClick={startListening}\r\n              disabled={isListening || isSpeaking}\r\n              style={{\r\n                flex: 1,\r\n                padding: '8px',\r\n                background: isListening ? '#FF6B6B' : '#4ECDC4',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '5px',\r\n                cursor: 'pointer',\r\n              }}\r\n            >\r\n              {isListening ? 'ðŸŽ¤ Listening...' : 'ðŸŽ¤ Speak'}\r\n            </button>\r\n            <button\r\n              onClick={() => sendMessage(message)}\r\n              disabled={isSpeaking}\r\n              style={{\r\n                flex: 1,\r\n                padding: '8px',\r\n                background: isSpeaking ? '#FFB84D' : '#45B7D1',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '5px',\r\n                cursor: 'pointer',\r\n              }}\r\n            >\r\n              {isSpeaking ? 'ðŸ”Š Speaking...' : 'ðŸ’¬ Send'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Avatar Customization */}\r\n        <div style={{ borderTop: '1px solid #ddd', paddingTop: '15px' }}>\r\n          <h4>Customize Face</h4>\r\n          <div style={{ fontSize: '12px' }}>\r\n            <label style={{ display: 'block', marginBottom: '8px' }}>\r\n              Skin Color:\r\n              <input\r\n                type=\"color\"\r\n                value={avatarConfig.skinColor}\r\n                onChange={(e) => handleConfigChange('skinColor', e.target.value)}\r\n                style={{ marginLeft: '10px', cursor: 'pointer' }}\r\n              />\r\n            </label>\r\n            <label style={{ display: 'block', marginBottom: '8px' }}>\r\n              Eye Color:\r\n              <input\r\n                type=\"color\"\r\n                value={avatarConfig.eyeColor}\r\n                onChange={(e) => handleConfigChange('eyeColor', e.target.value)}\r\n                style={{ marginLeft: '10px', cursor: 'pointer' }}\r\n              />\r\n            </label>\r\n            <label style={{ display: 'block', marginBottom: '8px' }}>\r\n              Hair Color:\r\n              <input\r\n                type=\"color\"\r\n                value={avatarConfig.hairColor}\r\n                onChange={(e) => handleConfigChange('hairColor', e.target.value)}\r\n                style={{ marginLeft: '10px', cursor: 'pointer' }}\r\n              />\r\n            </label>\r\n            <label style={{ display: 'block' }}>\r\n              Mouth Color:\r\n              <input\r\n                type=\"color\"\r\n                value={avatarConfig.mouthColor}\r\n                onChange={(e) => handleConfigChange('mouthColor', e.target.value)}\r\n                style={{ marginLeft: '10px', cursor: 'pointer' }}\r\n              />\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Avatar3D;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}