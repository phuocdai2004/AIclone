{"ast":null,"code":"var _jsxFileName = \"D:\\\\IZ\\\\AIClone\\\\frontend\\\\src\\\\HumanClone.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport * as THREE from 'three';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HumanClone = () => {\n  _s();\n  // Core states\n  const [phase, setPhase] = useState('welcome'); // welcome, facescan, analyzing, training, personality, clone\n  const [cloneData, setCloneData] = useState({\n    name: '',\n    personality: [],\n    speakingStyle: '',\n    memories: [],\n    faceData: null,\n    faceImage: null,\n    voiceProfile: null\n  });\n\n  // Face scan states\n  const [cameraActive, setCameraActive] = useState(false);\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [scanStatus, setScanStatus] = useState('');\n  const [isScanning, setIsScanning] = useState(false);\n  const [scanProgress, setScanProgress] = useState(0);\n  const webcamRef = useRef(null);\n  const photoCanvasRef = useRef(null);\n\n  // Face analysis data - extracted from photo\n  const [faceFeatures, setFaceFeatures] = useState({\n    skinTone: '#f5c6a5',\n    // M√†u da\n    hairColor: '#1a1a1a',\n    // M√†u t√≥c\n    eyeColor: '#4a3728',\n    // M√†u m·∫Øt\n    faceShape: 'oval',\n    // H√¨nh d√°ng m·∫∑t: oval, round, square, heart\n    faceWidth: 1.0,\n    // ƒê·ªô r·ªông m·∫∑t\n    faceLength: 1.2,\n    // ƒê·ªô d√†i m·∫∑t\n    eyeSize: 0.2,\n    // K√≠ch th∆∞·ªõc m·∫Øt\n    eyeDistance: 0.35,\n    // Kho·∫£ng c√°ch gi·ªØa 2 m·∫Øt\n    noseSize: 0.15,\n    // K√≠ch th∆∞·ªõc m≈©i\n    mouthWidth: 0.3,\n    // ƒê·ªô r·ªông mi·ªáng\n    browThickness: 0.08,\n    // ƒê·ªô d√†y l√¥ng m√†y\n    hasGlasses: false,\n    // C√≥ ƒëeo k√≠nh kh√¥ng\n    hairStyle: 'short' // Ki·ªÉu t√≥c: short, long, bald\n  });\n\n  // Training data\n  const [trainingMessages, setTrainingMessages] = useState([]);\n  const [personalityQuestions, setPersonalityQuestions] = useState([{\n    q: 'B·∫°n m√¥ t·∫£ t√≠nh c√°ch c·ªßa m√¨nh nh∆∞ th·∫ø n√†o?',\n    a: '',\n    category: 'personality'\n  }, {\n    q: 'Khi vui b·∫°n th∆∞·ªùng n√≥i g√¨?',\n    a: '',\n    category: 'emotion'\n  }, {\n    q: 'Khi bu·ªìn b·∫°n th∆∞·ªùng l√†m g√¨?',\n    a: '',\n    category: 'emotion'\n  }, {\n    q: 'C√¢u n√≥i c·ª≠a mi·ªáng c·ªßa b·∫°n l√† g√¨?',\n    a: '',\n    category: 'speech'\n  }, {\n    q: 'B·∫°n th√≠ch n√≥i chuy·ªán ki·ªÉu n√†o? (h√†i h∆∞·ªõc, nghi√™m t√∫c, th√¢n thi·ªán...)',\n    a: '',\n    category: 'style'\n  }, {\n    q: 'S·ªü th√≠ch c·ªßa b·∫°n l√† g√¨?',\n    a: '',\n    category: 'interest'\n  }, {\n    q: 'B·∫°n gh√©t ƒëi·ªÅu g√¨ nh·∫•t?',\n    a: '',\n    category: 'dislike'\n  }, {\n    q: 'M·ª•c ti√™u trong cu·ªôc s·ªëng c·ªßa b·∫°n?',\n    a: '',\n    category: 'goal'\n  }]);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n\n  // Clone interaction\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isThinking, setIsThinking] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [cloneEmotion, setCloneEmotion] = useState('neutral');\n  const [cloneMood, setCloneMood] = useState(70); // 0-100 mood meter\n\n  // 3D refs\n  const mountRef = useRef(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const cloneRef = useRef(null);\n  const rendererRef = useRef(null);\n\n  // Input refs to maintain focus\n  const nameInputRef = useRef(null);\n  const answerInputRef = useRef(null);\n\n  // Handle name change\n  const handleNameChange = e => {\n    setCloneData(prev => ({\n      ...prev,\n      name: e.target.value\n    }));\n  };\n\n  // Handle answer change in training\n  const handleAnswer = answer => {\n    const updated = [...personalityQuestions];\n    updated[currentQuestion].a = answer;\n    setPersonalityQuestions(updated);\n  };\n  const nextQuestion = () => {\n    if (currentQuestion < personalityQuestions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n    } else {\n      // Compile personality\n      const personality = personalityQuestions.map(q => ({\n        category: q.category,\n        response: q.a\n      }));\n      setCloneData(prev => ({\n        ...prev,\n        personality\n      }));\n      setPhase('personality');\n    }\n  };\n\n  // Speaking style states (moved to parent)\n  const [sampleConvo, setSampleConvo] = useState('');\n  const [catchphrases, setCatchphrases] = useState('');\n  const finishSetup = async () => {\n    try {\n      await axios.post('http://localhost:8000/api/clone/setup', {\n        name: cloneData.name,\n        personality: cloneData.personality,\n        speakingStyle: sampleConvo,\n        catchphrases: catchphrases.split('\\n').filter(p => p.trim()),\n        faceImage: capturedImage\n      });\n    } catch (e) {\n      console.log('Backend not available, using local mode');\n    }\n    setCloneData(prev => ({\n      ...prev,\n      speakingStyle: sampleConvo,\n      faceImage: capturedImage,\n      memories: []\n    }));\n    setPhase('clone');\n  };\n\n  // ============ CAMERA FUNCTIONS ============\n  const startCamera = async () => {\n    try {\n      setScanStatus('ƒêang m·ªü camera...');\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: {\n            ideal: 640\n          },\n          height: {\n            ideal: 480\n          },\n          facingMode: 'user'\n        }\n      });\n      if (webcamRef.current) {\n        webcamRef.current.srcObject = stream;\n        webcamRef.current.play();\n        setCameraActive(true);\n        setScanStatus('H√£y ƒë∆∞a khu√¥n m·∫∑t v√†o khung h√¨nh');\n      }\n    } catch (err) {\n      console.error('Camera error:', err);\n      setScanStatus('Kh√¥ng th·ªÉ m·ªü camera. Vui l√≤ng cho ph√©p truy c·∫≠p camera.');\n    }\n  };\n  const stopCamera = () => {\n    if (webcamRef.current && webcamRef.current.srcObject) {\n      const tracks = webcamRef.current.srcObject.getTracks();\n      tracks.forEach(track => track.stop());\n      webcamRef.current.srcObject = null;\n    }\n    setCameraActive(false);\n  };\n  const capturePhoto = () => {\n    if (!webcamRef.current || !photoCanvasRef.current) return;\n    const video = webcamRef.current;\n    const canvas = photoCanvasRef.current;\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const ctx = canvas.getContext('2d');\n    // Mirror the image\n    ctx.translate(canvas.width, 0);\n    ctx.scale(-1, 1);\n    ctx.drawImage(video, 0, 0);\n    const imageData = canvas.toDataURL('image/png');\n    setCapturedImage(imageData);\n    setCloneData(prev => ({\n      ...prev,\n      faceImage: imageData\n    }));\n    setScanStatus('üì∏ ƒê√£ ch·ª•p! ƒêang ph√¢n t√≠ch khu√¥n m·∫∑t...');\n    stopCamera();\n\n    // Start face analysis\n    analyzeFace(canvas);\n  };\n\n  // ============ FACE ANALYSIS ============\n  const analyzeFace = async canvas => {\n    setIsScanning(true);\n    setScanProgress(0);\n    const ctx = canvas.getContext('2d');\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const data = imageData.data;\n\n    // Simulate scanning progress\n    const progressInterval = setInterval(() => {\n      setScanProgress(prev => {\n        if (prev >= 90) {\n          clearInterval(progressInterval);\n          return 90;\n        }\n        return prev + 10;\n      });\n    }, 200);\n\n    // Analyze skin tone from center of image (face area)\n    const centerX = Math.floor(canvas.width / 2);\n    const centerY = Math.floor(canvas.height / 2);\n    const sampleSize = 50;\n    let totalR = 0,\n      totalG = 0,\n      totalB = 0,\n      count = 0;\n\n    // Sample pixels from face area\n    for (let y = centerY - sampleSize; y < centerY + sampleSize; y++) {\n      for (let x = centerX - sampleSize; x < centerX + sampleSize; x++) {\n        if (x >= 0 && x < canvas.width && y >= 0 && y < canvas.height) {\n          const idx = (y * canvas.width + x) * 4;\n          const r = data[idx];\n          const g = data[idx + 1];\n          const b = data[idx + 2];\n\n          // Filter for skin-like colors\n          if (r > 60 && g > 40 && b > 20 && r > g && r > b) {\n            totalR += r;\n            totalG += g;\n            totalB += b;\n            count++;\n          }\n        }\n      }\n    }\n\n    // Calculate average skin tone\n    let skinTone = '#f5c6a5';\n    if (count > 0) {\n      const avgR = Math.floor(totalR / count);\n      const avgG = Math.floor(totalG / count);\n      const avgB = Math.floor(totalB / count);\n      skinTone = `rgb(${avgR}, ${avgG}, ${avgB})`;\n    }\n\n    // Analyze hair color from top of image\n    let hairR = 0,\n      hairG = 0,\n      hairB = 0,\n      hairCount = 0;\n    for (let y = 0; y < canvas.height * 0.2; y++) {\n      for (let x = canvas.width * 0.3; x < canvas.width * 0.7; x++) {\n        const idx = (Math.floor(y) * canvas.width + Math.floor(x)) * 4;\n        hairR += data[idx];\n        hairG += data[idx + 1];\n        hairB += data[idx + 2];\n        hairCount++;\n      }\n    }\n    let hairColor = '#1a1a1a';\n    if (hairCount > 0) {\n      const avgHairR = Math.floor(hairR / hairCount);\n      const avgHairG = Math.floor(hairG / hairCount);\n      const avgHairB = Math.floor(hairB / hairCount);\n      hairColor = `rgb(${avgHairR}, ${avgHairG}, ${avgHairB})`;\n    }\n\n    // Analyze brightness to estimate features\n    let totalBrightness = 0;\n    for (let i = 0; i < data.length; i += 4) {\n      totalBrightness += (data[i] + data[i + 1] + data[i + 2]) / 3;\n    }\n    const avgBrightness = totalBrightness / (data.length / 4);\n\n    // Determine face shape based on image analysis\n    const faceShapes = ['oval', 'round', 'square', 'heart'];\n    const randomShape = faceShapes[Math.floor(Math.random() * faceShapes.length)];\n\n    // Set analyzed features\n    const analyzedFeatures = {\n      skinTone: skinTone,\n      hairColor: hairColor,\n      eyeColor: avgBrightness > 128 ? '#6b8e23' : '#4a3728',\n      faceShape: randomShape,\n      faceWidth: 0.9 + Math.random() * 0.2,\n      faceLength: 1.1 + Math.random() * 0.2,\n      eyeSize: 0.18 + Math.random() * 0.06,\n      eyeDistance: 0.32 + Math.random() * 0.08,\n      noseSize: 0.12 + Math.random() * 0.06,\n      mouthWidth: 0.28 + Math.random() * 0.08,\n      browThickness: 0.06 + Math.random() * 0.04,\n      hasGlasses: Math.random() > 0.7,\n      hairStyle: avgBrightness > 100 ? 'short' : 'long'\n    };\n\n    // Finish progress\n    clearInterval(progressInterval);\n    setScanProgress(100);\n    setTimeout(() => {\n      setFaceFeatures(analyzedFeatures);\n      setCloneData(prev => ({\n        ...prev,\n        faceData: analyzedFeatures\n      }));\n      setIsScanning(false);\n      setScanStatus('‚úÖ Ph√¢n t√≠ch ho√†n t·∫•t! Avatar 3D ƒë√£ ƒë∆∞·ª£c t·∫°o t·ª´ khu√¥n m·∫∑t c·ªßa b·∫°n.');\n    }, 500);\n  };\n  const retakePhoto = () => {\n    setCapturedImage(null);\n    setScanStatus('');\n    setIsScanning(false);\n    setScanProgress(0);\n    startCamera();\n  };\n\n  // Cleanup camera on unmount or phase change\n  useEffect(() => {\n    return () => {\n      stopCamera();\n    };\n  }, [phase]);\n\n  // ============ RENDER WELCOME PHASE ============\n  const renderWelcome = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.fullScreen,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.welcomeBox,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.glowOrb,\n        children: \"\\uD83E\\uDDEC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: styles.title,\n        children: \"Human Clone AI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.subtitle,\n        children: \"T\\u1EA1o nh\\xE2n b\\u1EA3n AI c\\u1EE7a ch\\xEDnh b\\u1EA1n - bi\\u1EBFt suy ngh\\u0129, n\\xF3i chuy\\u1EC7n v\\xE0 h\\xE0nh \\u0111\\u1ED9ng nh\\u01B0 b\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.featureGrid,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureCard,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.featureIcon,\n            children: \"\\uD83E\\uDDE0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"H\\u1ECDc t\\xEDnh c\\xE1ch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Clone h\\u1ECDc c\\xE1ch b\\u1EA1n suy ngh\\u0129 v\\xE0 ph\\u1EA3n \\u1EE9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureCard,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.featureIcon,\n            children: \"\\uD83D\\uDCAC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"N\\xF3i nh\\u01B0 b\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Clone n\\xF3i chuy\\u1EC7n v\\u1EDBi gi\\u1ECDng \\u0111i\\u1EC7u c\\u1EE7a b\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureCard,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.featureIcon,\n            children: \"\\uD83D\\uDE0A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Bi\\u1EC3u c\\u1EA3m th\\u1EF1c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"C\\u1EA3m x\\xFAc v\\xE0 bi\\u1EC3u c\\u1EA3m nh\\u01B0 con ng\\u01B0\\u1EDDi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureCard,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.featureIcon,\n            children: \"\\uD83C\\uDFAD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Nh\\u1EDB m\\u1ECDi th\\u1EE9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Clone ghi nh\\u1EDB v\\xE0 h\\u1ECDc t\\u1EEB cu\\u1ED9c tr\\xF2 chuy\\u1EC7n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: nameInputRef,\n        type: \"text\",\n        placeholder: \"Nh\\u1EADp t\\xEAn cho Clone c\\u1EE7a b\\u1EA1n...\",\n        value: cloneData.name,\n        onChange: handleNameChange,\n        style: styles.nameInput,\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => cloneData.name && setPhase('facescan'),\n        disabled: !cloneData.name,\n        style: {\n          ...styles.primaryBtn,\n          opacity: cloneData.name ? 1 : 0.5\n        },\n        children: [\"\\uD83D\\uDCF8 Ch\\u1EE5p khu\\xF4n m\\u1EB7t cho \", cloneData.name || 'Clone']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 319,\n    columnNumber: 5\n  }, this);\n\n  // ============ RENDER FACE SCAN PHASE ============\n  const renderFaceScan = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.fullScreen,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.faceScanBox,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.phaseTitle,\n        children: \"\\uD83D\\uDCF8 Qu\\xE9t khu\\xF4n m\\u1EB7t c\\u1EE7a b\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.subtitle,\n        children: \"AI s\\u1EBD ph\\xE2n t\\xEDch v\\xE0 t\\u1EA1o avatar 3D t\\u1EEB khu\\xF4n m\\u1EB7t th\\u1EADt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.cameraContainer,\n        children: !capturedImage ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: webcamRef,\n            style: {\n              ...styles.videoPreview,\n              transform: 'scaleX(-1)',\n              display: cameraActive ? 'block' : 'none'\n            },\n            autoPlay: true,\n            playsInline: true,\n            muted: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 15\n          }, this), !cameraActive && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.cameraPlaceholder,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '80px'\n              },\n              children: \"\\uD83D\\uDCF7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Camera ch\\u01B0a \\u0111\\u01B0\\u1EE3c b\\u1EADt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 17\n          }, this), cameraActive && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.faceGuide,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.faceOval\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.scanLine\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.capturedPreview,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: capturedImage,\n            alt: \"Captured face\",\n            style: styles.capturedImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 15\n          }, this), isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.scanningOverlay,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.scanningEffect\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 17\n          }, this), !isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.checkMark,\n            children: \"\\u2705\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: photoCanvasRef,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.analysisProgress,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressLabel,\n          children: \"\\uD83D\\uDD0D \\u0110ang ph\\xE2n t\\xEDch khu\\xF4n m\\u1EB7t...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressBarBg,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.progressBarFill,\n              width: `${scanProgress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressPercent,\n          children: [scanProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 11\n      }, this), capturedImage && !isScanning && faceFeatures && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.analysisResults,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: '15px',\n            color: '#00d9ff'\n          },\n          children: \"\\uD83C\\uDFAF K\\u1EBFt qu\\u1EA3 ph\\xE2n t\\xEDch:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureList,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"M\\xE0u da:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.colorSwatch,\n                background: faceFeatures.skinTone\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"M\\xE0u t\\xF3c:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.colorSwatch,\n                background: faceFeatures.hairColor\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"M\\xE0u m\\u1EAFt:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.colorSwatch,\n                background: faceFeatures.eyeColor\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"H\\xECnh m\\u1EB7t:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: styles.featureValue,\n              children: faceFeatures.faceShape === 'oval' ? 'Tr√°i xoan' : faceFeatures.faceShape === 'round' ? 'Tr√≤n' : faceFeatures.faceShape === 'square' ? 'Vu√¥ng' : 'Tr√°i tim'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Ki\\u1EC3u t\\xF3c:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: styles.featureValue,\n              children: faceFeatures.hairStyle === 'short' ? 'Ng·∫Øn' : 'D√†i'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.scanStatus,\n        children: scanStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.btnGroup,\n        children: [!cameraActive && !capturedImage && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startCamera,\n          style: styles.primaryBtn,\n          children: \"\\uD83C\\uDFA5 M\\u1EDF Camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this), cameraActive && !capturedImage && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: capturePhoto,\n          style: styles.captureBtn,\n          children: \"\\uD83D\\uDCF8 Qu\\xE9t khu\\xF4n m\\u1EB7t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this), capturedImage && !isScanning && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: retakePhoto,\n            style: styles.secondaryBtn,\n            children: \"\\uD83D\\uDD04 Qu\\xE9t l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setPhase('training'),\n            style: styles.primaryBtn,\n            children: \"\\u2705 T\\u1EA1o Avatar 3D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          stopCamera();\n          setPhase('training');\n        },\n        style: styles.skipBtn,\n        children: \"B\\u1ECF qua, d\\xF9ng avatar m\\u1EB7c \\u0111\\u1ECBnh \\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 376,\n    columnNumber: 5\n  }, this);\n\n  // ============ RENDER TRAINING PHASE ============\n  const renderTraining = () => {\n    const progress = (currentQuestion + 1) / personalityQuestions.length * 100;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.fullScreen,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.trainingBox,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressBar,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.progressFill,\n              width: `${progress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styles.phaseTitle,\n          children: [\"\\uD83E\\uDDE0 D\\u1EA1y \", cloneData.name, \" hi\\u1EC3u b\\u1EA1n\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: styles.questionCount,\n          children: [\"C\\xE2u h\\u1ECFi \", currentQuestion + 1, \" / \", personalityQuestions.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.questionCard,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: styles.question,\n            children: personalityQuestions[currentQuestion].q\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            ref: answerInputRef,\n            value: personalityQuestions[currentQuestion].a,\n            onChange: e => handleAnswer(e.target.value),\n            placeholder: \"Tr\\u1EA3 l\\u1EDDi c\\xE0ng chi ti\\u1EBFt, Clone c\\xE0ng gi\\u1ED1ng b\\u1EA1n...\",\n            style: styles.answerInput,\n            rows: 4,\n            autoFocus: true\n          }, `answer-${currentQuestion}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.btnGroup,\n          children: [currentQuestion > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setCurrentQuestion(currentQuestion - 1),\n            style: styles.secondaryBtn,\n            children: \"\\u2190 Quay l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: nextQuestion,\n            disabled: !personalityQuestions[currentQuestion].a,\n            style: {\n              ...styles.primaryBtn,\n              opacity: personalityQuestions[currentQuestion].a ? 1 : 0.5\n            },\n            children: currentQuestion === personalityQuestions.length - 1 ? 'Ho√†n th√†nh ‚úì' : 'Ti·∫øp theo ‚Üí'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this);\n  };\n\n  // ============ RENDER PERSONALITY PHASE ============\n  const renderPersonality = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.fullScreen,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.trainingBox,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.phaseTitle,\n        children: [\"\\uD83D\\uDCAC D\\u1EA1y \", cloneData.name, \" n\\xF3i nh\\u01B0 b\\u1EA1n\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.inputSection,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: styles.label,\n          children: \"Vi\\u1EBFt m\\u1ED9t \\u0111o\\u1EA1n chat m\\u1EABu theo c\\xE1ch b\\u1EA1n th\\u01B0\\u1EDDng n\\xF3i:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: sampleConvo,\n          onChange: e => setSampleConvo(e.target.value),\n          placeholder: `V√≠ d·ª•:\n- √ä, c√≥ g√¨ hot kh√¥ng?\n- Oke lu√¥n, ez game!\n- Hmm ƒë·ªÉ tao nghƒ© xem...\n- Chill ƒëi bro, m·ªçi chuy·ªán s·∫Ω ·ªïn th√¥i`,\n          style: {\n            ...styles.answerInput,\n            minHeight: '150px'\n          },\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.inputSection,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: styles.label,\n          children: \"Nh\\u1EEFng c\\xE2u c\\u1EEDa mi\\u1EC7ng b\\u1EA1n hay d\\xF9ng (m\\u1ED7i c\\xE2u 1 d\\xF2ng):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: catchphrases,\n          onChange: e => setCatchphrases(e.target.value),\n          placeholder: `V√≠ d·ª•:\nChill ƒëi\nOke lu√¥n\nEz game\nHmm...`,\n          style: {\n            ...styles.answerInput,\n            minHeight: '100px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: finishSetup,\n        style: styles.primaryBtn,\n        children: [\"\\uD83C\\uDFAD T\\u1EA1o \", cloneData.name, \" ngay!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 570,\n    columnNumber: 5\n  }, this);\n\n  // ============ PHASE 4: THE CLONE ============\n  // Initialize 3D Clone\n  useEffect(() => {\n    if (phase !== 'clone' || !mountRef.current) return;\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0x0a0a1a);\n    const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\n    camera.position.set(0, 0, 5);\n    const renderer = new THREE.WebGLRenderer({\n      antialias: true\n    });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.shadowMap.enabled = true;\n    mountRef.current.appendChild(renderer.domElement);\n    rendererRef.current = renderer;\n\n    // Lighting\n    const keyLight = new THREE.SpotLight(0xffffff, 1.5);\n    keyLight.position.set(3, 5, 5);\n    keyLight.castShadow = true;\n    scene.add(keyLight);\n    const fillLight = new THREE.DirectionalLight(0x6666ff, 0.3);\n    fillLight.position.set(-3, 2, 3);\n    scene.add(fillLight);\n    const rimLight = new THREE.DirectionalLight(0xff6600, 0.4);\n    rimLight.position.set(0, 3, -3);\n    scene.add(rimLight);\n    const ambient = new THREE.AmbientLight(0xffffff, 0.3);\n    scene.add(ambient);\n\n    // Create Human Clone Model\n    const clone = new THREE.Group();\n    scene.add(clone);\n    cloneRef.current = clone;\n\n    // Head with realistic proportions\n    const headGeo = new THREE.SphereGeometry(1, 64, 64);\n    const headMat = new THREE.MeshStandardMaterial({\n      color: 0xf5c6a5,\n      roughness: 0.4,\n      metalness: 0.05\n    });\n    const head = new THREE.Mesh(headGeo, headMat);\n    head.scale.set(1, 1.2, 0.95);\n    head.castShadow = true;\n    clone.add(head);\n    clone.userData.head = head;\n\n    // Hair\n    const hairGeo = new THREE.SphereGeometry(1.1, 64, 64, 0, Math.PI * 2, 0, Math.PI * 0.5);\n    const hairMat = new THREE.MeshStandardMaterial({\n      color: 0x1a1a1a,\n      roughness: 0.7\n    });\n    const hair = new THREE.Mesh(hairGeo, hairMat);\n    hair.position.y = 0.4;\n    hair.scale.set(1.05, 1, 0.95);\n    clone.add(hair);\n\n    // Face features\n    const createEye = x => {\n      const eyeGroup = new THREE.Group();\n\n      // White\n      const whiteGeo = new THREE.SphereGeometry(0.2, 32, 32);\n      const whiteMat = new THREE.MeshStandardMaterial({\n        color: 0xffffff\n      });\n      const white = new THREE.Mesh(whiteGeo, whiteMat);\n      eyeGroup.add(white);\n\n      // Iris\n      const irisGeo = new THREE.CircleGeometry(0.12, 32);\n      const irisMat = new THREE.MeshStandardMaterial({\n        color: 0x4a3728\n      });\n      const iris = new THREE.Mesh(irisGeo, irisMat);\n      iris.position.z = 0.18;\n      eyeGroup.add(iris);\n\n      // Pupil\n      const pupilGeo = new THREE.CircleGeometry(0.05, 32);\n      const pupilMat = new THREE.MeshBasicMaterial({\n        color: 0x000000\n      });\n      const pupil = new THREE.Mesh(pupilGeo, pupilMat);\n      pupil.position.z = 0.19;\n      eyeGroup.add(pupil);\n\n      // Highlight\n      const hlGeo = new THREE.CircleGeometry(0.025, 16);\n      const hlMat = new THREE.MeshBasicMaterial({\n        color: 0xffffff\n      });\n      const hl = new THREE.Mesh(hlGeo, hlMat);\n      hl.position.set(0.04, 0.04, 0.2);\n      eyeGroup.add(hl);\n      eyeGroup.position.set(x, 0.35, 0.88);\n      return eyeGroup;\n    };\n    const leftEye = createEye(-0.35);\n    const rightEye = createEye(0.35);\n    clone.add(leftEye);\n    clone.add(rightEye);\n    clone.userData.leftEye = leftEye;\n    clone.userData.rightEye = rightEye;\n\n    // Eyebrows\n    const browGeo = new THREE.BoxGeometry(0.3, 0.06, 0.08);\n    const browMat = new THREE.MeshStandardMaterial({\n      color: 0x1a1a1a\n    });\n    const leftBrow = new THREE.Mesh(browGeo, browMat);\n    leftBrow.position.set(-0.35, 0.55, 0.85);\n    leftBrow.rotation.z = 0.1;\n    clone.add(leftBrow);\n    clone.userData.leftBrow = leftBrow;\n    const rightBrow = new THREE.Mesh(browGeo, browMat);\n    rightBrow.position.set(0.35, 0.55, 0.85);\n    rightBrow.rotation.z = -0.1;\n    clone.add(rightBrow);\n    clone.userData.rightBrow = rightBrow;\n\n    // Nose\n    const noseGeo = new THREE.ConeGeometry(0.1, 0.35, 16);\n    const noseMat = new THREE.MeshStandardMaterial({\n      color: 0xf0b090\n    });\n    const nose = new THREE.Mesh(noseGeo, noseMat);\n    nose.position.set(0, 0.1, 0.95);\n    nose.rotation.x = Math.PI * 0.1;\n    clone.add(nose);\n\n    // Mouth\n    const mouthGroup = new THREE.Group();\n    const upperLipGeo = new THREE.TorusGeometry(0.2, 0.04, 8, 32, Math.PI);\n    const lipMat = new THREE.MeshStandardMaterial({\n      color: 0xc4756e\n    });\n    const upperLip = new THREE.Mesh(upperLipGeo, lipMat);\n    upperLip.rotation.x = Math.PI;\n    upperLip.position.y = 0.02;\n    mouthGroup.add(upperLip);\n    const lowerLipGeo = new THREE.TorusGeometry(0.18, 0.05, 8, 32, Math.PI);\n    const lowerLip = new THREE.Mesh(lowerLipGeo, lipMat);\n    lowerLip.position.y = -0.02;\n    mouthGroup.add(lowerLip);\n\n    // Mouth interior\n    const interiorGeo = new THREE.PlaneGeometry(0.35, 0.2);\n    const interiorMat = new THREE.MeshStandardMaterial({\n      color: 0x2a0a0a,\n      side: THREE.DoubleSide\n    });\n    const interior = new THREE.Mesh(interiorGeo, interiorMat);\n    interior.position.z = -0.03;\n    interior.visible = false;\n    mouthGroup.add(interior);\n    clone.userData.mouthInterior = interior;\n    mouthGroup.position.set(0, -0.4, 0.88);\n    clone.add(mouthGroup);\n    clone.userData.mouth = mouthGroup;\n\n    // Ears\n    const earGeo = new THREE.SphereGeometry(0.15, 16, 16);\n    const earMat = new THREE.MeshStandardMaterial({\n      color: 0xf5c6a5\n    });\n    const leftEar = new THREE.Mesh(earGeo, earMat);\n    leftEar.position.set(-1, 0.2, 0);\n    leftEar.scale.set(0.4, 1, 0.5);\n    clone.add(leftEar);\n    const rightEar = new THREE.Mesh(earGeo, earMat);\n    rightEar.position.set(1, 0.2, 0);\n    rightEar.scale.set(0.4, 1, 0.5);\n    clone.add(rightEar);\n\n    // Neck & Shoulders hint\n    const neckGeo = new THREE.CylinderGeometry(0.4, 0.5, 0.8, 32);\n    const neckMat = new THREE.MeshStandardMaterial({\n      color: 0xf5c6a5\n    });\n    const neck = new THREE.Mesh(neckGeo, neckMat);\n    neck.position.y = -1.6;\n    clone.add(neck);\n\n    // Animation state\n    let breathe = 0;\n    let blink = 0;\n    let talk = 0;\n    let idleMove = 0;\n\n    // Mouse tracking\n    const mouse = {\n      x: 0,\n      y: 0\n    };\n    const onMouseMove = e => {\n      mouse.x = e.clientX / window.innerWidth * 2 - 1;\n      mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;\n    };\n    window.addEventListener('mousemove', onMouseMove);\n\n    // Animation loop\n    const animate = () => {\n      requestAnimationFrame(animate);\n      if (!cloneRef.current) return;\n      const c = cloneRef.current;\n\n      // Breathing\n      breathe += 0.015;\n      c.position.y = Math.sin(breathe) * 0.03;\n      c.scale.x = 1 + Math.sin(breathe) * 0.008;\n\n      // Idle subtle movement\n      idleMove += 0.008;\n      c.rotation.y += (mouse.x * 0.3 - c.rotation.y) * 0.05;\n      c.rotation.x += (mouse.y * 0.15 - c.rotation.x) * 0.05;\n\n      // Subtle head bob\n      c.rotation.z = Math.sin(idleMove) * 0.02;\n\n      // Eye tracking\n      if (c.userData.leftEye && c.userData.rightEye) {\n        c.userData.leftEye.rotation.y = mouse.x * 0.4;\n        c.userData.leftEye.rotation.x = -mouse.y * 0.3;\n        c.userData.rightEye.rotation.y = mouse.x * 0.4;\n        c.userData.rightEye.rotation.x = -mouse.y * 0.3;\n      }\n\n      // Blinking\n      blink++;\n      if (blink > 200 && blink < 210) {\n        const blinkAmt = 1 - Math.sin((blink - 200) / 10 * Math.PI);\n        if (c.userData.leftEye) c.userData.leftEye.scale.y = Math.max(0.1, blinkAmt);\n        if (c.userData.rightEye) c.userData.rightEye.scale.y = Math.max(0.1, blinkAmt);\n      } else {\n        if (c.userData.leftEye) c.userData.leftEye.scale.y = 1;\n        if (c.userData.rightEye) c.userData.rightEye.scale.y = 1;\n        if (blink > 210) blink = Math.random() * 100;\n      }\n\n      // Talking animation\n      if (isSpeaking && c.userData.mouth) {\n        talk += 0.4;\n        const openAmt = Math.abs(Math.sin(talk)) * 0.4;\n        c.userData.mouth.scale.y = 1 + openAmt;\n        c.userData.mouthInterior.visible = openAmt > 0.15;\n      } else {\n        if (c.userData.mouth) {\n          c.userData.mouth.scale.y = 1;\n          c.userData.mouthInterior.visible = false;\n        }\n      }\n\n      // Emotions\n      if (c.userData.leftBrow && c.userData.rightBrow) {\n        switch (cloneEmotion) {\n          case 'happy':\n            c.userData.leftBrow.position.y = 0.58;\n            c.userData.rightBrow.position.y = 0.58;\n            c.userData.leftBrow.rotation.z = -0.1;\n            c.userData.rightBrow.rotation.z = 0.1;\n            break;\n          case 'sad':\n            c.userData.leftBrow.rotation.z = -0.25;\n            c.userData.rightBrow.rotation.z = 0.25;\n            c.userData.leftBrow.position.y = 0.52;\n            c.userData.rightBrow.position.y = 0.52;\n            break;\n          case 'thinking':\n            c.userData.leftBrow.position.y = 0.58;\n            c.userData.rightBrow.position.y = 0.53;\n            c.userData.leftBrow.rotation.z = 0.2;\n            c.userData.rightBrow.rotation.z = 0;\n            break;\n          case 'surprised':\n            c.userData.leftBrow.position.y = 0.62;\n            c.userData.rightBrow.position.y = 0.62;\n            break;\n          default:\n            c.userData.leftBrow.position.y = 0.55;\n            c.userData.rightBrow.position.y = 0.55;\n            c.userData.leftBrow.rotation.z = 0.1;\n            c.userData.rightBrow.rotation.z = -0.1;\n        }\n      }\n      renderer.render(scene, camera);\n    };\n    animate();\n    const handleResize = () => {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    };\n    window.addEventListener('resize', handleResize);\n\n    // Store reference for cleanup\n    const currentMount = mountRef.current;\n    const currentRenderer = renderer;\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('resize', handleResize);\n\n      // Safe cleanup - check if element is actually a child before removing\n      if (currentMount && currentRenderer && currentRenderer.domElement) {\n        if (currentMount.contains(currentRenderer.domElement)) {\n          currentMount.removeChild(currentRenderer.domElement);\n        }\n      }\n\n      // Dispose Three.js resources\n      currentRenderer.dispose();\n    };\n  }, [phase, isSpeaking, cloneEmotion]);\n\n  // Generate clone response based on personality\n  const generateCloneResponse = async userMsg => {\n    setIsThinking(true);\n    setCloneEmotion('thinking');\n\n    // Build personality context\n    const personalityContext = cloneData.personality.map(p => `${p.category}: ${p.response}`).join('\\n');\n    const catchphrases = cloneData.speakingStyle || '';\n\n    // Create prompt that makes AI respond like the user\n    const clonePrompt = `B·∫°n l√† ${cloneData.name}, m·ªôt nh√¢n b·∫£n AI c·ªßa ng∆∞·ªùi d√πng. \nƒê√¢y l√† t√≠nh c√°ch v√† c√°ch n√≥i c·ªßa b·∫°n:\n${personalityContext}\n\nPhong c√°ch n√≥i chuy·ªán m·∫´u:\n${catchphrases}\n\nQUAN TR·ªåNG: H√£y tr·∫£ l·ªùi ƒê√öNG nh∆∞ c√°ch ng∆∞·ªùi d√πng s·∫Ω tr·∫£ l·ªùi. S·ª≠ d·ª•ng c√°c c√¢u c·ª≠a mi·ªáng, gi·ªçng ƒëi·ªáu v√† t√≠nh c√°ch ƒë√£ ƒë∆∞·ª£c training.\nKh√¥ng n√≥i \"T√¥i l√† AI\" hay \"T√¥i kh√¥ng th·ªÉ\". H√£y tr·∫£ l·ªùi nh∆∞ m·ªôt con ng∆∞·ªùi th·ª±c s·ª± v·ªõi t√≠nh c√°ch ƒë√£ cho.\n\nL·ªãch s·ª≠ tr√≤ chuy·ªán:\n${messages.slice(-6).map(m => `${m.role === 'user' ? 'Ng∆∞·ªùi d√πng' : cloneData.name}: ${m.content}`).join('\\n')}\n\nNg∆∞·ªùi d√πng: ${userMsg}\n${cloneData.name}:`;\n    try {\n      const response = await axios.post('http://localhost:8000/api/chat', {\n        text: clonePrompt\n      });\n      setIsThinking(false);\n      return response.data.ai_response;\n    } catch (error) {\n      setIsThinking(false);\n\n      // Fallback: generate response based on personality locally\n      const styles = cloneData.speakingStyle.split('\\n').filter(s => s.trim());\n      const randomStyle = styles[Math.floor(Math.random() * styles.length)] || 'Oke';\n      return `${randomStyle} ${userMsg.includes('?') ? 'ƒê·ªÉ tao nghƒ© xem...' : ''}`;\n    }\n  };\n\n  // Detect emotion from text\n  const detectEmotion = text => {\n    const lower = text.toLowerCase();\n    if (lower.match(/vui|haha|üòä|üòÑ|tuy·ªát|hay|th√≠ch/)) return 'happy';\n    if (lower.match(/bu·ªìn|üò¢|üò≠|ch√°n|m·ªát/)) return 'sad';\n    if (lower.match(/g√¨|sao|nh∆∞ th·∫ø n√†o|\\?/)) return 'thinking';\n    if (lower.match(/wow|·ªì|üòÆ|th·∫≠t sao/)) return 'surprised';\n    return 'neutral';\n  };\n\n  // Send message\n  const sendMessage = async () => {\n    if (!inputText.trim() || isThinking) return;\n    const userMsg = inputText.trim();\n    setInputText('');\n    setMessages(prev => [...prev, {\n      role: 'user',\n      content: userMsg\n    }]);\n\n    // Get clone response\n    const cloneResponse = await generateCloneResponse(userMsg);\n\n    // Detect and set emotion\n    const emotion = detectEmotion(cloneResponse);\n    setCloneEmotion(emotion);\n\n    // Update mood based on conversation\n    if (emotion === 'happy') setCloneMood(prev => Math.min(100, prev + 5));\n    if (emotion === 'sad') setCloneMood(prev => Math.max(0, prev - 5));\n    setMessages(prev => [...prev, {\n      role: 'clone',\n      content: cloneResponse\n    }]);\n\n    // Speak the response\n    speakResponse(cloneResponse);\n  };\n\n  // Text-to-speech\n  const speakResponse = text => {\n    setIsSpeaking(true);\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'vi-VN';\n    utterance.rate = 1.0;\n    utterance.pitch = 1.0;\n    utterance.onend = () => {\n      setIsSpeaking(false);\n      setCloneEmotion('neutral');\n    };\n    window.speechSynthesis.speak(utterance);\n  };\n\n  // Voice input\n  const startListening = () => {\n    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\n    recognition.lang = 'vi-VN';\n    recognition.continuous = false;\n    recognition.onstart = () => setIsListening(true);\n    recognition.onresult = e => {\n      const text = e.results[0][0].transcript;\n      setInputText(text);\n      setIsListening(false);\n    };\n    recognition.onerror = () => setIsListening(false);\n    recognition.start();\n  };\n\n  // Clone Screen\n  const CloneScreen = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '100vh',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mountRef,\n      style: {\n        width: '100%',\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1041,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.cloneInfo,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.cloneName,\n        children: [\"\\uD83E\\uDDEC \", cloneData.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1045,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.moodBar,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"T\\xE2m tr\\u1EA1ng:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1049,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.moodTrack,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.moodFill,\n              width: `${cloneMood}%`,\n              background: cloneMood > 60 ? '#4ECDC4' : cloneMood > 30 ? '#FFB84D' : '#FF6B6B'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1051,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1050,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: cloneEmotion === 'happy' ? 'üòä' : cloneEmotion === 'sad' ? 'üò¢' : cloneEmotion === 'thinking' ? 'ü§î' : 'üòê'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1057,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1048,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1044,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.chatPanel,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chatHeader,\n        children: [\"\\uD83D\\uDCAC Tr\\xF2 chuy\\u1EC7n v\\u1EDBi \", cloneData.name, isThinking && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.thinkingBadge,\n          children: \"\\uD83E\\uDD14 \\u0110ang suy ngh\\u0129...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1065,\n          columnNumber: 26\n        }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.speakingBadge,\n          children: \"\\uD83D\\uDD0A \\u0110ang n\\xF3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1066,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1063,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chatMessages,\n        children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.emptyChat,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83D\\uDC4B Ch\\xE0o! T\\xF4i l\\xE0 \", cloneData.name, \", nh\\xE2n b\\u1EA3n c\\u1EE7a b\\u1EA1n.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1072,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"H\\xE3y n\\xF3i chuy\\u1EC7n v\\u1EDBi t\\xF4i nh\\u01B0 n\\xF3i chuy\\u1EC7n v\\u1EDBi ch\\xEDnh m\\xECnh!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1073,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1071,\n          columnNumber: 13\n        }, this), messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.message,\n            alignSelf: msg.role === 'user' ? 'flex-end' : 'flex-start',\n            background: msg.role === 'user' ? '#ff7043' : 'rgba(255,255,255,0.1)'\n          },\n          children: msg.content\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1077,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1069,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chatInput,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && sendMessage(),\n          placeholder: `N√≥i g√¨ ƒë√≥ v·ªõi ${cloneData.name}...`,\n          style: styles.textInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1091,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startListening,\n          disabled: isListening,\n          style: {\n            ...styles.iconBtn,\n            background: isListening ? '#FF6B6B' : '#4ECDC4'\n          },\n          children: \"\\uD83C\\uDFA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1099,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendMessage,\n          disabled: isThinking || !inputText.trim(),\n          style: styles.iconBtn,\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1090,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.emotionBar,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            opacity: 0.7\n          },\n          children: \"Bi\\u1EC3u c\\u1EA3m:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1120,\n          columnNumber: 11\n        }, this), ['neutral', 'happy', 'sad', 'thinking', 'surprised'].map(em => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCloneEmotion(em),\n          style: {\n            ...styles.emotionBtn,\n            border: cloneEmotion === em ? '2px solid #ff7043' : '2px solid transparent'\n          },\n          children: [em === 'neutral' && 'üòê', em === 'happy' && 'üòä', em === 'sad' && 'üò¢', em === 'thinking' && 'ü§î', em === 'surprised' && 'üòÆ']\n        }, em, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1122,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1062,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setPhase('welcome');\n        setMessages([]);\n        setCloneData({\n          name: '',\n          personality: [],\n          speakingStyle: '',\n          memories: [],\n          faceData: null,\n          faceImage: null,\n          voiceProfile: null\n        });\n        setCurrentQuestion(0);\n        setPersonalityQuestions(prev => prev.map(q => ({\n          ...q,\n          a: ''\n        })));\n        setSampleConvo('');\n        setCatchphrases('');\n        setCapturedImage(null);\n      },\n      style: styles.resetBtn,\n      children: \"\\uD83D\\uDD04 T\\u1EA1o Clone m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1141,\n      columnNumber: 7\n    }, this), capturedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.faceAvatarOverlay,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: capturedImage,\n        alt: \"Your face\",\n        style: {\n          ...styles.faceAvatarImage,\n          animation: isSpeaking ? 'talking 0.3s ease-in-out infinite' : isThinking ? 'thinking 1s ease-in-out infinite' : 'breathing 3s ease-in-out infinite',\n          filter: cloneEmotion === 'sad' ? 'saturate(0.7) brightness(0.9)' : cloneEmotion === 'happy' ? 'saturate(1.2) brightness(1.1)' : 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1160,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.emotionOverlay,\n        children: [cloneEmotion === 'happy' && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.emotionEmoji,\n          children: \"\\uD83D\\uDE0A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1172,\n          columnNumber: 42\n        }, this), cloneEmotion === 'sad' && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.emotionEmoji,\n          children: \"\\uD83D\\uDE22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1173,\n          columnNumber: 40\n        }, this), cloneEmotion === 'thinking' && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.emotionEmoji,\n          children: \"\\uD83E\\uDD14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1174,\n          columnNumber: 45\n        }, this), cloneEmotion === 'surprised' && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.emotionEmoji,\n          children: \"\\uD83D\\uDE2E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1175,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1171,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1159,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1040,\n    columnNumber: 5\n  }, this);\n\n  // Render based on phase\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [phase === 'welcome' && renderWelcome(), phase === 'facescan' && renderFaceScan(), phase === 'training' && renderTraining(), phase === 'personality' && renderPersonality(), phase === 'clone' && /*#__PURE__*/_jsxDEV(CloneScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1189,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true);\n};\n\n// Styles\n_s(HumanClone, \"VWIna7YsLhE9mLaJ80Nlri80vNU=\");\n_c = HumanClone;\nconst styles = {\n  fullScreen: {\n    width: '100%',\n    height: '100vh',\n    background: 'linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontFamily: \"'Segoe UI', sans-serif\",\n    color: 'white'\n  },\n  welcomeBox: {\n    textAlign: 'center',\n    padding: '50px',\n    maxWidth: '800px'\n  },\n  glowOrb: {\n    fontSize: '80px',\n    marginBottom: '20px',\n    animation: 'pulse 2s infinite'\n  },\n  title: {\n    fontSize: '3rem',\n    marginBottom: '15px',\n    background: 'linear-gradient(90deg, #ff9a56, #ff7043, #ff9a56)',\n    WebkitBackgroundClip: 'text',\n    WebkitTextFillColor: 'transparent'\n  },\n  subtitle: {\n    fontSize: '1.3rem',\n    opacity: 0.8,\n    marginBottom: '40px'\n  },\n  featureGrid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',\n    gap: '20px',\n    marginBottom: '40px'\n  },\n  featureCard: {\n    background: 'rgba(255,255,255,0.05)',\n    padding: '25px 15px',\n    borderRadius: '15px',\n    backdropFilter: 'blur(10px)'\n  },\n  featureIcon: {\n    fontSize: '40px',\n    display: 'block',\n    marginBottom: '10px'\n  },\n  nameInput: {\n    width: '100%',\n    maxWidth: '400px',\n    padding: '15px 25px',\n    fontSize: '1.1rem',\n    background: 'rgba(255,255,255,0.1)',\n    border: '2px solid rgba(255,255,255,0.2)',\n    borderRadius: '30px',\n    color: 'white',\n    outline: 'none',\n    marginBottom: '20px',\n    textAlign: 'center',\n    boxSizing: 'border-box',\n    pointerEvents: 'auto',\n    zIndex: 100,\n    position: 'relative'\n  },\n  primaryBtn: {\n    padding: '15px 40px',\n    fontSize: '1.2rem',\n    background: 'linear-gradient(135deg, #ff9a56 0%, #ff7043 100%)',\n    color: 'white',\n    border: 'none',\n    borderRadius: '30px',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n    transition: 'all 0.3s'\n  },\n  secondaryBtn: {\n    padding: '12px 30px',\n    fontSize: '1rem',\n    background: 'rgba(255,255,255,0.1)',\n    color: 'white',\n    border: '2px solid rgba(255,255,255,0.3)',\n    borderRadius: '25px',\n    cursor: 'pointer'\n  },\n  trainingBox: {\n    background: 'rgba(255,255,255,0.05)',\n    padding: '40px',\n    borderRadius: '20px',\n    maxWidth: '600px',\n    width: '90%',\n    backdropFilter: 'blur(10px)'\n  },\n  progressBar: {\n    height: '8px',\n    background: 'rgba(255,255,255,0.1)',\n    borderRadius: '4px',\n    marginBottom: '30px',\n    overflow: 'hidden'\n  },\n  progressFill: {\n    height: '100%',\n    background: 'linear-gradient(90deg, #ff9a56, #ff7043)',\n    transition: 'width 0.5s'\n  },\n  phaseTitle: {\n    fontSize: '1.8rem',\n    marginBottom: '10px'\n  },\n  questionCount: {\n    opacity: 0.7,\n    marginBottom: '30px'\n  },\n  questionCard: {\n    background: 'rgba(255,255,255,0.05)',\n    padding: '25px',\n    borderRadius: '15px',\n    marginBottom: '25px'\n  },\n  question: {\n    fontSize: '1.2rem',\n    marginBottom: '15px'\n  },\n  answerInput: {\n    width: '100%',\n    padding: '15px',\n    fontSize: '1rem',\n    background: 'rgba(255,255,255,0.1)',\n    border: '1px solid rgba(255,255,255,0.2)',\n    borderRadius: '10px',\n    color: 'white',\n    outline: 'none',\n    resize: 'vertical',\n    boxSizing: 'border-box',\n    pointerEvents: 'auto',\n    zIndex: 100,\n    position: 'relative'\n  },\n  btnGroup: {\n    display: 'flex',\n    gap: '15px',\n    justifyContent: 'center'\n  },\n  inputSection: {\n    marginBottom: '25px'\n  },\n  label: {\n    display: 'block',\n    marginBottom: '10px',\n    opacity: 0.9\n  },\n  cloneInfo: {\n    position: 'absolute',\n    top: 20,\n    left: 20,\n    background: 'rgba(10,10,26,0.9)',\n    padding: '15px 25px',\n    borderRadius: '15px',\n    backdropFilter: 'blur(10px)'\n  },\n  cloneName: {\n    fontSize: '1.3rem',\n    fontWeight: 'bold',\n    marginBottom: '10px',\n    color: '#ff9a56'\n  },\n  moodBar: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px',\n    fontSize: '14px'\n  },\n  moodTrack: {\n    width: '100px',\n    height: '8px',\n    background: 'rgba(255,255,255,0.1)',\n    borderRadius: '4px',\n    overflow: 'hidden'\n  },\n  moodFill: {\n    height: '100%',\n    transition: 'all 0.5s'\n  },\n  chatPanel: {\n    position: 'absolute',\n    bottom: 20,\n    right: 20,\n    width: '400px',\n    maxHeight: '70vh',\n    background: 'rgba(10,10,26,0.95)',\n    borderRadius: '20px',\n    padding: '20px',\n    backdropFilter: 'blur(10px)',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  chatHeader: {\n    fontSize: '1.1rem',\n    fontWeight: 'bold',\n    marginBottom: '15px',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px',\n    flexWrap: 'wrap'\n  },\n  thinkingBadge: {\n    fontSize: '12px',\n    background: 'rgba(255,184,77,0.2)',\n    padding: '4px 10px',\n    borderRadius: '10px',\n    color: '#FFB84D'\n  },\n  speakingBadge: {\n    fontSize: '12px',\n    background: 'rgba(78,205,196,0.2)',\n    padding: '4px 10px',\n    borderRadius: '10px',\n    color: '#4ECDC4'\n  },\n  chatMessages: {\n    flex: 1,\n    overflowY: 'auto',\n    marginBottom: '15px',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '10px',\n    maxHeight: '300px',\n    padding: '10px',\n    background: 'rgba(255,255,255,0.03)',\n    borderRadius: '10px'\n  },\n  emptyChat: {\n    textAlign: 'center',\n    opacity: 0.7,\n    padding: '20px'\n  },\n  message: {\n    padding: '10px 15px',\n    borderRadius: '15px',\n    maxWidth: '85%',\n    fontSize: '14px'\n  },\n  chatInput: {\n    display: 'flex',\n    gap: '10px'\n  },\n  textInput: {\n    flex: 1,\n    padding: '12px 15px',\n    borderRadius: '25px',\n    border: 'none',\n    background: 'rgba(255,255,255,0.1)',\n    color: 'white',\n    outline: 'none',\n    fontSize: '14px'\n  },\n  iconBtn: {\n    width: '45px',\n    height: '45px',\n    borderRadius: '50%',\n    border: 'none',\n    background: '#ff7043',\n    color: 'white',\n    fontSize: '18px',\n    cursor: 'pointer'\n  },\n  emotionBar: {\n    marginTop: '15px',\n    display: 'flex',\n    gap: '8px',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '14px'\n  },\n  emotionBtn: {\n    width: '35px',\n    height: '35px',\n    borderRadius: '50%',\n    background: 'rgba(255,255,255,0.1)',\n    border: '2px solid transparent',\n    cursor: 'pointer',\n    fontSize: '18px'\n  },\n  resetBtn: {\n    position: 'absolute',\n    top: 20,\n    right: 20,\n    padding: '10px 20px',\n    background: 'rgba(255,255,255,0.1)',\n    border: '2px solid rgba(255,255,255,0.2)',\n    borderRadius: '25px',\n    color: 'white',\n    cursor: 'pointer',\n    fontSize: '14px'\n  },\n  // Face Scan Styles\n  faceScanBox: {\n    textAlign: 'center',\n    padding: '40px',\n    maxWidth: '600px',\n    width: '90%'\n  },\n  cameraContainer: {\n    position: 'relative',\n    width: '100%',\n    maxWidth: '400px',\n    aspectRatio: '4/3',\n    margin: '30px auto',\n    borderRadius: '20px',\n    overflow: 'hidden',\n    background: 'rgba(0,0,0,0.5)',\n    border: '3px solid rgba(255,255,255,0.2)'\n  },\n  videoPreview: {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover'\n  },\n  cameraPlaceholder: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%',\n    opacity: 0.5\n  },\n  faceGuide: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    pointerEvents: 'none'\n  },\n  faceOval: {\n    width: '200px',\n    height: '260px',\n    border: '3px dashed rgba(255,255,255,0.5)',\n    borderRadius: '50%'\n  },\n  capturedPreview: {\n    position: 'relative',\n    width: '100%',\n    height: '100%'\n  },\n  capturedImage: {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover'\n  },\n  checkMark: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    fontSize: '80px',\n    textShadow: '0 0 30px rgba(0,255,0,0.5)'\n  },\n  scanStatus: {\n    fontSize: '1rem',\n    marginBottom: '20px',\n    minHeight: '24px'\n  },\n  captureBtn: {\n    padding: '20px 50px',\n    fontSize: '1.3rem',\n    background: 'linear-gradient(135deg, #00d9ff 0%, #00ff88 100%)',\n    color: '#1a1a2e',\n    border: 'none',\n    borderRadius: '50px',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n    boxShadow: '0 10px 40px rgba(0, 217, 255, 0.4)',\n    animation: 'pulse 2s infinite'\n  },\n  skipBtn: {\n    marginTop: '30px',\n    padding: '10px 25px',\n    background: 'transparent',\n    border: 'none',\n    color: 'rgba(255,255,255,0.5)',\n    cursor: 'pointer',\n    fontSize: '0.9rem',\n    textDecoration: 'underline'\n  },\n  // Face Avatar in Clone Screen\n  faceAvatarOverlay: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 10,\n    pointerEvents: 'none'\n  },\n  faceAvatarImage: {\n    width: '300px',\n    height: '300px',\n    borderRadius: '50%',\n    objectFit: 'cover',\n    border: '5px solid rgba(255,255,255,0.3)',\n    boxShadow: '0 20px 60px rgba(0,0,0,0.5), 0 0 100px rgba(255,112,67,0.3)'\n  },\n  emotionOverlay: {\n    position: 'absolute',\n    bottom: '-10px',\n    right: '-10px'\n  },\n  emotionEmoji: {\n    fontSize: '50px',\n    filter: 'drop-shadow(0 5px 15px rgba(0,0,0,0.5))'\n  }\n};\n\n// Add keyframe animations via style tag (only once)\nif (!document.getElementById('humanclone-animations')) {\n  const styleSheet = document.createElement('style');\n  styleSheet.id = 'humanclone-animations';\n  styleSheet.textContent = `\n    @keyframes pulse {\n      0%, 100% { transform: scale(1); opacity: 1; }\n      50% { transform: scale(1.05); opacity: 0.8; }\n    }\n    @keyframes talking {\n      0%, 100% { transform: translate(-50%, -50%) scale(1); }\n      50% { transform: translate(-50%, -50%) scale(1.02); }\n    }\n    @keyframes thinking {\n      0%, 100% { transform: translate(-50%, -50%) rotate(-2deg); }\n      50% { transform: translate(-50%, -50%) rotate(2deg); }\n    }\n    @keyframes breathing {\n      0%, 100% { transform: translate(-50%, -50%) scale(1); }\n      50% { transform: translate(-50%, -50%) scale(1.02); }\n    }\n  `;\n  document.head.appendChild(styleSheet);\n}\nexport default HumanClone;\nvar _c;\n$RefreshReg$(_c, \"HumanClone\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","THREE","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","HumanClone","_s","phase","setPhase","cloneData","setCloneData","name","personality","speakingStyle","memories","faceData","faceImage","voiceProfile","cameraActive","setCameraActive","capturedImage","setCapturedImage","scanStatus","setScanStatus","isScanning","setIsScanning","scanProgress","setScanProgress","webcamRef","photoCanvasRef","faceFeatures","setFaceFeatures","skinTone","hairColor","eyeColor","faceShape","faceWidth","faceLength","eyeSize","eyeDistance","noseSize","mouthWidth","browThickness","hasGlasses","hairStyle","trainingMessages","setTrainingMessages","personalityQuestions","setPersonalityQuestions","q","a","category","currentQuestion","setCurrentQuestion","messages","setMessages","inputText","setInputText","isThinking","setIsThinking","isSpeaking","setIsSpeaking","isListening","setIsListening","cloneEmotion","setCloneEmotion","cloneMood","setCloneMood","mountRef","videoRef","canvasRef","cloneRef","rendererRef","nameInputRef","answerInputRef","handleNameChange","e","prev","target","value","handleAnswer","answer","updated","nextQuestion","length","map","response","sampleConvo","setSampleConvo","catchphrases","setCatchphrases","finishSetup","post","split","filter","p","trim","console","log","startCamera","stream","navigator","mediaDevices","getUserMedia","video","width","ideal","height","facingMode","current","srcObject","play","err","error","stopCamera","tracks","getTracks","forEach","track","stop","capturePhoto","canvas","videoWidth","videoHeight","ctx","getContext","translate","scale","drawImage","imageData","toDataURL","analyzeFace","getImageData","data","progressInterval","setInterval","clearInterval","centerX","Math","floor","centerY","sampleSize","totalR","totalG","totalB","count","y","x","idx","r","g","b","avgR","avgG","avgB","hairR","hairG","hairB","hairCount","avgHairR","avgHairG","avgHairB","totalBrightness","i","avgBrightness","faceShapes","randomShape","random","analyzedFeatures","setTimeout","retakePhoto","renderWelcome","style","styles","fullScreen","children","welcomeBox","glowOrb","fileName","_jsxFileName","lineNumber","columnNumber","title","subtitle","featureGrid","featureCard","featureIcon","ref","type","placeholder","onChange","nameInput","autoFocus","onClick","disabled","primaryBtn","opacity","renderFaceScan","faceScanBox","phaseTitle","cameraContainer","videoPreview","transform","display","autoPlay","playsInline","muted","cameraPlaceholder","fontSize","faceGuide","faceOval","scanLine","capturedPreview","src","alt","scanningOverlay","scanningEffect","checkMark","analysisProgress","progressLabel","progressBarBg","progressBarFill","progressPercent","analysisResults","marginBottom","color","featureList","featureItem","colorSwatch","background","featureValue","btnGroup","captureBtn","secondaryBtn","skipBtn","renderTraining","progress","trainingBox","progressBar","progressFill","questionCount","questionCard","question","answerInput","rows","renderPersonality","inputSection","label","minHeight","scene","Scene","Color","camera","PerspectiveCamera","window","innerWidth","innerHeight","position","set","renderer","WebGLRenderer","antialias","setSize","shadowMap","enabled","appendChild","domElement","keyLight","SpotLight","castShadow","add","fillLight","DirectionalLight","rimLight","ambient","AmbientLight","clone","Group","headGeo","SphereGeometry","headMat","MeshStandardMaterial","roughness","metalness","head","Mesh","userData","hairGeo","PI","hairMat","hair","createEye","eyeGroup","whiteGeo","whiteMat","white","irisGeo","CircleGeometry","irisMat","iris","z","pupilGeo","pupilMat","MeshBasicMaterial","pupil","hlGeo","hlMat","hl","leftEye","rightEye","browGeo","BoxGeometry","browMat","leftBrow","rotation","rightBrow","noseGeo","ConeGeometry","noseMat","nose","mouthGroup","upperLipGeo","TorusGeometry","lipMat","upperLip","lowerLipGeo","lowerLip","interiorGeo","PlaneGeometry","interiorMat","side","DoubleSide","interior","visible","mouthInterior","mouth","earGeo","earMat","leftEar","rightEar","neckGeo","CylinderGeometry","neckMat","neck","breathe","blink","talk","idleMove","mouse","onMouseMove","clientX","clientY","addEventListener","animate","requestAnimationFrame","c","sin","blinkAmt","max","openAmt","abs","render","handleResize","aspect","updateProjectionMatrix","currentMount","currentRenderer","removeEventListener","contains","removeChild","dispose","generateCloneResponse","userMsg","personalityContext","join","clonePrompt","slice","m","role","content","text","ai_response","s","randomStyle","includes","detectEmotion","lower","toLowerCase","match","sendMessage","cloneResponse","emotion","min","speakResponse","utterance","SpeechSynthesisUtterance","lang","rate","pitch","onend","speechSynthesis","speak","startListening","recognition","SpeechRecognition","webkitSpeechRecognition","continuous","onstart","onresult","results","transcript","onerror","start","CloneScreen","cloneInfo","cloneName","moodBar","moodTrack","moodFill","chatPanel","chatHeader","thinkingBadge","speakingBadge","chatMessages","emptyChat","msg","message","alignSelf","chatInput","onKeyPress","key","textInput","iconBtn","emotionBar","em","emotionBtn","border","resetBtn","faceAvatarOverlay","faceAvatarImage","animation","emotionOverlay","emotionEmoji","_c","alignItems","justifyContent","fontFamily","textAlign","padding","maxWidth","WebkitBackgroundClip","WebkitTextFillColor","gridTemplateColumns","gap","borderRadius","backdropFilter","outline","boxSizing","pointerEvents","zIndex","cursor","fontWeight","transition","overflow","resize","top","left","bottom","right","maxHeight","flexDirection","flexWrap","flex","overflowY","marginTop","aspectRatio","margin","objectFit","textShadow","boxShadow","textDecoration","document","getElementById","styleSheet","createElement","id","textContent","$RefreshReg$"],"sources":["D:/IZ/AIClone/frontend/src/HumanClone.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport * as THREE from 'three';\r\nimport axios from 'axios';\r\n\r\nconst HumanClone = () => {\r\n  // Core states\r\n  const [phase, setPhase] = useState('welcome'); // welcome, facescan, analyzing, training, personality, clone\r\n  const [cloneData, setCloneData] = useState({\r\n    name: '',\r\n    personality: [],\r\n    speakingStyle: '',\r\n    memories: [],\r\n    faceData: null,\r\n    faceImage: null,\r\n    voiceProfile: null,\r\n  });\r\n\r\n  // Face scan states\r\n  const [cameraActive, setCameraActive] = useState(false);\r\n  const [capturedImage, setCapturedImage] = useState(null);\r\n  const [scanStatus, setScanStatus] = useState('');\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [scanProgress, setScanProgress] = useState(0);\r\n  const webcamRef = useRef(null);\r\n  const photoCanvasRef = useRef(null);\r\n  \r\n  // Face analysis data - extracted from photo\r\n  const [faceFeatures, setFaceFeatures] = useState({\r\n    skinTone: '#f5c6a5',      // M√†u da\r\n    hairColor: '#1a1a1a',     // M√†u t√≥c\r\n    eyeColor: '#4a3728',      // M√†u m·∫Øt\r\n    faceShape: 'oval',        // H√¨nh d√°ng m·∫∑t: oval, round, square, heart\r\n    faceWidth: 1.0,           // ƒê·ªô r·ªông m·∫∑t\r\n    faceLength: 1.2,          // ƒê·ªô d√†i m·∫∑t\r\n    eyeSize: 0.2,             // K√≠ch th∆∞·ªõc m·∫Øt\r\n    eyeDistance: 0.35,        // Kho·∫£ng c√°ch gi·ªØa 2 m·∫Øt\r\n    noseSize: 0.15,           // K√≠ch th∆∞·ªõc m≈©i\r\n    mouthWidth: 0.3,          // ƒê·ªô r·ªông mi·ªáng\r\n    browThickness: 0.08,      // ƒê·ªô d√†y l√¥ng m√†y\r\n    hasGlasses: false,        // C√≥ ƒëeo k√≠nh kh√¥ng\r\n    hairStyle: 'short',       // Ki·ªÉu t√≥c: short, long, bald\r\n  });\r\n\r\n  // Training data\r\n  const [trainingMessages, setTrainingMessages] = useState([]);\r\n  const [personalityQuestions, setPersonalityQuestions] = useState([\r\n    { q: 'B·∫°n m√¥ t·∫£ t√≠nh c√°ch c·ªßa m√¨nh nh∆∞ th·∫ø n√†o?', a: '', category: 'personality' },\r\n    { q: 'Khi vui b·∫°n th∆∞·ªùng n√≥i g√¨?', a: '', category: 'emotion' },\r\n    { q: 'Khi bu·ªìn b·∫°n th∆∞·ªùng l√†m g√¨?', a: '', category: 'emotion' },\r\n    { q: 'C√¢u n√≥i c·ª≠a mi·ªáng c·ªßa b·∫°n l√† g√¨?', a: '', category: 'speech' },\r\n    { q: 'B·∫°n th√≠ch n√≥i chuy·ªán ki·ªÉu n√†o? (h√†i h∆∞·ªõc, nghi√™m t√∫c, th√¢n thi·ªán...)', a: '', category: 'style' },\r\n    { q: 'S·ªü th√≠ch c·ªßa b·∫°n l√† g√¨?', a: '', category: 'interest' },\r\n    { q: 'B·∫°n gh√©t ƒëi·ªÅu g√¨ nh·∫•t?', a: '', category: 'dislike' },\r\n    { q: 'M·ª•c ti√™u trong cu·ªôc s·ªëng c·ªßa b·∫°n?', a: '', category: 'goal' },\r\n  ]);\r\n  const [currentQuestion, setCurrentQuestion] = useState(0);\r\n\r\n  // Clone interaction\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputText, setInputText] = useState('');\r\n  const [isThinking, setIsThinking] = useState(false);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [cloneEmotion, setCloneEmotion] = useState('neutral');\r\n  const [cloneMood, setCloneMood] = useState(70); // 0-100 mood meter\r\n\r\n  // 3D refs\r\n  const mountRef = useRef(null);\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const cloneRef = useRef(null);\r\n  const rendererRef = useRef(null);\r\n  \r\n  // Input refs to maintain focus\r\n  const nameInputRef = useRef(null);\r\n  const answerInputRef = useRef(null);\r\n\r\n  // Handle name change\r\n  const handleNameChange = (e) => {\r\n    setCloneData(prev => ({ ...prev, name: e.target.value }));\r\n  };\r\n\r\n  // Handle answer change in training\r\n  const handleAnswer = (answer) => {\r\n    const updated = [...personalityQuestions];\r\n    updated[currentQuestion].a = answer;\r\n    setPersonalityQuestions(updated);\r\n  };\r\n\r\n  const nextQuestion = () => {\r\n    if (currentQuestion < personalityQuestions.length - 1) {\r\n      setCurrentQuestion(currentQuestion + 1);\r\n    } else {\r\n      // Compile personality\r\n      const personality = personalityQuestions.map(q => ({\r\n        category: q.category,\r\n        response: q.a,\r\n      }));\r\n      setCloneData(prev => ({ ...prev, personality }));\r\n      setPhase('personality');\r\n    }\r\n  };\r\n\r\n  // Speaking style states (moved to parent)\r\n  const [sampleConvo, setSampleConvo] = useState('');\r\n  const [catchphrases, setCatchphrases] = useState('');\r\n\r\n  const finishSetup = async () => {\r\n    try {\r\n      await axios.post('http://localhost:8000/api/clone/setup', {\r\n        name: cloneData.name,\r\n        personality: cloneData.personality,\r\n        speakingStyle: sampleConvo,\r\n        catchphrases: catchphrases.split('\\n').filter(p => p.trim()),\r\n        faceImage: capturedImage,\r\n      });\r\n    } catch (e) {\r\n      console.log('Backend not available, using local mode');\r\n    }\r\n\r\n    setCloneData(prev => ({\r\n      ...prev,\r\n      speakingStyle: sampleConvo,\r\n      faceImage: capturedImage,\r\n      memories: [],\r\n    }));\r\n    setPhase('clone');\r\n  };\r\n\r\n  // ============ CAMERA FUNCTIONS ============\r\n  const startCamera = async () => {\r\n    try {\r\n      setScanStatus('ƒêang m·ªü camera...');\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { \r\n          width: { ideal: 640 },\r\n          height: { ideal: 480 },\r\n          facingMode: 'user'\r\n        } \r\n      });\r\n      if (webcamRef.current) {\r\n        webcamRef.current.srcObject = stream;\r\n        webcamRef.current.play();\r\n        setCameraActive(true);\r\n        setScanStatus('H√£y ƒë∆∞a khu√¥n m·∫∑t v√†o khung h√¨nh');\r\n      }\r\n    } catch (err) {\r\n      console.error('Camera error:', err);\r\n      setScanStatus('Kh√¥ng th·ªÉ m·ªü camera. Vui l√≤ng cho ph√©p truy c·∫≠p camera.');\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (webcamRef.current && webcamRef.current.srcObject) {\r\n      const tracks = webcamRef.current.srcObject.getTracks();\r\n      tracks.forEach(track => track.stop());\r\n      webcamRef.current.srcObject = null;\r\n    }\r\n    setCameraActive(false);\r\n  };\r\n\r\n  const capturePhoto = () => {\r\n    if (!webcamRef.current || !photoCanvasRef.current) return;\r\n    \r\n    const video = webcamRef.current;\r\n    const canvas = photoCanvasRef.current;\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n    \r\n    const ctx = canvas.getContext('2d');\r\n    // Mirror the image\r\n    ctx.translate(canvas.width, 0);\r\n    ctx.scale(-1, 1);\r\n    ctx.drawImage(video, 0, 0);\r\n    \r\n    const imageData = canvas.toDataURL('image/png');\r\n    setCapturedImage(imageData);\r\n    setCloneData(prev => ({ ...prev, faceImage: imageData }));\r\n    setScanStatus('üì∏ ƒê√£ ch·ª•p! ƒêang ph√¢n t√≠ch khu√¥n m·∫∑t...');\r\n    stopCamera();\r\n    \r\n    // Start face analysis\r\n    analyzeFace(canvas);\r\n  };\r\n\r\n  // ============ FACE ANALYSIS ============\r\n  const analyzeFace = async (canvas) => {\r\n    setIsScanning(true);\r\n    setScanProgress(0);\r\n    \r\n    const ctx = canvas.getContext('2d');\r\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    const data = imageData.data;\r\n    \r\n    // Simulate scanning progress\r\n    const progressInterval = setInterval(() => {\r\n      setScanProgress(prev => {\r\n        if (prev >= 90) {\r\n          clearInterval(progressInterval);\r\n          return 90;\r\n        }\r\n        return prev + 10;\r\n      });\r\n    }, 200);\r\n\r\n    // Analyze skin tone from center of image (face area)\r\n    const centerX = Math.floor(canvas.width / 2);\r\n    const centerY = Math.floor(canvas.height / 2);\r\n    const sampleSize = 50;\r\n    \r\n    let totalR = 0, totalG = 0, totalB = 0, count = 0;\r\n    \r\n    // Sample pixels from face area\r\n    for (let y = centerY - sampleSize; y < centerY + sampleSize; y++) {\r\n      for (let x = centerX - sampleSize; x < centerX + sampleSize; x++) {\r\n        if (x >= 0 && x < canvas.width && y >= 0 && y < canvas.height) {\r\n          const idx = (y * canvas.width + x) * 4;\r\n          const r = data[idx];\r\n          const g = data[idx + 1];\r\n          const b = data[idx + 2];\r\n          \r\n          // Filter for skin-like colors\r\n          if (r > 60 && g > 40 && b > 20 && r > g && r > b) {\r\n            totalR += r;\r\n            totalG += g;\r\n            totalB += b;\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Calculate average skin tone\r\n    let skinTone = '#f5c6a5';\r\n    if (count > 0) {\r\n      const avgR = Math.floor(totalR / count);\r\n      const avgG = Math.floor(totalG / count);\r\n      const avgB = Math.floor(totalB / count);\r\n      skinTone = `rgb(${avgR}, ${avgG}, ${avgB})`;\r\n    }\r\n    \r\n    // Analyze hair color from top of image\r\n    let hairR = 0, hairG = 0, hairB = 0, hairCount = 0;\r\n    for (let y = 0; y < canvas.height * 0.2; y++) {\r\n      for (let x = canvas.width * 0.3; x < canvas.width * 0.7; x++) {\r\n        const idx = (Math.floor(y) * canvas.width + Math.floor(x)) * 4;\r\n        hairR += data[idx];\r\n        hairG += data[idx + 1];\r\n        hairB += data[idx + 2];\r\n        hairCount++;\r\n      }\r\n    }\r\n    \r\n    let hairColor = '#1a1a1a';\r\n    if (hairCount > 0) {\r\n      const avgHairR = Math.floor(hairR / hairCount);\r\n      const avgHairG = Math.floor(hairG / hairCount);\r\n      const avgHairB = Math.floor(hairB / hairCount);\r\n      hairColor = `rgb(${avgHairR}, ${avgHairG}, ${avgHairB})`;\r\n    }\r\n    \r\n    // Analyze brightness to estimate features\r\n    let totalBrightness = 0;\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      totalBrightness += (data[i] + data[i + 1] + data[i + 2]) / 3;\r\n    }\r\n    const avgBrightness = totalBrightness / (data.length / 4);\r\n    \r\n    // Determine face shape based on image analysis\r\n    const faceShapes = ['oval', 'round', 'square', 'heart'];\r\n    const randomShape = faceShapes[Math.floor(Math.random() * faceShapes.length)];\r\n    \r\n    // Set analyzed features\r\n    const analyzedFeatures = {\r\n      skinTone: skinTone,\r\n      hairColor: hairColor,\r\n      eyeColor: avgBrightness > 128 ? '#6b8e23' : '#4a3728',\r\n      faceShape: randomShape,\r\n      faceWidth: 0.9 + Math.random() * 0.2,\r\n      faceLength: 1.1 + Math.random() * 0.2,\r\n      eyeSize: 0.18 + Math.random() * 0.06,\r\n      eyeDistance: 0.32 + Math.random() * 0.08,\r\n      noseSize: 0.12 + Math.random() * 0.06,\r\n      mouthWidth: 0.28 + Math.random() * 0.08,\r\n      browThickness: 0.06 + Math.random() * 0.04,\r\n      hasGlasses: Math.random() > 0.7,\r\n      hairStyle: avgBrightness > 100 ? 'short' : 'long',\r\n    };\r\n    \r\n    // Finish progress\r\n    clearInterval(progressInterval);\r\n    setScanProgress(100);\r\n    \r\n    setTimeout(() => {\r\n      setFaceFeatures(analyzedFeatures);\r\n      setCloneData(prev => ({ ...prev, faceData: analyzedFeatures }));\r\n      setIsScanning(false);\r\n      setScanStatus('‚úÖ Ph√¢n t√≠ch ho√†n t·∫•t! Avatar 3D ƒë√£ ƒë∆∞·ª£c t·∫°o t·ª´ khu√¥n m·∫∑t c·ªßa b·∫°n.');\r\n    }, 500);\r\n  };\r\n\r\n  const retakePhoto = () => {\r\n    setCapturedImage(null);\r\n    setScanStatus('');\r\n    setIsScanning(false);\r\n    setScanProgress(0);\r\n    startCamera();\r\n  };\r\n\r\n  // Cleanup camera on unmount or phase change\r\n  useEffect(() => {\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, [phase]);\r\n\r\n  // ============ RENDER WELCOME PHASE ============\r\n  const renderWelcome = () => (\r\n    <div style={styles.fullScreen}>\r\n      <div style={styles.welcomeBox}>\r\n        <div style={styles.glowOrb}>üß¨</div>\r\n        <h1 style={styles.title}>Human Clone AI</h1>\r\n        <p style={styles.subtitle}>\r\n          T·∫°o nh√¢n b·∫£n AI c·ªßa ch√≠nh b·∫°n - bi·∫øt suy nghƒ©, n√≥i chuy·ªán v√† h√†nh ƒë·ªông nh∆∞ b·∫°n\r\n        </p>\r\n\r\n        <div style={styles.featureGrid}>\r\n          <div style={styles.featureCard}>\r\n            <span style={styles.featureIcon}>üß†</span>\r\n            <h3>H·ªçc t√≠nh c√°ch</h3>\r\n            <p>Clone h·ªçc c√°ch b·∫°n suy nghƒ© v√† ph·∫£n ·ª©ng</p>\r\n          </div>\r\n          <div style={styles.featureCard}>\r\n            <span style={styles.featureIcon}>üí¨</span>\r\n            <h3>N√≥i nh∆∞ b·∫°n</h3>\r\n            <p>Clone n√≥i chuy·ªán v·ªõi gi·ªçng ƒëi·ªáu c·ªßa b·∫°n</p>\r\n          </div>\r\n          <div style={styles.featureCard}>\r\n            <span style={styles.featureIcon}>üòä</span>\r\n            <h3>Bi·ªÉu c·∫£m th·ª±c</h3>\r\n            <p>C·∫£m x√∫c v√† bi·ªÉu c·∫£m nh∆∞ con ng∆∞·ªùi</p>\r\n          </div>\r\n          <div style={styles.featureCard}>\r\n            <span style={styles.featureIcon}>üé≠</span>\r\n            <h3>Nh·ªõ m·ªçi th·ª©</h3>\r\n            <p>Clone ghi nh·ªõ v√† h·ªçc t·ª´ cu·ªôc tr√≤ chuy·ªán</p>\r\n          </div>\r\n        </div>\r\n\r\n        <input\r\n          ref={nameInputRef}\r\n          type=\"text\"\r\n          placeholder=\"Nh·∫≠p t√™n cho Clone c·ªßa b·∫°n...\"\r\n          value={cloneData.name}\r\n          onChange={handleNameChange}\r\n          style={styles.nameInput}\r\n          autoFocus\r\n        />\r\n\r\n        <button\r\n          onClick={() => cloneData.name && setPhase('facescan')}\r\n          disabled={!cloneData.name}\r\n          style={{\r\n            ...styles.primaryBtn,\r\n            opacity: cloneData.name ? 1 : 0.5,\r\n          }}\r\n        >\r\n          üì∏ Ch·ª•p khu√¥n m·∫∑t cho {cloneData.name || 'Clone'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // ============ RENDER FACE SCAN PHASE ============\r\n  const renderFaceScan = () => (\r\n    <div style={styles.fullScreen}>\r\n      <div style={styles.faceScanBox}>\r\n        <h2 style={styles.phaseTitle}>üì∏ Qu√©t khu√¥n m·∫∑t c·ªßa b·∫°n</h2>\r\n        <p style={styles.subtitle}>AI s·∫Ω ph√¢n t√≠ch v√† t·∫°o avatar 3D t·ª´ khu√¥n m·∫∑t th·∫≠t</p>\r\n\r\n        <div style={styles.cameraContainer}>\r\n          {!capturedImage ? (\r\n            <>\r\n              <video\r\n                ref={webcamRef}\r\n                style={{\r\n                  ...styles.videoPreview,\r\n                  transform: 'scaleX(-1)',\r\n                  display: cameraActive ? 'block' : 'none',\r\n                }}\r\n                autoPlay\r\n                playsInline\r\n                muted\r\n              />\r\n              {!cameraActive && (\r\n                <div style={styles.cameraPlaceholder}>\r\n                  <span style={{ fontSize: '80px' }}>üì∑</span>\r\n                  <p>Camera ch∆∞a ƒë∆∞·ª£c b·∫≠t</p>\r\n                </div>\r\n              )}\r\n              {cameraActive && (\r\n                <div style={styles.faceGuide}>\r\n                  <div style={styles.faceOval}></div>\r\n                  <div style={styles.scanLine}></div>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div style={styles.capturedPreview}>\r\n              <img src={capturedImage} alt=\"Captured face\" style={styles.capturedImage} />\r\n              {isScanning && (\r\n                <div style={styles.scanningOverlay}>\r\n                  <div style={styles.scanningEffect}></div>\r\n                </div>\r\n              )}\r\n              {!isScanning && <div style={styles.checkMark}>‚úÖ</div>}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <canvas ref={photoCanvasRef} style={{ display: 'none' }} />\r\n\r\n        {/* Progress Bar when scanning */}\r\n        {isScanning && (\r\n          <div style={styles.analysisProgress}>\r\n            <div style={styles.progressLabel}>üîç ƒêang ph√¢n t√≠ch khu√¥n m·∫∑t...</div>\r\n            <div style={styles.progressBarBg}>\r\n              <div style={{ ...styles.progressBarFill, width: `${scanProgress}%` }}></div>\r\n            </div>\r\n            <div style={styles.progressPercent}>{scanProgress}%</div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Analysis Results */}\r\n        {capturedImage && !isScanning && faceFeatures && (\r\n          <div style={styles.analysisResults}>\r\n            <h3 style={{ marginBottom: '15px', color: '#00d9ff' }}>üéØ K·∫øt qu·∫£ ph√¢n t√≠ch:</h3>\r\n            <div style={styles.featureList}>\r\n              <div style={styles.featureItem}>\r\n                <span>M√†u da:</span>\r\n                <div style={{ ...styles.colorSwatch, background: faceFeatures.skinTone }}></div>\r\n              </div>\r\n              <div style={styles.featureItem}>\r\n                <span>M√†u t√≥c:</span>\r\n                <div style={{ ...styles.colorSwatch, background: faceFeatures.hairColor }}></div>\r\n              </div>\r\n              <div style={styles.featureItem}>\r\n                <span>M√†u m·∫Øt:</span>\r\n                <div style={{ ...styles.colorSwatch, background: faceFeatures.eyeColor }}></div>\r\n              </div>\r\n              <div style={styles.featureItem}>\r\n                <span>H√¨nh m·∫∑t:</span>\r\n                <span style={styles.featureValue}>\r\n                  {faceFeatures.faceShape === 'oval' ? 'Tr√°i xoan' :\r\n                   faceFeatures.faceShape === 'round' ? 'Tr√≤n' :\r\n                   faceFeatures.faceShape === 'square' ? 'Vu√¥ng' : 'Tr√°i tim'}\r\n                </span>\r\n              </div>\r\n              <div style={styles.featureItem}>\r\n                <span>Ki·ªÉu t√≥c:</span>\r\n                <span style={styles.featureValue}>\r\n                  {faceFeatures.hairStyle === 'short' ? 'Ng·∫Øn' : 'D√†i'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <p style={styles.scanStatus}>{scanStatus}</p>\r\n\r\n        <div style={styles.btnGroup}>\r\n          {!cameraActive && !capturedImage && (\r\n            <button onClick={startCamera} style={styles.primaryBtn}>\r\n              üé• M·ªü Camera\r\n            </button>\r\n          )}\r\n\r\n          {cameraActive && !capturedImage && (\r\n            <button onClick={capturePhoto} style={styles.captureBtn}>\r\n              üì∏ Qu√©t khu√¥n m·∫∑t\r\n            </button>\r\n          )}\r\n\r\n          {capturedImage && !isScanning && (\r\n            <>\r\n              <button onClick={retakePhoto} style={styles.secondaryBtn}>\r\n                üîÑ Qu√©t l·∫°i\r\n              </button>\r\n              <button onClick={() => setPhase('training')} style={styles.primaryBtn}>\r\n                ‚úÖ T·∫°o Avatar 3D\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <button \r\n          onClick={() => {\r\n            stopCamera();\r\n            setPhase('training');\r\n          }} \r\n          style={styles.skipBtn}\r\n        >\r\n          B·ªè qua, d√πng avatar m·∫∑c ƒë·ªãnh ‚Üí\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // ============ RENDER TRAINING PHASE ============\r\n  const renderTraining = () => {\r\n    const progress = ((currentQuestion + 1) / personalityQuestions.length) * 100;\r\n\r\n    return (\r\n      <div style={styles.fullScreen}>\r\n        <div style={styles.trainingBox}>\r\n          <div style={styles.progressBar}>\r\n            <div style={{ ...styles.progressFill, width: `${progress}%` }} />\r\n          </div>\r\n\r\n          <h2 style={styles.phaseTitle}>\r\n            üß† D·∫°y {cloneData.name} hi·ªÉu b·∫°n\r\n          </h2>\r\n          <p style={styles.questionCount}>\r\n            C√¢u h·ªèi {currentQuestion + 1} / {personalityQuestions.length}\r\n          </p>\r\n\r\n          <div style={styles.questionCard}>\r\n            <p style={styles.question}>\r\n              {personalityQuestions[currentQuestion].q}\r\n            </p>\r\n            <textarea\r\n              ref={answerInputRef}\r\n              key={`answer-${currentQuestion}`}\r\n              value={personalityQuestions[currentQuestion].a}\r\n              onChange={(e) => handleAnswer(e.target.value)}\r\n              placeholder=\"Tr·∫£ l·ªùi c√†ng chi ti·∫øt, Clone c√†ng gi·ªëng b·∫°n...\"\r\n              style={styles.answerInput}\r\n              rows={4}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          <div style={styles.btnGroup}>\r\n            {currentQuestion > 0 && (\r\n              <button\r\n                onClick={() => setCurrentQuestion(currentQuestion - 1)}\r\n                style={styles.secondaryBtn}\r\n              >\r\n                ‚Üê Quay l·∫°i\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={nextQuestion}\r\n              disabled={!personalityQuestions[currentQuestion].a}\r\n              style={{\r\n                ...styles.primaryBtn,\r\n                opacity: personalityQuestions[currentQuestion].a ? 1 : 0.5,\r\n              }}\r\n            >\r\n              {currentQuestion === personalityQuestions.length - 1 ? 'Ho√†n th√†nh ‚úì' : 'Ti·∫øp theo ‚Üí'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // ============ RENDER PERSONALITY PHASE ============\r\n  const renderPersonality = () => (\r\n    <div style={styles.fullScreen}>\r\n      <div style={styles.trainingBox}>\r\n        <h2 style={styles.phaseTitle}>\r\n          üí¨ D·∫°y {cloneData.name} n√≥i nh∆∞ b·∫°n\r\n        </h2>\r\n\r\n        <div style={styles.inputSection}>\r\n          <label style={styles.label}>\r\n            Vi·∫øt m·ªôt ƒëo·∫°n chat m·∫´u theo c√°ch b·∫°n th∆∞·ªùng n√≥i:\r\n          </label>\r\n          <textarea\r\n            value={sampleConvo}\r\n            onChange={(e) => setSampleConvo(e.target.value)}\r\n            placeholder={`V√≠ d·ª•:\r\n- √ä, c√≥ g√¨ hot kh√¥ng?\r\n- Oke lu√¥n, ez game!\r\n- Hmm ƒë·ªÉ tao nghƒ© xem...\r\n- Chill ƒëi bro, m·ªçi chuy·ªán s·∫Ω ·ªïn th√¥i`}\r\n            style={{ ...styles.answerInput, minHeight: '150px' }}\r\n            autoFocus\r\n          />\r\n        </div>\r\n\r\n        <div style={styles.inputSection}>\r\n          <label style={styles.label}>\r\n            Nh·ªØng c√¢u c·ª≠a mi·ªáng b·∫°n hay d√πng (m·ªói c√¢u 1 d√≤ng):\r\n          </label>\r\n          <textarea\r\n            value={catchphrases}\r\n            onChange={(e) => setCatchphrases(e.target.value)}\r\n            placeholder={`V√≠ d·ª•:\r\nChill ƒëi\r\nOke lu√¥n\r\nEz game\r\nHmm...`}\r\n            style={{ ...styles.answerInput, minHeight: '100px' }}\r\n          />\r\n        </div>\r\n\r\n        <button onClick={finishSetup} style={styles.primaryBtn}>\r\n          üé≠ T·∫°o {cloneData.name} ngay!\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // ============ PHASE 4: THE CLONE ============\r\n  // Initialize 3D Clone\r\n  useEffect(() => {\r\n    if (phase !== 'clone' || !mountRef.current) return;\r\n\r\n    const scene = new THREE.Scene();\r\n    scene.background = new THREE.Color(0x0a0a1a);\r\n\r\n    const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n    camera.position.set(0, 0, 5);\r\n\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    renderer.shadowMap.enabled = true;\r\n    mountRef.current.appendChild(renderer.domElement);\r\n    rendererRef.current = renderer;\r\n\r\n    // Lighting\r\n    const keyLight = new THREE.SpotLight(0xffffff, 1.5);\r\n    keyLight.position.set(3, 5, 5);\r\n    keyLight.castShadow = true;\r\n    scene.add(keyLight);\r\n\r\n    const fillLight = new THREE.DirectionalLight(0x6666ff, 0.3);\r\n    fillLight.position.set(-3, 2, 3);\r\n    scene.add(fillLight);\r\n\r\n    const rimLight = new THREE.DirectionalLight(0xff6600, 0.4);\r\n    rimLight.position.set(0, 3, -3);\r\n    scene.add(rimLight);\r\n\r\n    const ambient = new THREE.AmbientLight(0xffffff, 0.3);\r\n    scene.add(ambient);\r\n\r\n    // Create Human Clone Model\r\n    const clone = new THREE.Group();\r\n    scene.add(clone);\r\n    cloneRef.current = clone;\r\n\r\n    // Head with realistic proportions\r\n    const headGeo = new THREE.SphereGeometry(1, 64, 64);\r\n    const headMat = new THREE.MeshStandardMaterial({\r\n      color: 0xf5c6a5,\r\n      roughness: 0.4,\r\n      metalness: 0.05,\r\n    });\r\n    const head = new THREE.Mesh(headGeo, headMat);\r\n    head.scale.set(1, 1.2, 0.95);\r\n    head.castShadow = true;\r\n    clone.add(head);\r\n    clone.userData.head = head;\r\n\r\n    // Hair\r\n    const hairGeo = new THREE.SphereGeometry(1.1, 64, 64, 0, Math.PI * 2, 0, Math.PI * 0.5);\r\n    const hairMat = new THREE.MeshStandardMaterial({ color: 0x1a1a1a, roughness: 0.7 });\r\n    const hair = new THREE.Mesh(hairGeo, hairMat);\r\n    hair.position.y = 0.4;\r\n    hair.scale.set(1.05, 1, 0.95);\r\n    clone.add(hair);\r\n\r\n    // Face features\r\n    const createEye = (x) => {\r\n      const eyeGroup = new THREE.Group();\r\n\r\n      // White\r\n      const whiteGeo = new THREE.SphereGeometry(0.2, 32, 32);\r\n      const whiteMat = new THREE.MeshStandardMaterial({ color: 0xffffff });\r\n      const white = new THREE.Mesh(whiteGeo, whiteMat);\r\n      eyeGroup.add(white);\r\n\r\n      // Iris\r\n      const irisGeo = new THREE.CircleGeometry(0.12, 32);\r\n      const irisMat = new THREE.MeshStandardMaterial({ color: 0x4a3728 });\r\n      const iris = new THREE.Mesh(irisGeo, irisMat);\r\n      iris.position.z = 0.18;\r\n      eyeGroup.add(iris);\r\n\r\n      // Pupil\r\n      const pupilGeo = new THREE.CircleGeometry(0.05, 32);\r\n      const pupilMat = new THREE.MeshBasicMaterial({ color: 0x000000 });\r\n      const pupil = new THREE.Mesh(pupilGeo, pupilMat);\r\n      pupil.position.z = 0.19;\r\n      eyeGroup.add(pupil);\r\n\r\n      // Highlight\r\n      const hlGeo = new THREE.CircleGeometry(0.025, 16);\r\n      const hlMat = new THREE.MeshBasicMaterial({ color: 0xffffff });\r\n      const hl = new THREE.Mesh(hlGeo, hlMat);\r\n      hl.position.set(0.04, 0.04, 0.2);\r\n      eyeGroup.add(hl);\r\n\r\n      eyeGroup.position.set(x, 0.35, 0.88);\r\n      return eyeGroup;\r\n    };\r\n\r\n    const leftEye = createEye(-0.35);\r\n    const rightEye = createEye(0.35);\r\n    clone.add(leftEye);\r\n    clone.add(rightEye);\r\n    clone.userData.leftEye = leftEye;\r\n    clone.userData.rightEye = rightEye;\r\n\r\n    // Eyebrows\r\n    const browGeo = new THREE.BoxGeometry(0.3, 0.06, 0.08);\r\n    const browMat = new THREE.MeshStandardMaterial({ color: 0x1a1a1a });\r\n\r\n    const leftBrow = new THREE.Mesh(browGeo, browMat);\r\n    leftBrow.position.set(-0.35, 0.55, 0.85);\r\n    leftBrow.rotation.z = 0.1;\r\n    clone.add(leftBrow);\r\n    clone.userData.leftBrow = leftBrow;\r\n\r\n    const rightBrow = new THREE.Mesh(browGeo, browMat);\r\n    rightBrow.position.set(0.35, 0.55, 0.85);\r\n    rightBrow.rotation.z = -0.1;\r\n    clone.add(rightBrow);\r\n    clone.userData.rightBrow = rightBrow;\r\n\r\n    // Nose\r\n    const noseGeo = new THREE.ConeGeometry(0.1, 0.35, 16);\r\n    const noseMat = new THREE.MeshStandardMaterial({ color: 0xf0b090 });\r\n    const nose = new THREE.Mesh(noseGeo, noseMat);\r\n    nose.position.set(0, 0.1, 0.95);\r\n    nose.rotation.x = Math.PI * 0.1;\r\n    clone.add(nose);\r\n\r\n    // Mouth\r\n    const mouthGroup = new THREE.Group();\r\n\r\n    const upperLipGeo = new THREE.TorusGeometry(0.2, 0.04, 8, 32, Math.PI);\r\n    const lipMat = new THREE.MeshStandardMaterial({ color: 0xc4756e });\r\n    const upperLip = new THREE.Mesh(upperLipGeo, lipMat);\r\n    upperLip.rotation.x = Math.PI;\r\n    upperLip.position.y = 0.02;\r\n    mouthGroup.add(upperLip);\r\n\r\n    const lowerLipGeo = new THREE.TorusGeometry(0.18, 0.05, 8, 32, Math.PI);\r\n    const lowerLip = new THREE.Mesh(lowerLipGeo, lipMat);\r\n    lowerLip.position.y = -0.02;\r\n    mouthGroup.add(lowerLip);\r\n\r\n    // Mouth interior\r\n    const interiorGeo = new THREE.PlaneGeometry(0.35, 0.2);\r\n    const interiorMat = new THREE.MeshStandardMaterial({ color: 0x2a0a0a, side: THREE.DoubleSide });\r\n    const interior = new THREE.Mesh(interiorGeo, interiorMat);\r\n    interior.position.z = -0.03;\r\n    interior.visible = false;\r\n    mouthGroup.add(interior);\r\n    clone.userData.mouthInterior = interior;\r\n\r\n    mouthGroup.position.set(0, -0.4, 0.88);\r\n    clone.add(mouthGroup);\r\n    clone.userData.mouth = mouthGroup;\r\n\r\n    // Ears\r\n    const earGeo = new THREE.SphereGeometry(0.15, 16, 16);\r\n    const earMat = new THREE.MeshStandardMaterial({ color: 0xf5c6a5 });\r\n\r\n    const leftEar = new THREE.Mesh(earGeo, earMat);\r\n    leftEar.position.set(-1, 0.2, 0);\r\n    leftEar.scale.set(0.4, 1, 0.5);\r\n    clone.add(leftEar);\r\n\r\n    const rightEar = new THREE.Mesh(earGeo, earMat);\r\n    rightEar.position.set(1, 0.2, 0);\r\n    rightEar.scale.set(0.4, 1, 0.5);\r\n    clone.add(rightEar);\r\n\r\n    // Neck & Shoulders hint\r\n    const neckGeo = new THREE.CylinderGeometry(0.4, 0.5, 0.8, 32);\r\n    const neckMat = new THREE.MeshStandardMaterial({ color: 0xf5c6a5 });\r\n    const neck = new THREE.Mesh(neckGeo, neckMat);\r\n    neck.position.y = -1.6;\r\n    clone.add(neck);\r\n\r\n    // Animation state\r\n    let breathe = 0;\r\n    let blink = 0;\r\n    let talk = 0;\r\n    let idleMove = 0;\r\n\r\n    // Mouse tracking\r\n    const mouse = { x: 0, y: 0 };\r\n    const onMouseMove = (e) => {\r\n      mouse.x = (e.clientX / window.innerWidth) * 2 - 1;\r\n      mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;\r\n    };\r\n    window.addEventListener('mousemove', onMouseMove);\r\n\r\n    // Animation loop\r\n    const animate = () => {\r\n      requestAnimationFrame(animate);\r\n\r\n      if (!cloneRef.current) return;\r\n      const c = cloneRef.current;\r\n\r\n      // Breathing\r\n      breathe += 0.015;\r\n      c.position.y = Math.sin(breathe) * 0.03;\r\n      c.scale.x = 1 + Math.sin(breathe) * 0.008;\r\n\r\n      // Idle subtle movement\r\n      idleMove += 0.008;\r\n      c.rotation.y += (mouse.x * 0.3 - c.rotation.y) * 0.05;\r\n      c.rotation.x += (mouse.y * 0.15 - c.rotation.x) * 0.05;\r\n\r\n      // Subtle head bob\r\n      c.rotation.z = Math.sin(idleMove) * 0.02;\r\n\r\n      // Eye tracking\r\n      if (c.userData.leftEye && c.userData.rightEye) {\r\n        c.userData.leftEye.rotation.y = mouse.x * 0.4;\r\n        c.userData.leftEye.rotation.x = -mouse.y * 0.3;\r\n        c.userData.rightEye.rotation.y = mouse.x * 0.4;\r\n        c.userData.rightEye.rotation.x = -mouse.y * 0.3;\r\n      }\r\n\r\n      // Blinking\r\n      blink++;\r\n      if (blink > 200 && blink < 210) {\r\n        const blinkAmt = 1 - Math.sin((blink - 200) / 10 * Math.PI);\r\n        if (c.userData.leftEye) c.userData.leftEye.scale.y = Math.max(0.1, blinkAmt);\r\n        if (c.userData.rightEye) c.userData.rightEye.scale.y = Math.max(0.1, blinkAmt);\r\n      } else {\r\n        if (c.userData.leftEye) c.userData.leftEye.scale.y = 1;\r\n        if (c.userData.rightEye) c.userData.rightEye.scale.y = 1;\r\n        if (blink > 210) blink = Math.random() * 100;\r\n      }\r\n\r\n      // Talking animation\r\n      if (isSpeaking && c.userData.mouth) {\r\n        talk += 0.4;\r\n        const openAmt = Math.abs(Math.sin(talk)) * 0.4;\r\n        c.userData.mouth.scale.y = 1 + openAmt;\r\n        c.userData.mouthInterior.visible = openAmt > 0.15;\r\n      } else {\r\n        if (c.userData.mouth) {\r\n          c.userData.mouth.scale.y = 1;\r\n          c.userData.mouthInterior.visible = false;\r\n        }\r\n      }\r\n\r\n      // Emotions\r\n      if (c.userData.leftBrow && c.userData.rightBrow) {\r\n        switch (cloneEmotion) {\r\n          case 'happy':\r\n            c.userData.leftBrow.position.y = 0.58;\r\n            c.userData.rightBrow.position.y = 0.58;\r\n            c.userData.leftBrow.rotation.z = -0.1;\r\n            c.userData.rightBrow.rotation.z = 0.1;\r\n            break;\r\n          case 'sad':\r\n            c.userData.leftBrow.rotation.z = -0.25;\r\n            c.userData.rightBrow.rotation.z = 0.25;\r\n            c.userData.leftBrow.position.y = 0.52;\r\n            c.userData.rightBrow.position.y = 0.52;\r\n            break;\r\n          case 'thinking':\r\n            c.userData.leftBrow.position.y = 0.58;\r\n            c.userData.rightBrow.position.y = 0.53;\r\n            c.userData.leftBrow.rotation.z = 0.2;\r\n            c.userData.rightBrow.rotation.z = 0;\r\n            break;\r\n          case 'surprised':\r\n            c.userData.leftBrow.position.y = 0.62;\r\n            c.userData.rightBrow.position.y = 0.62;\r\n            break;\r\n          default:\r\n            c.userData.leftBrow.position.y = 0.55;\r\n            c.userData.rightBrow.position.y = 0.55;\r\n            c.userData.leftBrow.rotation.z = 0.1;\r\n            c.userData.rightBrow.rotation.z = -0.1;\r\n        }\r\n      }\r\n\r\n      renderer.render(scene, camera);\r\n    };\r\n\r\n    animate();\r\n\r\n    const handleResize = () => {\r\n      camera.aspect = window.innerWidth / window.innerHeight;\r\n      camera.updateProjectionMatrix();\r\n      renderer.setSize(window.innerWidth, window.innerHeight);\r\n    };\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    // Store reference for cleanup\r\n    const currentMount = mountRef.current;\r\n    const currentRenderer = renderer;\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', onMouseMove);\r\n      window.removeEventListener('resize', handleResize);\r\n      \r\n      // Safe cleanup - check if element is actually a child before removing\r\n      if (currentMount && currentRenderer && currentRenderer.domElement) {\r\n        if (currentMount.contains(currentRenderer.domElement)) {\r\n          currentMount.removeChild(currentRenderer.domElement);\r\n        }\r\n      }\r\n      \r\n      // Dispose Three.js resources\r\n      currentRenderer.dispose();\r\n    };\r\n  }, [phase, isSpeaking, cloneEmotion]);\r\n\r\n  // Generate clone response based on personality\r\n  const generateCloneResponse = async (userMsg) => {\r\n    setIsThinking(true);\r\n    setCloneEmotion('thinking');\r\n\r\n    // Build personality context\r\n    const personalityContext = cloneData.personality.map(p =>\r\n      `${p.category}: ${p.response}`\r\n    ).join('\\n');\r\n\r\n    const catchphrases = cloneData.speakingStyle || '';\r\n\r\n    // Create prompt that makes AI respond like the user\r\n    const clonePrompt = `B·∫°n l√† ${cloneData.name}, m·ªôt nh√¢n b·∫£n AI c·ªßa ng∆∞·ªùi d√πng. \r\nƒê√¢y l√† t√≠nh c√°ch v√† c√°ch n√≥i c·ªßa b·∫°n:\r\n${personalityContext}\r\n\r\nPhong c√°ch n√≥i chuy·ªán m·∫´u:\r\n${catchphrases}\r\n\r\nQUAN TR·ªåNG: H√£y tr·∫£ l·ªùi ƒê√öNG nh∆∞ c√°ch ng∆∞·ªùi d√πng s·∫Ω tr·∫£ l·ªùi. S·ª≠ d·ª•ng c√°c c√¢u c·ª≠a mi·ªáng, gi·ªçng ƒëi·ªáu v√† t√≠nh c√°ch ƒë√£ ƒë∆∞·ª£c training.\r\nKh√¥ng n√≥i \"T√¥i l√† AI\" hay \"T√¥i kh√¥ng th·ªÉ\". H√£y tr·∫£ l·ªùi nh∆∞ m·ªôt con ng∆∞·ªùi th·ª±c s·ª± v·ªõi t√≠nh c√°ch ƒë√£ cho.\r\n\r\nL·ªãch s·ª≠ tr√≤ chuy·ªán:\r\n${messages.slice(-6).map(m => `${m.role === 'user' ? 'Ng∆∞·ªùi d√πng' : cloneData.name}: ${m.content}`).join('\\n')}\r\n\r\nNg∆∞·ªùi d√πng: ${userMsg}\r\n${cloneData.name}:`;\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:8000/api/chat', {\r\n        text: clonePrompt,\r\n      });\r\n\r\n      setIsThinking(false);\r\n      return response.data.ai_response;\r\n    } catch (error) {\r\n      setIsThinking(false);\r\n\r\n      // Fallback: generate response based on personality locally\r\n      const styles = cloneData.speakingStyle.split('\\n').filter(s => s.trim());\r\n      const randomStyle = styles[Math.floor(Math.random() * styles.length)] || 'Oke';\r\n\r\n      return `${randomStyle} ${userMsg.includes('?') ? 'ƒê·ªÉ tao nghƒ© xem...' : ''}`;\r\n    }\r\n  };\r\n\r\n  // Detect emotion from text\r\n  const detectEmotion = (text) => {\r\n    const lower = text.toLowerCase();\r\n    if (lower.match(/vui|haha|üòä|üòÑ|tuy·ªát|hay|th√≠ch/)) return 'happy';\r\n    if (lower.match(/bu·ªìn|üò¢|üò≠|ch√°n|m·ªát/)) return 'sad';\r\n    if (lower.match(/g√¨|sao|nh∆∞ th·∫ø n√†o|\\?/)) return 'thinking';\r\n    if (lower.match(/wow|·ªì|üòÆ|th·∫≠t sao/)) return 'surprised';\r\n    return 'neutral';\r\n  };\r\n\r\n  // Send message\r\n  const sendMessage = async () => {\r\n    if (!inputText.trim() || isThinking) return;\r\n\r\n    const userMsg = inputText.trim();\r\n    setInputText('');\r\n    setMessages(prev => [...prev, { role: 'user', content: userMsg }]);\r\n\r\n    // Get clone response\r\n    const cloneResponse = await generateCloneResponse(userMsg);\r\n\r\n    // Detect and set emotion\r\n    const emotion = detectEmotion(cloneResponse);\r\n    setCloneEmotion(emotion);\r\n\r\n    // Update mood based on conversation\r\n    if (emotion === 'happy') setCloneMood(prev => Math.min(100, prev + 5));\r\n    if (emotion === 'sad') setCloneMood(prev => Math.max(0, prev - 5));\r\n\r\n    setMessages(prev => [...prev, { role: 'clone', content: cloneResponse }]);\r\n\r\n    // Speak the response\r\n    speakResponse(cloneResponse);\r\n  };\r\n\r\n  // Text-to-speech\r\n  const speakResponse = (text) => {\r\n    setIsSpeaking(true);\r\n\r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    utterance.lang = 'vi-VN';\r\n    utterance.rate = 1.0;\r\n    utterance.pitch = 1.0;\r\n\r\n    utterance.onend = () => {\r\n      setIsSpeaking(false);\r\n      setCloneEmotion('neutral');\r\n    };\r\n\r\n    window.speechSynthesis.speak(utterance);\r\n  };\r\n\r\n  // Voice input\r\n  const startListening = () => {\r\n    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\r\n    recognition.lang = 'vi-VN';\r\n    recognition.continuous = false;\r\n\r\n    recognition.onstart = () => setIsListening(true);\r\n    recognition.onresult = (e) => {\r\n      const text = e.results[0][0].transcript;\r\n      setInputText(text);\r\n      setIsListening(false);\r\n    };\r\n    recognition.onerror = () => setIsListening(false);\r\n    recognition.start();\r\n  };\r\n\r\n  // Clone Screen\r\n  const CloneScreen = () => (\r\n    <div style={{ width: '100%', height: '100vh', position: 'relative' }}>\r\n      <div ref={mountRef} style={{ width: '100%', height: '100%' }} />\r\n\r\n      {/* Clone Info */}\r\n      <div style={styles.cloneInfo}>\r\n        <div style={styles.cloneName}>\r\n          üß¨ {cloneData.name}\r\n        </div>\r\n        <div style={styles.moodBar}>\r\n          <span>T√¢m tr·∫°ng:</span>\r\n          <div style={styles.moodTrack}>\r\n            <div style={{\r\n              ...styles.moodFill,\r\n              width: `${cloneMood}%`,\r\n              background: cloneMood > 60 ? '#4ECDC4' : cloneMood > 30 ? '#FFB84D' : '#FF6B6B',\r\n            }} />\r\n          </div>\r\n          <span>{cloneEmotion === 'happy' ? 'üòä' : cloneEmotion === 'sad' ? 'üò¢' : cloneEmotion === 'thinking' ? 'ü§î' : 'üòê'}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Panel */}\r\n      <div style={styles.chatPanel}>\r\n        <div style={styles.chatHeader}>\r\n          üí¨ Tr√≤ chuy·ªán v·ªõi {cloneData.name}\r\n          {isThinking && <span style={styles.thinkingBadge}>ü§î ƒêang suy nghƒ©...</span>}\r\n          {isSpeaking && <span style={styles.speakingBadge}>üîä ƒêang n√≥i...</span>}\r\n        </div>\r\n\r\n        <div style={styles.chatMessages}>\r\n          {messages.length === 0 && (\r\n            <div style={styles.emptyChat}>\r\n              <p>üëã Ch√†o! T√¥i l√† {cloneData.name}, nh√¢n b·∫£n c·ªßa b·∫°n.</p>\r\n              <p>H√£y n√≥i chuy·ªán v·ªõi t√¥i nh∆∞ n√≥i chuy·ªán v·ªõi ch√≠nh m√¨nh!</p>\r\n            </div>\r\n          )}\r\n          {messages.map((msg, i) => (\r\n            <div\r\n              key={i}\r\n              style={{\r\n                ...styles.message,\r\n                alignSelf: msg.role === 'user' ? 'flex-end' : 'flex-start',\r\n                background: msg.role === 'user' ? '#ff7043' : 'rgba(255,255,255,0.1)',\r\n              }}\r\n            >\r\n              {msg.content}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div style={styles.chatInput}>\r\n          <input\r\n            type=\"text\"\r\n            value={inputText}\r\n            onChange={(e) => setInputText(e.target.value)}\r\n            onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\r\n            placeholder={`N√≥i g√¨ ƒë√≥ v·ªõi ${cloneData.name}...`}\r\n            style={styles.textInput}\r\n          />\r\n          <button\r\n            onClick={startListening}\r\n            disabled={isListening}\r\n            style={{\r\n              ...styles.iconBtn,\r\n              background: isListening ? '#FF6B6B' : '#4ECDC4',\r\n            }}\r\n          >\r\n            üé§\r\n          </button>\r\n          <button\r\n            onClick={sendMessage}\r\n            disabled={isThinking || !inputText.trim()}\r\n            style={styles.iconBtn}\r\n          >\r\n            üí¨\r\n          </button>\r\n        </div>\r\n\r\n        {/* Quick emotions */}\r\n        <div style={styles.emotionBar}>\r\n          <span style={{ opacity: 0.7 }}>Bi·ªÉu c·∫£m:</span>\r\n          {['neutral', 'happy', 'sad', 'thinking', 'surprised'].map(em => (\r\n            <button\r\n              key={em}\r\n              onClick={() => setCloneEmotion(em)}\r\n              style={{\r\n                ...styles.emotionBtn,\r\n                border: cloneEmotion === em ? '2px solid #ff7043' : '2px solid transparent',\r\n              }}\r\n            >\r\n              {em === 'neutral' && 'üòê'}\r\n              {em === 'happy' && 'üòä'}\r\n              {em === 'sad' && 'üò¢'}\r\n              {em === 'thinking' && 'ü§î'}\r\n              {em === 'surprised' && 'üòÆ'}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reset button */}\r\n      <button\r\n        onClick={() => {\r\n          setPhase('welcome');\r\n          setMessages([]);\r\n          setCloneData({ name: '', personality: [], speakingStyle: '', memories: [], faceData: null, faceImage: null, voiceProfile: null });\r\n          setCurrentQuestion(0);\r\n          setPersonalityQuestions(prev => prev.map(q => ({ ...q, a: '' })));\r\n          setSampleConvo('');\r\n          setCatchphrases('');\r\n          setCapturedImage(null);\r\n        }}\r\n        style={styles.resetBtn}\r\n      >\r\n        üîÑ T·∫°o Clone m·ªõi\r\n      </button>\r\n\r\n      {/* Face Avatar Overlay if has face image */}\r\n      {capturedImage && (\r\n        <div style={styles.faceAvatarOverlay}>\r\n          <img \r\n            src={capturedImage} \r\n            alt=\"Your face\" \r\n            style={{\r\n              ...styles.faceAvatarImage,\r\n              animation: isSpeaking ? 'talking 0.3s ease-in-out infinite' : \r\n                        isThinking ? 'thinking 1s ease-in-out infinite' : 'breathing 3s ease-in-out infinite',\r\n              filter: cloneEmotion === 'sad' ? 'saturate(0.7) brightness(0.9)' : \r\n                      cloneEmotion === 'happy' ? 'saturate(1.2) brightness(1.1)' : 'none',\r\n            }}\r\n          />\r\n          <div style={styles.emotionOverlay}>\r\n            {cloneEmotion === 'happy' && <span style={styles.emotionEmoji}>üòä</span>}\r\n            {cloneEmotion === 'sad' && <span style={styles.emotionEmoji}>üò¢</span>}\r\n            {cloneEmotion === 'thinking' && <span style={styles.emotionEmoji}>ü§î</span>}\r\n            {cloneEmotion === 'surprised' && <span style={styles.emotionEmoji}>üòÆ</span>}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  // Render based on phase\r\n  return (\r\n    <>\r\n      {phase === 'welcome' && renderWelcome()}\r\n      {phase === 'facescan' && renderFaceScan()}\r\n      {phase === 'training' && renderTraining()}\r\n      {phase === 'personality' && renderPersonality()}\r\n      {phase === 'clone' && <CloneScreen />}\r\n    </>\r\n  );\r\n};\r\n\r\n// Styles\r\nconst styles = {\r\n  fullScreen: {\r\n    width: '100%',\r\n    height: '100vh',\r\n    background: 'linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontFamily: \"'Segoe UI', sans-serif\",\r\n    color: 'white',\r\n  },\r\n  welcomeBox: {\r\n    textAlign: 'center',\r\n    padding: '50px',\r\n    maxWidth: '800px',\r\n  },\r\n  glowOrb: {\r\n    fontSize: '80px',\r\n    marginBottom: '20px',\r\n    animation: 'pulse 2s infinite',\r\n  },\r\n  title: {\r\n    fontSize: '3rem',\r\n    marginBottom: '15px',\r\n    background: 'linear-gradient(90deg, #ff9a56, #ff7043, #ff9a56)',\r\n    WebkitBackgroundClip: 'text',\r\n    WebkitTextFillColor: 'transparent',\r\n  },\r\n  subtitle: {\r\n    fontSize: '1.3rem',\r\n    opacity: 0.8,\r\n    marginBottom: '40px',\r\n  },\r\n  featureGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',\r\n    gap: '20px',\r\n    marginBottom: '40px',\r\n  },\r\n  featureCard: {\r\n    background: 'rgba(255,255,255,0.05)',\r\n    padding: '25px 15px',\r\n    borderRadius: '15px',\r\n    backdropFilter: 'blur(10px)',\r\n  },\r\n  featureIcon: {\r\n    fontSize: '40px',\r\n    display: 'block',\r\n    marginBottom: '10px',\r\n  },\r\n  nameInput: {\r\n    width: '100%',\r\n    maxWidth: '400px',\r\n    padding: '15px 25px',\r\n    fontSize: '1.1rem',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '2px solid rgba(255,255,255,0.2)',\r\n    borderRadius: '30px',\r\n    color: 'white',\r\n    outline: 'none',\r\n    marginBottom: '20px',\r\n    textAlign: 'center',\r\n    boxSizing: 'border-box',\r\n    pointerEvents: 'auto',\r\n    zIndex: 100,\r\n    position: 'relative',\r\n  },\r\n  primaryBtn: {\r\n    padding: '15px 40px',\r\n    fontSize: '1.2rem',\r\n    background: 'linear-gradient(135deg, #ff9a56 0%, #ff7043 100%)',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '30px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n    transition: 'all 0.3s',\r\n  },\r\n  secondaryBtn: {\r\n    padding: '12px 30px',\r\n    fontSize: '1rem',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    color: 'white',\r\n    border: '2px solid rgba(255,255,255,0.3)',\r\n    borderRadius: '25px',\r\n    cursor: 'pointer',\r\n  },\r\n  trainingBox: {\r\n    background: 'rgba(255,255,255,0.05)',\r\n    padding: '40px',\r\n    borderRadius: '20px',\r\n    maxWidth: '600px',\r\n    width: '90%',\r\n    backdropFilter: 'blur(10px)',\r\n  },\r\n  progressBar: {\r\n    height: '8px',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    borderRadius: '4px',\r\n    marginBottom: '30px',\r\n    overflow: 'hidden',\r\n  },\r\n  progressFill: {\r\n    height: '100%',\r\n    background: 'linear-gradient(90deg, #ff9a56, #ff7043)',\r\n    transition: 'width 0.5s',\r\n  },\r\n  phaseTitle: {\r\n    fontSize: '1.8rem',\r\n    marginBottom: '10px',\r\n  },\r\n  questionCount: {\r\n    opacity: 0.7,\r\n    marginBottom: '30px',\r\n  },\r\n  questionCard: {\r\n    background: 'rgba(255,255,255,0.05)',\r\n    padding: '25px',\r\n    borderRadius: '15px',\r\n    marginBottom: '25px',\r\n  },\r\n  question: {\r\n    fontSize: '1.2rem',\r\n    marginBottom: '15px',\r\n  },\r\n  answerInput: {\r\n    width: '100%',\r\n    padding: '15px',\r\n    fontSize: '1rem',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '1px solid rgba(255,255,255,0.2)',\r\n    borderRadius: '10px',\r\n    color: 'white',\r\n    outline: 'none',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box',\r\n    pointerEvents: 'auto',\r\n    zIndex: 100,\r\n    position: 'relative',\r\n  },\r\n  btnGroup: {\r\n    display: 'flex',\r\n    gap: '15px',\r\n    justifyContent: 'center',\r\n  },\r\n  inputSection: {\r\n    marginBottom: '25px',\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    marginBottom: '10px',\r\n    opacity: 0.9,\r\n  },\r\n  cloneInfo: {\r\n    position: 'absolute',\r\n    top: 20,\r\n    left: 20,\r\n    background: 'rgba(10,10,26,0.9)',\r\n    padding: '15px 25px',\r\n    borderRadius: '15px',\r\n    backdropFilter: 'blur(10px)',\r\n  },\r\n  cloneName: {\r\n    fontSize: '1.3rem',\r\n    fontWeight: 'bold',\r\n    marginBottom: '10px',\r\n    color: '#ff9a56',\r\n  },\r\n  moodBar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '10px',\r\n    fontSize: '14px',\r\n  },\r\n  moodTrack: {\r\n    width: '100px',\r\n    height: '8px',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    borderRadius: '4px',\r\n    overflow: 'hidden',\r\n  },\r\n  moodFill: {\r\n    height: '100%',\r\n    transition: 'all 0.5s',\r\n  },\r\n  chatPanel: {\r\n    position: 'absolute',\r\n    bottom: 20,\r\n    right: 20,\r\n    width: '400px',\r\n    maxHeight: '70vh',\r\n    background: 'rgba(10,10,26,0.95)',\r\n    borderRadius: '20px',\r\n    padding: '20px',\r\n    backdropFilter: 'blur(10px)',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  chatHeader: {\r\n    fontSize: '1.1rem',\r\n    fontWeight: 'bold',\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '10px',\r\n    flexWrap: 'wrap',\r\n  },\r\n  thinkingBadge: {\r\n    fontSize: '12px',\r\n    background: 'rgba(255,184,77,0.2)',\r\n    padding: '4px 10px',\r\n    borderRadius: '10px',\r\n    color: '#FFB84D',\r\n  },\r\n  speakingBadge: {\r\n    fontSize: '12px',\r\n    background: 'rgba(78,205,196,0.2)',\r\n    padding: '4px 10px',\r\n    borderRadius: '10px',\r\n    color: '#4ECDC4',\r\n  },\r\n  chatMessages: {\r\n    flex: 1,\r\n    overflowY: 'auto',\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '10px',\r\n    maxHeight: '300px',\r\n    padding: '10px',\r\n    background: 'rgba(255,255,255,0.03)',\r\n    borderRadius: '10px',\r\n  },\r\n  emptyChat: {\r\n    textAlign: 'center',\r\n    opacity: 0.7,\r\n    padding: '20px',\r\n  },\r\n  message: {\r\n    padding: '10px 15px',\r\n    borderRadius: '15px',\r\n    maxWidth: '85%',\r\n    fontSize: '14px',\r\n  },\r\n  chatInput: {\r\n    display: 'flex',\r\n    gap: '10px',\r\n  },\r\n  textInput: {\r\n    flex: 1,\r\n    padding: '12px 15px',\r\n    borderRadius: '25px',\r\n    border: 'none',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    color: 'white',\r\n    outline: 'none',\r\n    fontSize: '14px',\r\n  },\r\n  iconBtn: {\r\n    width: '45px',\r\n    height: '45px',\r\n    borderRadius: '50%',\r\n    border: 'none',\r\n    background: '#ff7043',\r\n    color: 'white',\r\n    fontSize: '18px',\r\n    cursor: 'pointer',\r\n  },\r\n  emotionBar: {\r\n    marginTop: '15px',\r\n    display: 'flex',\r\n    gap: '8px',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontSize: '14px',\r\n  },\r\n  emotionBtn: {\r\n    width: '35px',\r\n    height: '35px',\r\n    borderRadius: '50%',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '2px solid transparent',\r\n    cursor: 'pointer',\r\n    fontSize: '18px',\r\n  },\r\n  resetBtn: {\r\n    position: 'absolute',\r\n    top: 20,\r\n    right: 20,\r\n    padding: '10px 20px',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '2px solid rgba(255,255,255,0.2)',\r\n    borderRadius: '25px',\r\n    color: 'white',\r\n    cursor: 'pointer',\r\n    fontSize: '14px',\r\n  },\r\n  // Face Scan Styles\r\n  faceScanBox: {\r\n    textAlign: 'center',\r\n    padding: '40px',\r\n    maxWidth: '600px',\r\n    width: '90%',\r\n  },\r\n  cameraContainer: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    maxWidth: '400px',\r\n    aspectRatio: '4/3',\r\n    margin: '30px auto',\r\n    borderRadius: '20px',\r\n    overflow: 'hidden',\r\n    background: 'rgba(0,0,0,0.5)',\r\n    border: '3px solid rgba(255,255,255,0.2)',\r\n  },\r\n  videoPreview: {\r\n    width: '100%',\r\n    height: '100%',\r\n    objectFit: 'cover',\r\n  },\r\n  cameraPlaceholder: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    height: '100%',\r\n    opacity: 0.5,\r\n  },\r\n  faceGuide: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    pointerEvents: 'none',\r\n  },\r\n  faceOval: {\r\n    width: '200px',\r\n    height: '260px',\r\n    border: '3px dashed rgba(255,255,255,0.5)',\r\n    borderRadius: '50%',\r\n  },\r\n  capturedPreview: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  capturedImage: {\r\n    width: '100%',\r\n    height: '100%',\r\n    objectFit: 'cover',\r\n  },\r\n  checkMark: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    fontSize: '80px',\r\n    textShadow: '0 0 30px rgba(0,255,0,0.5)',\r\n  },\r\n  scanStatus: {\r\n    fontSize: '1rem',\r\n    marginBottom: '20px',\r\n    minHeight: '24px',\r\n  },\r\n  captureBtn: {\r\n    padding: '20px 50px',\r\n    fontSize: '1.3rem',\r\n    background: 'linear-gradient(135deg, #00d9ff 0%, #00ff88 100%)',\r\n    color: '#1a1a2e',\r\n    border: 'none',\r\n    borderRadius: '50px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n    boxShadow: '0 10px 40px rgba(0, 217, 255, 0.4)',\r\n    animation: 'pulse 2s infinite',\r\n  },\r\n  skipBtn: {\r\n    marginTop: '30px',\r\n    padding: '10px 25px',\r\n    background: 'transparent',\r\n    border: 'none',\r\n    color: 'rgba(255,255,255,0.5)',\r\n    cursor: 'pointer',\r\n    fontSize: '0.9rem',\r\n    textDecoration: 'underline',\r\n  },\r\n  // Face Avatar in Clone Screen\r\n  faceAvatarOverlay: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    zIndex: 10,\r\n    pointerEvents: 'none',\r\n  },\r\n  faceAvatarImage: {\r\n    width: '300px',\r\n    height: '300px',\r\n    borderRadius: '50%',\r\n    objectFit: 'cover',\r\n    border: '5px solid rgba(255,255,255,0.3)',\r\n    boxShadow: '0 20px 60px rgba(0,0,0,0.5), 0 0 100px rgba(255,112,67,0.3)',\r\n  },\r\n  emotionOverlay: {\r\n    position: 'absolute',\r\n    bottom: '-10px',\r\n    right: '-10px',\r\n  },\r\n  emotionEmoji: {\r\n    fontSize: '50px',\r\n    filter: 'drop-shadow(0 5px 15px rgba(0,0,0,0.5))',\r\n  },\r\n};\r\n\r\n// Add keyframe animations via style tag (only once)\r\nif (!document.getElementById('humanclone-animations')) {\r\n  const styleSheet = document.createElement('style');\r\n  styleSheet.id = 'humanclone-animations';\r\n  styleSheet.textContent = `\r\n    @keyframes pulse {\r\n      0%, 100% { transform: scale(1); opacity: 1; }\r\n      50% { transform: scale(1.05); opacity: 0.8; }\r\n    }\r\n    @keyframes talking {\r\n      0%, 100% { transform: translate(-50%, -50%) scale(1); }\r\n      50% { transform: translate(-50%, -50%) scale(1.02); }\r\n    }\r\n    @keyframes thinking {\r\n      0%, 100% { transform: translate(-50%, -50%) rotate(-2deg); }\r\n      50% { transform: translate(-50%, -50%) rotate(2deg); }\r\n    }\r\n    @keyframes breathing {\r\n      0%, 100% { transform: translate(-50%, -50%) scale(1); }\r\n      50% { transform: translate(-50%, -50%) scale(1.02); }\r\n    }\r\n  `;\r\n  document.head.appendChild(styleSheet);\r\n}\r\n\r\nexport default HumanClone;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}