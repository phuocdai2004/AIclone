{"ast":null,"code":"var _jsxFileName = \"D:\\\\IZ\\\\AIClone\\\\frontend\\\\src\\\\HumanClone.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HumanClone = () => {\n  _s();\n  // Core states\n  const [phase, setPhase] = useState('welcome'); // welcome, facescan, analyzing, training, personality, clone\n  const [cloneData, setCloneData] = useState({\n    name: '',\n    personality: [],\n    speakingStyle: '',\n    memories: [],\n    faceData: null,\n    faceImage: null,\n    voiceProfile: null\n  });\n\n  // Face scan states\n  const [cameraActive, setCameraActive] = useState(false);\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [scanStatus, setScanStatus] = useState('');\n  const [isScanning, setIsScanning] = useState(false);\n  const [scanProgress, setScanProgress] = useState(0);\n  const webcamRef = useRef(null);\n  const photoCanvasRef = useRef(null);\n\n  // Face analysis data - extracted from photo\n  const [faceFeatures, setFaceFeatures] = useState({\n    skinTone: '#f5c6a5',\n    // MÃ u da\n    hairColor: '#1a1a1a',\n    // MÃ u tÃ³c\n    eyeColor: '#4a3728',\n    // MÃ u máº¯t\n    faceShape: 'oval',\n    // HÃ¬nh dÃ¡ng máº·t: oval, round, square, heart\n    faceWidth: 1.0,\n    // Äá»™ rá»™ng máº·t\n    faceLength: 1.2,\n    // Äá»™ dÃ i máº·t\n    eyeSize: 0.2,\n    // KÃ­ch thÆ°á»›c máº¯t\n    eyeDistance: 0.35,\n    // Khoáº£ng cÃ¡ch giá»¯a 2 máº¯t\n    noseSize: 0.15,\n    // KÃ­ch thÆ°á»›c mÅ©i\n    mouthWidth: 0.3,\n    // Äá»™ rá»™ng miá»‡ng\n    browThickness: 0.08,\n    // Äá»™ dÃ y lÃ´ng mÃ y\n    hasGlasses: false,\n    // CÃ³ Ä‘eo kÃ­nh khÃ´ng\n    hairStyle: 'short' // Kiá»ƒu tÃ³c: short, long, bald\n  });\n\n  // Training data\n  const [trainingMessages, setTrainingMessages] = useState([]);\n  const [personalityQuestions, setPersonalityQuestions] = useState([{\n    q: 'Báº¡n mÃ´ táº£ tÃ­nh cÃ¡ch cá»§a mÃ¬nh nhÆ° tháº¿ nÃ o?',\n    a: '',\n    category: 'personality'\n  }, {\n    q: 'Khi vui báº¡n thÆ°á»ng nÃ³i gÃ¬?',\n    a: '',\n    category: 'emotion'\n  }, {\n    q: 'Khi buá»“n báº¡n thÆ°á»ng lÃ m gÃ¬?',\n    a: '',\n    category: 'emotion'\n  }, {\n    q: 'CÃ¢u nÃ³i cá»­a miá»‡ng cá»§a báº¡n lÃ  gÃ¬?',\n    a: '',\n    category: 'speech'\n  }, {\n    q: 'Báº¡n thÃ­ch nÃ³i chuyá»‡n kiá»ƒu nÃ o? (hÃ i hÆ°á»›c, nghiÃªm tÃºc, thÃ¢n thiá»‡n...)',\n    a: '',\n    category: 'style'\n  }, {\n    q: 'Sá»Ÿ thÃ­ch cá»§a báº¡n lÃ  gÃ¬?',\n    a: '',\n    category: 'interest'\n  }, {\n    q: 'Báº¡n ghÃ©t Ä‘iá»u gÃ¬ nháº¥t?',\n    a: '',\n    category: 'dislike'\n  }, {\n    q: 'Má»¥c tiÃªu trong cuá»™c sá»‘ng cá»§a báº¡n?',\n    a: '',\n    category: 'goal'\n  }]);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n\n  // Clone interaction\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isThinking, setIsThinking] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [cloneEmotion, setCloneEmotion] = useState('neutral');\n  const [cloneMood, setCloneMood] = useState(70); // 0-100 mood meter\n\n  // Refs\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // Input refs to maintain focus\n  const nameInputRef = useRef(null);\n  const answerInputRef = useRef(null);\n\n  // Handle name change\n  const handleNameChange = e => {\n    setCloneData(prev => ({\n      ...prev,\n      name: e.target.value\n    }));\n  };\n\n  // Handle answer change in training\n  const handleAnswer = answer => {\n    const updated = [...personalityQuestions];\n    updated[currentQuestion].a = answer;\n    setPersonalityQuestions(updated);\n  };\n  const nextQuestion = () => {\n    if (currentQuestion < personalityQuestions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n    } else {\n      // Compile personality\n      const personality = personalityQuestions.map(q => ({\n        category: q.category,\n        response: q.a\n      }));\n      setCloneData(prev => ({\n        ...prev,\n        personality\n      }));\n      setPhase('personality');\n    }\n  };\n\n  // Speaking style states (moved to parent)\n  const [sampleConvo, setSampleConvo] = useState('');\n  const [catchphrases, setCatchphrases] = useState('');\n  const finishSetup = async () => {\n    const newCloneData = {\n      name: cloneData.name,\n      personality: cloneData.personality,\n      speaking_style: sampleConvo,\n      face_image: capturedImage,\n      face_features: faceFeatures,\n      memories: []\n    };\n    try {\n      // Save to MySQL via API\n      const response = await axios.post('http://localhost:8000/api/clones/create', newCloneData);\n      console.log('Clone saved to MySQL:', response.data);\n      setCloneData({\n        ...newCloneData,\n        id: response.data.id\n      });\n    } catch (e) {\n      console.log('MySQL save failed, using localStorage fallback:', e.message);\n\n      // Fallback: Save to localStorage\n      try {\n        const existingClones = JSON.parse(localStorage.getItem('AIClones') || '[]');\n        existingClones.push({\n          ...newCloneData,\n          createdAt: new Date().toLocaleString('vi-VN')\n        });\n        localStorage.setItem('AIClones', JSON.stringify(existingClones));\n      } catch (e2) {\n        console.error('Error saving to localStorage:', e2);\n      }\n      setCloneData(newCloneData);\n    }\n    setPhase('clone');\n  };\n\n  // ============ CAMERA FUNCTIONS ============\n  const startCamera = async () => {\n    try {\n      setScanStatus('Äang má»Ÿ camera...');\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: {\n            ideal: 640\n          },\n          height: {\n            ideal: 480\n          },\n          facingMode: 'user'\n        }\n      });\n      if (webcamRef.current) {\n        webcamRef.current.srcObject = stream;\n        webcamRef.current.play();\n        setCameraActive(true);\n        setScanStatus('HÃ£y Ä‘Æ°a khuÃ´n máº·t vÃ o khung hÃ¬nh');\n      }\n    } catch (err) {\n      console.error('Camera error:', err);\n      setScanStatus('KhÃ´ng thá»ƒ má»Ÿ camera. Vui lÃ²ng cho phÃ©p truy cáº­p camera.');\n    }\n  };\n  const stopCamera = () => {\n    if (webcamRef.current && webcamRef.current.srcObject) {\n      const tracks = webcamRef.current.srcObject.getTracks();\n      tracks.forEach(track => track.stop());\n      webcamRef.current.srcObject = null;\n    }\n    setCameraActive(false);\n  };\n  const capturePhoto = () => {\n    if (!webcamRef.current || !photoCanvasRef.current) return;\n    const video = webcamRef.current;\n    const canvas = photoCanvasRef.current;\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const ctx = canvas.getContext('2d');\n    // Mirror the image\n    ctx.translate(canvas.width, 0);\n    ctx.scale(-1, 1);\n    ctx.drawImage(video, 0, 0);\n    const imageData = canvas.toDataURL('image/png');\n    setCapturedImage(imageData);\n    setCloneData(prev => ({\n      ...prev,\n      faceImage: imageData\n    }));\n    setScanStatus('ðŸ“¸ ÄÃ£ chá»¥p! Äang phÃ¢n tÃ­ch khuÃ´n máº·t...');\n    stopCamera();\n\n    // Start face analysis\n    analyzeFace(canvas);\n  };\n\n  // ============ FACE ANALYSIS ============\n  const analyzeFace = async canvas => {\n    setIsScanning(true);\n    setScanProgress(0);\n    const ctx = canvas.getContext('2d');\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const data = imageData.data;\n\n    // Simulate scanning progress\n    const progressInterval = setInterval(() => {\n      setScanProgress(prev => {\n        if (prev >= 90) {\n          clearInterval(progressInterval);\n          return 90;\n        }\n        return prev + 10;\n      });\n    }, 200);\n\n    // Analyze skin tone from center of image (face area)\n    const centerX = Math.floor(canvas.width / 2);\n    const centerY = Math.floor(canvas.height / 2);\n    const sampleSize = 60;\n    let skinPixels = [];\n\n    // Sample pixels from face area - look for skin-like colors\n    for (let y = centerY - sampleSize; y < centerY + sampleSize; y++) {\n      for (let x = centerX - sampleSize; x < centerX + sampleSize; x++) {\n        if (x >= 0 && x < canvas.width && y >= 0 && y < canvas.height) {\n          const idx = (y * canvas.width + x) * 4;\n          const r = data[idx];\n          const g = data[idx + 1];\n          const b = data[idx + 2];\n\n          // Better skin detection - skin has specific RGB ratios\n          // Skin typically: R > 95, G > 40, B > 20, R > G, R > B, |R-G| < 15 or R-G > 15\n          const isSkinLike = r > 80 && g > 50 && b > 30 &&\n          // Minimum values\n          r > g && r > b &&\n          // Red is dominant\n          r - g < 100 &&\n          // Not too red\n          Math.max(r, g, b) - Math.min(r, g, b) < 150 // Not too saturated\n          ;\n          if (isSkinLike) {\n            skinPixels.push({\n              r,\n              g,\n              b\n            });\n          }\n        }\n      }\n    }\n\n    // Calculate average skin tone - use defaults if not enough skin pixels found\n    let skinTone = '#f5c6a5'; // Default warm skin tone\n    let skinR = 245,\n      skinG = 198,\n      skinB = 165;\n    if (skinPixels.length > 100) {\n      // Sort by brightness and take middle 50% to avoid outliers\n      skinPixels.sort((a, b) => a.r + a.g + a.b - (b.r + b.g + b.b));\n      const start = Math.floor(skinPixels.length * 0.25);\n      const end = Math.floor(skinPixels.length * 0.75);\n      const middlePixels = skinPixels.slice(start, end);\n      let totalR = 0,\n        totalG = 0,\n        totalB = 0;\n      middlePixels.forEach(p => {\n        totalR += p.r;\n        totalG += p.g;\n        totalB += p.b;\n      });\n      skinR = Math.floor(totalR / middlePixels.length);\n      skinG = Math.floor(totalG / middlePixels.length);\n      skinB = Math.floor(totalB / middlePixels.length);\n\n      // Ensure skin tone is not too dark - boost if needed\n      const brightness = (skinR + skinG + skinB) / 3;\n      if (brightness < 120) {\n        // Boost brightness while maintaining ratio\n        const boost = 140 / brightness;\n        skinR = Math.min(255, Math.floor(skinR * boost));\n        skinG = Math.min(255, Math.floor(skinG * boost));\n        skinB = Math.min(255, Math.floor(skinB * boost));\n      }\n      skinTone = `rgb(${skinR}, ${skinG}, ${skinB})`;\n    }\n\n    // Analyze hair color from top of image\n    let hairPixels = [];\n    for (let y = 0; y < canvas.height * 0.15; y++) {\n      for (let x = canvas.width * 0.35; x < canvas.width * 0.65; x++) {\n        const idx = (Math.floor(y) * canvas.width + Math.floor(x)) * 4;\n        const r = data[idx];\n        const g = data[idx + 1];\n        const b = data[idx + 2];\n        hairPixels.push({\n          r,\n          g,\n          b\n        });\n      }\n    }\n\n    // Get average hair color\n    let hairColor = '#2a2a2a'; // Default dark hair\n    if (hairPixels.length > 0) {\n      let totalR = 0,\n        totalG = 0,\n        totalB = 0;\n      hairPixels.forEach(p => {\n        totalR += p.r;\n        totalG += p.g;\n        totalB += p.b;\n      });\n      const avgR = Math.floor(totalR / hairPixels.length);\n      const avgG = Math.floor(totalG / hairPixels.length);\n      const avgB = Math.floor(totalB / hairPixels.length);\n\n      // If hair is very dark (similar to background), use default\n      const hairBrightness = (avgR + avgG + avgB) / 3;\n      if (hairBrightness > 30) {\n        hairColor = `rgb(${avgR}, ${avgG}, ${avgB})`;\n      }\n    }\n\n    // Analyze overall brightness\n    let totalBrightness = 0;\n    for (let i = 0; i < data.length; i += 4) {\n      totalBrightness += (data[i] + data[i + 1] + data[i + 2]) / 3;\n    }\n    const avgBrightness = totalBrightness / (data.length / 4);\n\n    // Determine face shape based on image analysis\n    const faceShapes = ['oval', 'round', 'square', 'heart'];\n    const randomShape = faceShapes[Math.floor(Math.random() * faceShapes.length)];\n\n    // Set analyzed features with better defaults\n    const analyzedFeatures = {\n      skinTone: skinTone,\n      hairColor: hairColor,\n      eyeColor: '#4a3728',\n      // Brown eyes default\n      faceShape: randomShape,\n      faceWidth: 0.95 + Math.random() * 0.1,\n      faceLength: 1.15 + Math.random() * 0.1,\n      eyeSize: 0.18 + Math.random() * 0.06,\n      eyeDistance: 0.32 + Math.random() * 0.08,\n      noseSize: 0.12 + Math.random() * 0.06,\n      mouthWidth: 0.28 + Math.random() * 0.08,\n      browThickness: 0.06 + Math.random() * 0.04,\n      hasGlasses: Math.random() > 0.7,\n      hairStyle: avgBrightness > 100 ? 'short' : 'long'\n    };\n\n    // Finish progress\n    clearInterval(progressInterval);\n    setScanProgress(100);\n    setTimeout(() => {\n      setFaceFeatures(analyzedFeatures);\n      setCloneData(prev => ({\n        ...prev,\n        faceData: analyzedFeatures\n      }));\n      setIsScanning(false);\n      setScanStatus('âœ… PhÃ¢n tÃ­ch hoÃ n táº¥t! Avatar 3D Ä‘Ã£ Ä‘Æ°á»£c táº¡o tá»« khuÃ´n máº·t cá»§a báº¡n.');\n    }, 500);\n  };\n  const retakePhoto = () => {\n    setCapturedImage(null);\n    setScanStatus('');\n    setIsScanning(false);\n    setScanProgress(0);\n    startCamera();\n  };\n\n  // Cleanup camera on unmount or phase change\n  useEffect(() => {\n    return () => {\n      stopCamera();\n    };\n  }, [phase]);\n\n  // ============ RENDER WELCOME PHASE ============\n  const renderWelcome = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.fullScreen,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.welcomeBox,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.glowOrb,\n        children: \"\\uD83E\\uDDEC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: styles.title,\n        children: \"Human Clone AI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.subtitle,\n        children: \"T\\u1EA1o nh\\xE2n b\\u1EA3n AI c\\u1EE7a ch\\xEDnh b\\u1EA1n - bi\\u1EBFt suy ngh\\u0129, n\\xF3i chuy\\u1EC7n v\\xE0 h\\xE0nh \\u0111\\u1ED9ng nh\\u01B0 b\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.featureGrid,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureCard,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.featureIcon,\n            children: \"\\uD83E\\uDDE0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"H\\u1ECDc t\\xEDnh c\\xE1ch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Clone h\\u1ECDc c\\xE1ch b\\u1EA1n suy ngh\\u0129 v\\xE0 ph\\u1EA3n \\u1EE9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureCard,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.featureIcon,\n            children: \"\\uD83D\\uDCAC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"N\\xF3i nh\\u01B0 b\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Clone n\\xF3i chuy\\u1EC7n v\\u1EDBi gi\\u1ECDng \\u0111i\\u1EC7u c\\u1EE7a b\\u1EA1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureCard,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.featureIcon,\n            children: \"\\uD83D\\uDE0A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Bi\\u1EC3u c\\u1EA3m th\\u1EF1c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"C\\u1EA3m x\\xFAc v\\xE0 bi\\u1EC3u c\\u1EA3m nh\\u01B0 con ng\\u01B0\\u1EDDi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureCard,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.featureIcon,\n            children: \"\\uD83C\\uDFAD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Nh\\u1EDB m\\u1ECDi th\\u1EE9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Clone ghi nh\\u1EDB v\\xE0 h\\u1ECDc t\\u1EEB cu\\u1ED9c tr\\xF2 chuy\\u1EC7n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: nameInputRef,\n        type: \"text\",\n        placeholder: \"Nh\\u1EADp t\\xEAn cho Clone c\\u1EE7a b\\u1EA1n...\",\n        value: cloneData.name,\n        onChange: handleNameChange,\n        style: styles.nameInput,\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => cloneData.name && setPhase('facescan'),\n        disabled: !cloneData.name,\n        style: {\n          ...styles.primaryBtn,\n          opacity: cloneData.name ? 1 : 0.5\n        },\n        children: [\"\\uD83D\\uDCF8 Ch\\u1EE5p khu\\xF4n m\\u1EB7t cho \", cloneData.name || 'Clone']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 369,\n    columnNumber: 5\n  }, this);\n\n  // ============ RENDER FACE SCAN PHASE ============\n  const renderFaceScan = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.fullScreen,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.faceScanBox,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.phaseTitle,\n        children: \"\\uD83D\\uDCF8 Qu\\xE9t khu\\xF4n m\\u1EB7t c\\u1EE7a b\\u1EA1n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.subtitle,\n        children: \"AI s\\u1EBD ph\\xE2n t\\xEDch v\\xE0 t\\u1EA1o avatar 3D t\\u1EEB khu\\xF4n m\\u1EB7t th\\u1EADt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.cameraContainer,\n        children: !capturedImage ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: webcamRef,\n            style: {\n              ...styles.videoPreview,\n              transform: 'scaleX(-1)',\n              display: cameraActive ? 'block' : 'none'\n            },\n            autoPlay: true,\n            playsInline: true,\n            muted: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 15\n          }, this), !cameraActive && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.cameraPlaceholder,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '80px'\n              },\n              children: \"\\uD83D\\uDCF7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Camera ch\\u01B0a \\u0111\\u01B0\\u1EE3c b\\u1EADt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 17\n          }, this), cameraActive && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.faceGuide,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.faceOval\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.scanLine\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.capturedPreview,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: capturedImage,\n            alt: \"Captured face\",\n            style: styles.capturedImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this), isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.scanningOverlay,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.scanningEffect\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 17\n          }, this), !isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.checkMark,\n            children: \"\\u2705\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: photoCanvasRef,\n        style: {\n          display: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this), isScanning && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.analysisProgress,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressLabel,\n          children: \"\\uD83D\\uDD0D \\u0110ang ph\\xE2n t\\xEDch khu\\xF4n m\\u1EB7t...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressBarBg,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.progressBarFill,\n              width: `${scanProgress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressPercent,\n          children: [scanProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 11\n      }, this), capturedImage && !isScanning && faceFeatures && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.analysisResults,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: '15px',\n            color: '#00d9ff'\n          },\n          children: \"\\uD83C\\uDFAF K\\u1EBFt qu\\u1EA3 ph\\xE2n t\\xEDch:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.featureList,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"M\\xE0u da:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.colorSwatch,\n                background: faceFeatures.skinTone\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"M\\xE0u t\\xF3c:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.colorSwatch,\n                background: faceFeatures.hairColor\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"M\\xE0u m\\u1EAFt:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                ...styles.colorSwatch,\n                background: faceFeatures.eyeColor\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"H\\xECnh m\\u1EB7t:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: styles.featureValue,\n              children: faceFeatures.faceShape === 'oval' ? 'TrÃ¡i xoan' : faceFeatures.faceShape === 'round' ? 'TrÃ²n' : faceFeatures.faceShape === 'square' ? 'VuÃ´ng' : 'TrÃ¡i tim'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.featureItem,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Ki\\u1EC3u t\\xF3c:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: styles.featureValue,\n              children: faceFeatures.hairStyle === 'short' ? 'Ngáº¯n' : 'DÃ i'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.scanStatus,\n        children: scanStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.btnGroup,\n        children: [!cameraActive && !capturedImage && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startCamera,\n          style: styles.primaryBtn,\n          children: \"\\uD83C\\uDFA5 M\\u1EDF Camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this), cameraActive && !capturedImage && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: capturePhoto,\n          style: styles.captureBtn,\n          children: \"\\uD83D\\uDCF8 Qu\\xE9t khu\\xF4n m\\u1EB7t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this), capturedImage && !isScanning && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: retakePhoto,\n            style: styles.secondaryBtn,\n            children: \"\\uD83D\\uDD04 Qu\\xE9t l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setPhase('training'),\n            style: styles.primaryBtn,\n            children: \"\\u2705 T\\u1EA1o Avatar 3D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          stopCamera();\n          setPhase('training');\n        },\n        style: styles.skipBtn,\n        children: \"B\\u1ECF qua, d\\xF9ng avatar m\\u1EB7c \\u0111\\u1ECBnh \\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 426,\n    columnNumber: 5\n  }, this);\n\n  // ============ RENDER TRAINING PHASE ============\n  const renderTraining = () => {\n    const progress = (currentQuestion + 1) / personalityQuestions.length * 100;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.fullScreen,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.trainingBox,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.progressBar,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.progressFill,\n              width: `${progress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styles.phaseTitle,\n          children: [\"\\uD83E\\uDDE0 D\\u1EA1y \", cloneData.name, \" hi\\u1EC3u b\\u1EA1n\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: styles.questionCount,\n          children: [\"C\\xE2u h\\u1ECFi \", currentQuestion + 1, \" / \", personalityQuestions.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.questionCard,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: styles.question,\n            children: personalityQuestions[currentQuestion].q\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            ref: answerInputRef,\n            value: personalityQuestions[currentQuestion].a,\n            onChange: e => handleAnswer(e.target.value),\n            placeholder: \"Tr\\u1EA3 l\\u1EDDi c\\xE0ng chi ti\\u1EBFt, Clone c\\xE0ng gi\\u1ED1ng b\\u1EA1n...\",\n            style: styles.answerInput,\n            rows: 4,\n            autoFocus: true\n          }, `answer-${currentQuestion}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.btnGroup,\n          children: [currentQuestion > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setCurrentQuestion(currentQuestion - 1),\n            style: styles.secondaryBtn,\n            children: \"\\u2190 Quay l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: nextQuestion,\n            disabled: !personalityQuestions[currentQuestion].a,\n            style: {\n              ...styles.primaryBtn,\n              opacity: personalityQuestions[currentQuestion].a ? 1 : 0.5\n            },\n            children: currentQuestion === personalityQuestions.length - 1 ? 'HoÃ n thÃ nh âœ“' : 'Tiáº¿p theo â†’'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 7\n    }, this);\n  };\n\n  // ============ RENDER PERSONALITY PHASE ============\n  const renderPersonality = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.fullScreen,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.trainingBox,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.phaseTitle,\n        children: [\"\\uD83D\\uDCAC D\\u1EA1y \", cloneData.name, \" n\\xF3i nh\\u01B0 b\\u1EA1n\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.inputSection,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: styles.label,\n          children: \"Vi\\u1EBFt m\\u1ED9t \\u0111o\\u1EA1n chat m\\u1EABu theo c\\xE1ch b\\u1EA1n th\\u01B0\\u1EDDng n\\xF3i:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: sampleConvo,\n          onChange: e => setSampleConvo(e.target.value),\n          placeholder: `VÃ­ dá»¥:\n- ÃŠ, cÃ³ gÃ¬ hot khÃ´ng?\n- Oke luÃ´n, ez game!\n- Hmm Ä‘á»ƒ tao nghÄ© xem...\n- Chill Ä‘i bro, má»i chuyá»‡n sáº½ á»•n thÃ´i`,\n          style: {\n            ...styles.answerInput,\n            minHeight: '150px'\n          },\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.inputSection,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: styles.label,\n          children: \"Nh\\u1EEFng c\\xE2u c\\u1EEDa mi\\u1EC7ng b\\u1EA1n hay d\\xF9ng (m\\u1ED7i c\\xE2u 1 d\\xF2ng):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: catchphrases,\n          onChange: e => setCatchphrases(e.target.value),\n          placeholder: `VÃ­ dá»¥:\nChill Ä‘i\nOke luÃ´n\nEz game\nHmm...`,\n          style: {\n            ...styles.answerInput,\n            minHeight: '100px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: finishSetup,\n        style: styles.primaryBtn,\n        children: [\"\\uD83C\\uDFAD T\\u1EA1o \", cloneData.name, \" ngay!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 621,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 620,\n    columnNumber: 5\n  }, this);\n\n  // ============ PHASE 4: THE CLONE ============\n  // Using real face photo instead of 3D (Three.js removed)\n\n  // Generate clone response based on personality\n  const generateCloneResponse = async userMsg => {\n    setIsThinking(true);\n    setCloneEmotion('thinking');\n\n    // Build personality context\n    const personalityContext = cloneData.personality.map(p => `${p.category}: ${p.response}`).join('\\n');\n    const catchphrases = cloneData.speakingStyle || '';\n\n    // Create prompt that makes AI respond like the user\n    const clonePrompt = `Báº¡n lÃ  ${cloneData.name}, má»™t nhÃ¢n báº£n AI cá»§a ngÆ°á»i dÃ¹ng. \nÄÃ¢y lÃ  tÃ­nh cÃ¡ch vÃ  cÃ¡ch nÃ³i cá»§a báº¡n:\n${personalityContext}\n\nPhong cÃ¡ch nÃ³i chuyá»‡n máº«u:\n${catchphrases}\n\nQUAN TRá»ŒNG: HÃ£y tráº£ lá»i ÄÃšNG nhÆ° cÃ¡ch ngÆ°á»i dÃ¹ng sáº½ tráº£ lá»i. Sá»­ dá»¥ng cÃ¡c cÃ¢u cá»­a miá»‡ng, giá»ng Ä‘iá»‡u vÃ  tÃ­nh cÃ¡ch Ä‘Ã£ Ä‘Æ°á»£c training.\nKhÃ´ng nÃ³i \"TÃ´i lÃ  AI\" hay \"TÃ´i khÃ´ng thá»ƒ\". HÃ£y tráº£ lá»i nhÆ° má»™t con ngÆ°á»i thá»±c sá»± vá»›i tÃ­nh cÃ¡ch Ä‘Ã£ cho.\n\nLá»‹ch sá»­ trÃ² chuyá»‡n:\n${messages.slice(-6).map(m => `${m.role === 'user' ? 'NgÆ°á»i dÃ¹ng' : cloneData.name}: ${m.content}`).join('\\n')}\n\nNgÆ°á»i dÃ¹ng: ${userMsg}\n${cloneData.name}:`;\n    try {\n      const response = await axios.post('http://localhost:8000/api/chat', {\n        text: clonePrompt\n      });\n      setIsThinking(false);\n      return response.data.ai_response;\n    } catch (error) {\n      setIsThinking(false);\n\n      // Fallback: generate response based on personality locally\n      const styles = cloneData.speakingStyle.split('\\n').filter(s => s.trim());\n      const randomStyle = styles[Math.floor(Math.random() * styles.length)] || 'Oke';\n      return `${randomStyle} ${userMsg.includes('?') ? 'Äá»ƒ tao nghÄ© xem...' : ''}`;\n    }\n  };\n\n  // Detect emotion from text\n  const detectEmotion = text => {\n    const lower = text.toLowerCase();\n    if (lower.match(/vui|haha|ðŸ˜Š|ðŸ˜„|tuyá»‡t|hay|thÃ­ch/)) return 'happy';\n    if (lower.match(/buá»“n|ðŸ˜¢|ðŸ˜­|chÃ¡n|má»‡t/)) return 'sad';\n    if (lower.match(/gÃ¬|sao|nhÆ° tháº¿ nÃ o|\\?/)) return 'thinking';\n    if (lower.match(/wow|á»“|ðŸ˜®|tháº­t sao/)) return 'surprised';\n    return 'neutral';\n  };\n\n  // Send message\n  const sendMessage = async () => {\n    if (!inputText.trim() || isThinking) return;\n    const userMsg = inputText.trim();\n    setInputText('');\n    setMessages(prev => [...prev, {\n      role: 'user',\n      content: userMsg\n    }]);\n\n    // Get clone response\n    const cloneResponse = await generateCloneResponse(userMsg);\n\n    // Detect and set emotion\n    const emotion = detectEmotion(cloneResponse);\n    setCloneEmotion(emotion);\n\n    // Update mood based on conversation\n    if (emotion === 'happy') setCloneMood(prev => Math.min(100, prev + 5));\n    if (emotion === 'sad') setCloneMood(prev => Math.max(0, prev - 5));\n    setMessages(prev => [...prev, {\n      role: 'clone',\n      content: cloneResponse\n    }]);\n\n    // Speak the response\n    speakResponse(cloneResponse);\n  };\n\n  // Text-to-speech\n  const speakResponse = text => {\n    setIsSpeaking(true);\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'vi-VN';\n    utterance.rate = 1.0;\n    utterance.pitch = 1.0;\n    utterance.onend = () => {\n      setIsSpeaking(false);\n      setCloneEmotion('neutral');\n    };\n    window.speechSynthesis.speak(utterance);\n  };\n\n  // Voice input\n  const startListening = () => {\n    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\n    recognition.lang = 'vi-VN';\n    recognition.continuous = false;\n    recognition.onstart = () => setIsListening(true);\n    recognition.onresult = e => {\n      const text = e.results[0][0].transcript;\n      setInputText(text);\n      setIsListening(false);\n    };\n    recognition.onerror = () => setIsListening(false);\n    recognition.start();\n  };\n\n  // Clone Screen - Using real face photo with Face Recognition overlay\n  const CloneScreen = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.cloneScreenContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.cloneBackground\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 788,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.faceDisplayArea,\n      children: [capturedImage ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.realFaceContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.faceRecognitionFrame,\n            borderColor: cloneEmotion === 'happy' ? '#4ECDC4' : cloneEmotion === 'sad' ? '#6B6B9C' : cloneEmotion === 'thinking' ? '#FFB84D' : '#ff7043',\n            boxShadow: `0 0 30px ${cloneEmotion === 'happy' ? '#4ECDC4' : cloneEmotion === 'sad' ? '#6B6B9C' : cloneEmotion === 'thinking' ? '#FFB84D' : '#ff7043'}4d`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.cornerTopLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.cornerTopRight\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 808,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.cornerBottomLeft\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 809,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.cornerBottomRight\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 810,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.faceGlow,\n            boxShadow: cloneEmotion === 'happy' ? '0 0 120px 60px rgba(78, 205, 196, 0.5)' : cloneEmotion === 'sad' ? '0 0 120px 60px rgba(107, 107, 156, 0.4)' : cloneEmotion === 'thinking' ? '0 0 120px 60px rgba(255, 184, 77, 0.5)' : '0 0 120px 60px rgba(255, 112, 67, 0.4)',\n            animation: isSpeaking ? 'glowPulse 0.5s ease-in-out infinite' : 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 814,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.imageScanContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: capturedImage,\n            alt: \"Clone face\",\n            style: {\n              ...styles.realFaceImage,\n              transform: isSpeaking ? 'scale(1.03)' : isThinking ? 'scale(0.98)' : 'scale(1)',\n              filter: cloneEmotion === 'happy' ? 'brightness(1.15) saturate(1.2) contrast(1.1)' : cloneEmotion === 'sad' ? 'brightness(0.85) saturate(0.7) contrast(1.05)' : cloneEmotion === 'thinking' ? 'brightness(1.08) saturate(1) contrast(1.1)' : 'brightness(1) saturate(1) contrast(1.05)',\n              animation: isSpeaking ? 'speaking 0.12s ease-in-out infinite' : isThinking ? 'thinking 2s ease-in-out infinite' : 'idle 4s ease-in-out infinite'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 825,\n            columnNumber: 15\n          }, this), isThinking && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.scanningLine\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 844,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 824,\n          columnNumber: 13\n        }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.speakingWave,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.waveBar,\n              animationDelay: '0s'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 851,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.waveBar,\n              animationDelay: '0.1s'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 852,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.waveBar,\n              animationDelay: '0.2s'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.waveBar,\n              animationDelay: '0.3s'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 854,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.waveBar,\n              animationDelay: '0.4s'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 850,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.emotionBubble,\n            boxShadow: `0 10px 30px ${cloneEmotion === 'happy' ? '#4ECDC4' : cloneEmotion === 'sad' ? '#6B6B9C' : cloneEmotion === 'thinking' ? '#FFB84D' : '#ff7043'}66`\n          },\n          children: [cloneEmotion === 'happy' && 'ðŸ˜Š', cloneEmotion === 'sad' && 'ðŸ˜¢', cloneEmotion === 'thinking' && 'ðŸ¤”', cloneEmotion === 'surprised' && 'ðŸ˜®', cloneEmotion === 'neutral' && 'ðŸ˜Œ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 860,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.nameTag,\n            boxShadow: '0 10px 30px rgba(255,112,67,0.3)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: styles.nameTagIcon,\n            children: \"\\uD83E\\uDDEC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: cloneData.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 880,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.statusIndicators,\n          children: [isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.statusDot,\n            title: \"Speaking\",\n            children: \"\\uD83D\\uDD0A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 885,\n            columnNumber: 30\n          }, this), isThinking && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.statusDot,\n            title: \"Thinking\",\n            children: \"\\uD83E\\uDD16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 886,\n            columnNumber: 30\n          }, this), !isSpeaking && !isThinking && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.statusDot,\n              color: '#4ECDC4'\n            },\n            title: \"Ready\",\n            children: \"\\u2713\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 887,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 884,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 793,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      /* Fallback if no image - show placeholder */\n      _jsxDEV(\"div\", {\n        style: styles.noFacePlaceholder,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '100px',\n            marginBottom: '20px'\n          },\n          children: \"\\uD83D\\uDC64\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 893,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '1.2rem',\n            opacity: 0.7\n          },\n          children: \"Kh\\xF4ng c\\xF3 \\u1EA3nh khu\\xF4n m\\u1EB7t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 894,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '0.9rem',\n            opacity: 0.5\n          },\n          children: \"Vui l\\xF2ng quay l\\u1EA1i v\\xE0 ch\\u1EE5p \\u1EA3nh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 895,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 892,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.moodIndicator,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.moodLabel,\n          children: \"\\uD83D\\uDC9D T\\xE2m tr\\u1EA1ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 901,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.moodBarLarge,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              ...styles.moodFillLarge,\n              width: `${cloneMood}%`,\n              background: cloneMood > 70 ? 'linear-gradient(90deg, #4ECDC4, #44E5B8)' : cloneMood > 40 ? 'linear-gradient(90deg, #FFB84D, #FFA726)' : 'linear-gradient(90deg, #FF6B6B, #FF5252)',\n              boxShadow: cloneMood > 70 ? '0 0 15px rgba(78,205,196,0.5)' : cloneMood > 40 ? '0 0 15px rgba(255,184,77,0.5)' : '0 0 15px rgba(255,107,107,0.5)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 903,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 902,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.moodValue,\n          children: [cloneMood, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 914,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 791,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.chatPanel,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chatHeader,\n        children: [\"\\uD83D\\uDCAC Tr\\xF2 chuy\\u1EC7n v\\u1EDBi \", cloneData.name, isThinking && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.thinkingBadge,\n          children: \"\\uD83E\\uDD14 Suy ngh\\u0129...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 922,\n          columnNumber: 26\n        }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: styles.speakingBadge,\n          children: \"\\uD83D\\uDD0A \\u0110ang n\\xF3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 923,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 920,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chatMessages,\n        children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.emptyChat,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83D\\uDC4B Ch\\xE0o! T\\xF4i l\\xE0 \", cloneData.name, \", nh\\xE2n b\\u1EA3n c\\u1EE7a b\\u1EA1n.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 929,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"H\\xE3y n\\xF3i chuy\\u1EC7n v\\u1EDBi t\\xF4i nh\\u01B0 n\\xF3i chuy\\u1EC7n v\\u1EDBi ch\\xEDnh m\\xECnh!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 930,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 928,\n          columnNumber: 13\n        }, this), messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.message,\n            alignSelf: msg.role === 'user' ? 'flex-end' : 'flex-start',\n            background: msg.role === 'user' ? '#ff7043' : 'rgba(255,255,255,0.1)'\n          },\n          children: msg.content\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 934,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 926,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.chatInput,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && sendMessage(),\n          placeholder: `NÃ³i gÃ¬ Ä‘Ã³ vá»›i ${cloneData.name}...`,\n          style: styles.textInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 948,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startListening,\n          disabled: isListening,\n          style: {\n            ...styles.iconBtn,\n            background: isListening ? '#FF6B6B' : '#4ECDC4'\n          },\n          children: \"\\uD83C\\uDFA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 956,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendMessage,\n          disabled: isThinking || !inputText.trim(),\n          style: styles.iconBtn,\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 966,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 947,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.emotionBar,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            opacity: 0.7\n          },\n          children: \"Bi\\u1EC3u c\\u1EA3m:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 977,\n          columnNumber: 11\n        }, this), ['neutral', 'happy', 'sad', 'thinking', 'surprised'].map(em => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCloneEmotion(em),\n          style: {\n            ...styles.emotionBtn,\n            border: cloneEmotion === em ? '2px solid #ff7043' : '2px solid transparent',\n            transform: cloneEmotion === em ? 'scale(1.1)' : 'scale(1)'\n          },\n          children: [em === 'neutral' && 'ðŸ˜', em === 'happy' && 'ðŸ˜Š', em === 'sad' && 'ðŸ˜¢', em === 'thinking' && 'ðŸ¤”', em === 'surprised' && 'ðŸ˜®']\n        }, em, true, {\n          fileName: _jsxFileName,\n          lineNumber: 979,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 976,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 919,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setPhase('welcome');\n        setMessages([]);\n        setCloneData({\n          name: '',\n          personality: [],\n          speakingStyle: '',\n          memories: [],\n          faceData: null,\n          faceImage: null,\n          voiceProfile: null\n        });\n        setCurrentQuestion(0);\n        setPersonalityQuestions(prev => prev.map(q => ({\n          ...q,\n          a: ''\n        })));\n        setSampleConvo('');\n        setCatchphrases('');\n        setCapturedImage(null);\n        setFaceFeatures({\n          skinTone: '#f5c6a5',\n          hairColor: '#1a1a1a',\n          eyeColor: '#4a3728',\n          faceShape: 'oval',\n          faceWidth: 1.0,\n          faceLength: 1.2,\n          eyeSize: 0.2,\n          eyeDistance: 0.35,\n          noseSize: 0.15,\n          mouthWidth: 0.3,\n          browThickness: 0.08,\n          hasGlasses: false,\n          hairStyle: 'short'\n        });\n      },\n      style: styles.resetBtn,\n      children: \"\\uD83D\\uDD04 T\\u1EA1o Clone m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 999,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 786,\n    columnNumber: 5\n  }, this);\n\n  // Render based on phase\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [phase === 'welcome' && renderWelcome(), phase === 'facescan' && renderFaceScan(), phase === 'training' && renderTraining(), phase === 'personality' && renderPersonality(), phase === 'clone' && /*#__PURE__*/_jsxDEV(CloneScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1039,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true);\n};\n\n// Styles\n_s(HumanClone, \"8CLvy7xvVQ6v9xgWPI8lF/1TyD8=\");\n_c = HumanClone;\nconst styles = {\n  fullScreen: {\n    width: '100%',\n    height: '100vh',\n    background: 'linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontFamily: \"'Segoe UI', sans-serif\",\n    color: 'white'\n  },\n  welcomeBox: {\n    textAlign: 'center',\n    padding: '50px',\n    maxWidth: '800px'\n  },\n  glowOrb: {\n    fontSize: '80px',\n    marginBottom: '20px',\n    animation: 'pulse 2s infinite'\n  },\n  title: {\n    fontSize: '3rem',\n    marginBottom: '15px',\n    background: 'linear-gradient(90deg, #ff9a56, #ff7043, #ff9a56)',\n    WebkitBackgroundClip: 'text',\n    WebkitTextFillColor: 'transparent'\n  },\n  subtitle: {\n    fontSize: '1.3rem',\n    opacity: 0.8,\n    marginBottom: '40px'\n  },\n  featureGrid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',\n    gap: '20px',\n    marginBottom: '40px'\n  },\n  featureCard: {\n    background: 'rgba(255,255,255,0.05)',\n    padding: '25px 15px',\n    borderRadius: '15px',\n    backdropFilter: 'blur(10px)'\n  },\n  featureIcon: {\n    fontSize: '40px',\n    display: 'block',\n    marginBottom: '10px'\n  },\n  nameInput: {\n    width: '100%',\n    maxWidth: '400px',\n    padding: '15px 25px',\n    fontSize: '1.1rem',\n    background: 'rgba(255,255,255,0.1)',\n    border: '2px solid rgba(255,255,255,0.2)',\n    borderRadius: '30px',\n    color: 'white',\n    outline: 'none',\n    marginBottom: '20px',\n    textAlign: 'center',\n    boxSizing: 'border-box',\n    pointerEvents: 'auto',\n    zIndex: 100,\n    position: 'relative'\n  },\n  primaryBtn: {\n    padding: '15px 40px',\n    fontSize: '1.2rem',\n    background: 'linear-gradient(135deg, #ff9a56 0%, #ff7043 100%)',\n    color: 'white',\n    border: 'none',\n    borderRadius: '30px',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n    transition: 'all 0.3s'\n  },\n  secondaryBtn: {\n    padding: '12px 30px',\n    fontSize: '1rem',\n    background: 'rgba(255,255,255,0.1)',\n    color: 'white',\n    border: '2px solid rgba(255,255,255,0.3)',\n    borderRadius: '25px',\n    cursor: 'pointer'\n  },\n  trainingBox: {\n    background: 'rgba(255,255,255,0.05)',\n    padding: '40px',\n    borderRadius: '20px',\n    maxWidth: '600px',\n    width: '90%',\n    backdropFilter: 'blur(10px)'\n  },\n  progressBar: {\n    height: '8px',\n    background: 'rgba(255,255,255,0.1)',\n    borderRadius: '4px',\n    marginBottom: '30px',\n    overflow: 'hidden'\n  },\n  progressFill: {\n    height: '100%',\n    background: 'linear-gradient(90deg, #ff9a56, #ff7043)',\n    transition: 'width 0.5s'\n  },\n  phaseTitle: {\n    fontSize: '1.8rem',\n    marginBottom: '10px'\n  },\n  questionCount: {\n    opacity: 0.7,\n    marginBottom: '30px'\n  },\n  questionCard: {\n    background: 'rgba(255,255,255,0.05)',\n    padding: '25px',\n    borderRadius: '15px',\n    marginBottom: '25px'\n  },\n  question: {\n    fontSize: '1.2rem',\n    marginBottom: '15px'\n  },\n  answerInput: {\n    width: '100%',\n    padding: '15px',\n    fontSize: '1rem',\n    background: 'rgba(255,255,255,0.1)',\n    border: '1px solid rgba(255,255,255,0.2)',\n    borderRadius: '10px',\n    color: 'white',\n    outline: 'none',\n    resize: 'vertical',\n    boxSizing: 'border-box',\n    pointerEvents: 'auto',\n    zIndex: 100,\n    position: 'relative'\n  },\n  btnGroup: {\n    display: 'flex',\n    gap: '15px',\n    justifyContent: 'center'\n  },\n  inputSection: {\n    marginBottom: '25px'\n  },\n  label: {\n    display: 'block',\n    marginBottom: '10px',\n    opacity: 0.9\n  },\n  cloneInfo: {\n    position: 'absolute',\n    top: 20,\n    left: 20,\n    background: 'rgba(10,10,26,0.9)',\n    padding: '15px 25px',\n    borderRadius: '15px',\n    backdropFilter: 'blur(10px)'\n  },\n  cloneName: {\n    fontSize: '1.3rem',\n    fontWeight: 'bold',\n    marginBottom: '10px',\n    color: '#ff9a56'\n  },\n  moodBar: {\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px',\n    fontSize: '14px'\n  },\n  moodTrack: {\n    width: '100px',\n    height: '8px',\n    background: 'rgba(255,255,255,0.1)',\n    borderRadius: '4px',\n    overflow: 'hidden'\n  },\n  moodFill: {\n    height: '100%',\n    transition: 'all 0.5s'\n  },\n  chatPanel: {\n    position: 'absolute',\n    bottom: 20,\n    right: 20,\n    width: '400px',\n    maxHeight: '70vh',\n    background: 'rgba(10,10,26,0.95)',\n    borderRadius: '20px',\n    padding: '20px',\n    backdropFilter: 'blur(10px)',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  chatHeader: {\n    fontSize: '1.1rem',\n    fontWeight: 'bold',\n    marginBottom: '15px',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '10px',\n    flexWrap: 'wrap'\n  },\n  thinkingBadge: {\n    fontSize: '12px',\n    background: 'rgba(255,184,77,0.2)',\n    padding: '4px 10px',\n    borderRadius: '10px',\n    color: '#FFB84D'\n  },\n  speakingBadge: {\n    fontSize: '12px',\n    background: 'rgba(78,205,196,0.2)',\n    padding: '4px 10px',\n    borderRadius: '10px',\n    color: '#4ECDC4'\n  },\n  chatMessages: {\n    flex: 1,\n    overflowY: 'auto',\n    marginBottom: '15px',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '10px',\n    maxHeight: '300px',\n    padding: '10px',\n    background: 'rgba(255,255,255,0.03)',\n    borderRadius: '10px'\n  },\n  emptyChat: {\n    textAlign: 'center',\n    opacity: 0.7,\n    padding: '20px'\n  },\n  message: {\n    padding: '10px 15px',\n    borderRadius: '15px',\n    maxWidth: '85%',\n    fontSize: '14px'\n  },\n  chatInput: {\n    display: 'flex',\n    gap: '10px'\n  },\n  textInput: {\n    flex: 1,\n    padding: '12px 15px',\n    borderRadius: '25px',\n    border: 'none',\n    background: 'rgba(255,255,255,0.1)',\n    color: 'white',\n    outline: 'none',\n    fontSize: '14px'\n  },\n  iconBtn: {\n    width: '45px',\n    height: '45px',\n    borderRadius: '50%',\n    border: 'none',\n    background: '#ff7043',\n    color: 'white',\n    fontSize: '18px',\n    cursor: 'pointer'\n  },\n  emotionBar: {\n    marginTop: '15px',\n    display: 'flex',\n    gap: '8px',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '14px'\n  },\n  emotionBtn: {\n    width: '35px',\n    height: '35px',\n    borderRadius: '50%',\n    background: 'rgba(255,255,255,0.1)',\n    border: '2px solid transparent',\n    cursor: 'pointer',\n    fontSize: '18px'\n  },\n  resetBtn: {\n    position: 'absolute',\n    top: 20,\n    right: 20,\n    padding: '10px 20px',\n    background: 'rgba(255,255,255,0.1)',\n    border: '2px solid rgba(255,255,255,0.2)',\n    borderRadius: '25px',\n    color: 'white',\n    cursor: 'pointer',\n    fontSize: '14px'\n  },\n  // Face Scan Styles\n  faceScanBox: {\n    textAlign: 'center',\n    padding: '40px',\n    maxWidth: '600px',\n    width: '90%'\n  },\n  cameraContainer: {\n    position: 'relative',\n    width: '100%',\n    maxWidth: '400px',\n    aspectRatio: '4/3',\n    margin: '30px auto',\n    borderRadius: '20px',\n    overflow: 'hidden',\n    background: 'rgba(0,0,0,0.5)',\n    border: '3px solid rgba(255,255,255,0.2)'\n  },\n  videoPreview: {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover'\n  },\n  cameraPlaceholder: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%',\n    opacity: 0.5\n  },\n  faceGuide: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    pointerEvents: 'none'\n  },\n  faceOval: {\n    width: '200px',\n    height: '260px',\n    border: '3px dashed rgba(0,217,255,0.7)',\n    borderRadius: '50%',\n    boxShadow: '0 0 30px rgba(0,217,255,0.3)'\n  },\n  scanLine: {\n    position: 'absolute',\n    width: '180px',\n    height: '3px',\n    background: 'linear-gradient(90deg, transparent, #00d9ff, transparent)',\n    animation: 'scanMove 2s ease-in-out infinite',\n    boxShadow: '0 0 20px #00d9ff'\n  },\n  scanningOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    background: 'rgba(0,0,0,0.3)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  scanningEffect: {\n    width: '100%',\n    height: '5px',\n    background: 'linear-gradient(90deg, transparent, #00d9ff, transparent)',\n    animation: 'scanMove 1.5s ease-in-out infinite',\n    boxShadow: '0 0 30px #00d9ff'\n  },\n  capturedPreview: {\n    position: 'relative',\n    width: '100%',\n    height: '100%'\n  },\n  capturedImage: {\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover'\n  },\n  checkMark: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    fontSize: '80px',\n    textShadow: '0 0 30px rgba(0,255,0,0.5)'\n  },\n  scanStatus: {\n    fontSize: '1rem',\n    marginBottom: '20px',\n    minHeight: '24px'\n  },\n  // Analysis Progress\n  analysisProgress: {\n    margin: '20px auto',\n    maxWidth: '350px'\n  },\n  progressLabel: {\n    marginBottom: '10px',\n    color: '#00d9ff',\n    fontSize: '1.1rem'\n  },\n  progressBarBg: {\n    width: '100%',\n    height: '10px',\n    background: 'rgba(255,255,255,0.1)',\n    borderRadius: '10px',\n    overflow: 'hidden'\n  },\n  progressBarFill: {\n    height: '100%',\n    background: 'linear-gradient(90deg, #00d9ff, #00ff88)',\n    borderRadius: '10px',\n    transition: 'width 0.3s ease'\n  },\n  progressPercent: {\n    marginTop: '8px',\n    color: '#00ff88',\n    fontWeight: 'bold'\n  },\n  // Analysis Results\n  analysisResults: {\n    background: 'rgba(0,217,255,0.1)',\n    border: '1px solid rgba(0,217,255,0.3)',\n    borderRadius: '15px',\n    padding: '20px',\n    margin: '20px auto',\n    maxWidth: '350px'\n  },\n  featureList: {\n    display: 'grid',\n    gridTemplateColumns: '1fr 1fr',\n    gap: '12px',\n    textAlign: 'left'\n  },\n  featureItem: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: '8px 12px',\n    background: 'rgba(255,255,255,0.05)',\n    borderRadius: '8px'\n  },\n  colorSwatch: {\n    width: '25px',\n    height: '25px',\n    borderRadius: '50%',\n    border: '2px solid rgba(255,255,255,0.3)'\n  },\n  featureValue: {\n    color: '#00ff88',\n    fontWeight: 'bold'\n  },\n  captureBtn: {\n    padding: '20px 50px',\n    fontSize: '1.3rem',\n    background: 'linear-gradient(135deg, #00d9ff 0%, #00ff88 100%)',\n    color: '#1a1a2e',\n    border: 'none',\n    borderRadius: '50px',\n    cursor: 'pointer',\n    fontWeight: 'bold',\n    boxShadow: '0 10px 40px rgba(0, 217, 255, 0.4)',\n    animation: 'pulse 2s infinite'\n  },\n  skipBtn: {\n    marginTop: '30px',\n    padding: '10px 25px',\n    background: 'transparent',\n    border: 'none',\n    color: 'rgba(255,255,255,0.5)',\n    cursor: 'pointer',\n    fontSize: '0.9rem',\n    textDecoration: 'underline'\n  },\n  // Face Avatar in Clone Screen\n  faceAvatarOverlay: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 10,\n    pointerEvents: 'none'\n  },\n  faceAvatarImage: {\n    width: '300px',\n    height: '300px',\n    borderRadius: '50%',\n    objectFit: 'cover',\n    border: '5px solid rgba(255,255,255,0.3)',\n    boxShadow: '0 20px 60px rgba(0,0,0,0.5), 0 0 100px rgba(255,112,67,0.3)'\n  },\n  emotionOverlay: {\n    position: 'absolute',\n    bottom: '-10px',\n    right: '-10px'\n  },\n  emotionEmoji: {\n    fontSize: '50px',\n    filter: 'drop-shadow(0 5px 15px rgba(0,0,0,0.5))'\n  },\n  // Small face reference\n  faceReference: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    gap: '5px',\n    background: 'rgba(10,10,26,0.8)',\n    padding: '10px',\n    borderRadius: '15px',\n    backdropFilter: 'blur(10px)'\n  },\n  faceRefImage: {\n    width: '60px',\n    height: '60px',\n    borderRadius: '50%',\n    objectFit: 'cover',\n    border: '2px solid rgba(0,217,255,0.5)'\n  },\n  // Clone Screen - Real Face Styles\n  cloneScreenContainer: {\n    width: '100%',\n    height: '100vh',\n    position: 'relative',\n    display: 'flex',\n    fontFamily: \"'Segoe UI', sans-serif\",\n    color: 'white',\n    overflow: 'hidden'\n  },\n  cloneBackground: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    background: 'linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 30%, #2d1f47 60%, #0a0a1a 100%)',\n    zIndex: 0\n  },\n  faceDisplayArea: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: 'relative',\n    zIndex: 1,\n    padding: '20px'\n  },\n  realFaceContainer: {\n    position: 'relative',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  faceRecognitionFrame: {\n    position: 'absolute',\n    width: '340px',\n    height: '380px',\n    border: '3px solid',\n    borderRadius: '50%',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 2,\n    pointerEvents: 'none',\n    transition: 'all 0.5s ease'\n  },\n  cornerTopLeft: {\n    position: 'absolute',\n    width: '30px',\n    height: '30px',\n    border: '3px solid currentColor',\n    borderRight: 'none',\n    borderBottom: 'none',\n    top: '-3px',\n    left: '-3px',\n    borderTopLeftRadius: '8px'\n  },\n  cornerTopRight: {\n    position: 'absolute',\n    width: '30px',\n    height: '30px',\n    border: '3px solid currentColor',\n    borderLeft: 'none',\n    borderBottom: 'none',\n    top: '-3px',\n    right: '-3px',\n    borderTopRightRadius: '8px'\n  },\n  cornerBottomLeft: {\n    position: 'absolute',\n    width: '30px',\n    height: '30px',\n    border: '3px solid currentColor',\n    borderRight: 'none',\n    borderTop: 'none',\n    bottom: '-3px',\n    left: '-3px',\n    borderBottomLeftRadius: '8px'\n  },\n  cornerBottomRight: {\n    position: 'absolute',\n    width: '30px',\n    height: '30px',\n    border: '3px solid currentColor',\n    borderLeft: 'none',\n    borderTop: 'none',\n    bottom: '-3px',\n    right: '-3px',\n    borderBottomRightRadius: '8px'\n  },\n  faceGlow: {\n    position: 'absolute',\n    width: '320px',\n    height: '320px',\n    borderRadius: '50%',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 0,\n    transition: 'box-shadow 0.5s ease'\n  },\n  imageScanContainer: {\n    position: 'relative',\n    zIndex: 1\n  },\n  scanningLine: {\n    position: 'absolute',\n    width: '280px',\n    height: '2px',\n    background: 'linear-gradient(90deg, transparent, #FFB84D, transparent)',\n    left: '50%',\n    transform: 'translateX(-50%)',\n    top: '50%',\n    boxShadow: '0 0 20px #FFB84D',\n    animation: 'scanLine 2s ease-in-out infinite',\n    zIndex: 3\n  },\n  realFaceImage: {\n    width: '280px',\n    height: '280px',\n    borderRadius: '50%',\n    objectFit: 'cover',\n    border: '5px solid rgba(255,255,255,0.3)',\n    boxShadow: '0 20px 60px rgba(0,0,0,0.7), 0 0 40px rgba(0,0,0,0.5)',\n    position: 'relative',\n    zIndex: 1,\n    transition: 'transform 0.3s ease, filter 0.3s ease'\n  },\n  speakingWave: {\n    position: 'absolute',\n    bottom: '-50px',\n    left: '50%',\n    transform: 'translateX(-50%)',\n    display: 'flex',\n    gap: '5px',\n    alignItems: 'flex-end',\n    height: '40px',\n    zIndex: 2\n  },\n  waveBar: {\n    width: '8px',\n    background: 'linear-gradient(180deg, #ff7043, #ff9a56)',\n    borderRadius: '4px',\n    animation: 'waveAnim 0.6s ease-in-out infinite'\n  },\n  emotionBubble: {\n    position: 'absolute',\n    top: '-20px',\n    right: '-20px',\n    width: '60px',\n    height: '60px',\n    borderRadius: '50%',\n    background: 'rgba(255,255,255,0.15)',\n    backdropFilter: 'blur(10px)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '32px',\n    border: '2px solid rgba(255,255,255,0.3)',\n    zIndex: 3,\n    transition: 'all 0.3s ease'\n  },\n  nameTag: {\n    marginTop: '35px',\n    padding: '14px 35px',\n    background: 'rgba(255,112,67,0.25)',\n    border: '2px solid rgba(255,112,67,0.5)',\n    borderRadius: '35px',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '12px',\n    fontSize: '1.3rem',\n    fontWeight: 'bold',\n    backdropFilter: 'blur(10px)',\n    transition: 'all 0.3s ease'\n  },\n  nameTagIcon: {\n    fontSize: '1.6rem',\n    animation: 'pulse 2s infinite'\n  },\n  statusIndicators: {\n    position: 'absolute',\n    top: '-15px',\n    left: '-15px',\n    display: 'flex',\n    gap: '8px',\n    fontSize: '24px',\n    zIndex: 3\n  },\n  statusDot: {\n    animation: 'pulse 1s infinite'\n  },\n  noFacePlaceholder: {\n    textAlign: 'center',\n    opacity: 0.5,\n    padding: '40px'\n  },\n  moodIndicator: {\n    position: 'absolute',\n    bottom: '30px',\n    left: '50%',\n    transform: 'translateX(-50%)',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '15px',\n    background: 'rgba(10,10,26,0.85)',\n    padding: '14px 28px',\n    borderRadius: '35px',\n    backdropFilter: 'blur(12px)',\n    border: '1px solid rgba(255,255,255,0.1)'\n  },\n  moodLabel: {\n    fontSize: '1rem',\n    fontWeight: 'bold'\n  },\n  moodBarLarge: {\n    width: '140px',\n    height: '10px',\n    background: 'rgba(255,255,255,0.15)',\n    borderRadius: '10px',\n    overflow: 'hidden',\n    border: '1px solid rgba(255,255,255,0.2)'\n  },\n  moodFillLarge: {\n    height: '100%',\n    borderRadius: '10px',\n    transition: 'width 0.5s ease, background 0.5s ease, box-shadow 0.5s ease'\n  },\n  moodValue: {\n    fontSize: '1rem',\n    fontWeight: 'bold',\n    minWidth: '40px',\n    textAlign: 'right'\n  },\n  thinkingBadge: {\n    marginLeft: '15px',\n    padding: '5px 12px',\n    background: 'rgba(255,184,77,0.2)',\n    borderRadius: '15px',\n    fontSize: '0.8rem',\n    animation: 'pulse 1s infinite'\n  },\n  speakingBadge: {\n    marginLeft: '15px',\n    padding: '5px 12px',\n    background: 'rgba(78,205,196,0.2)',\n    borderRadius: '15px',\n    fontSize: '0.8rem',\n    animation: 'pulse 0.5s infinite'\n  },\n  emptyChat: {\n    textAlign: 'center',\n    padding: '30px',\n    opacity: 0.7\n  }\n};\n\n// Add keyframe animations via style tag (only once)\nif (!document.getElementById('humanclone-animations')) {\n  const styleSheet = document.createElement('style');\n  styleSheet.id = 'humanclone-animations';\n  styleSheet.textContent = `\n    @keyframes pulse {\n      0%, 100% { transform: scale(1); opacity: 1; }\n      50% { transform: scale(1.05); opacity: 0.8; }\n    }\n    @keyframes talking {\n      0%, 100% { transform: translate(-50%, -50%) scale(1); }\n      50% { transform: translate(-50%, -50%) scale(1.02); }\n    }\n    @keyframes thinking {\n      0%, 100% { transform: rotate(-1deg) scale(0.98); }\n      50% { transform: rotate(1deg) scale(1); }\n    }\n    @keyframes breathing {\n      0%, 100% { transform: translate(-50%, -50%) scale(1); }\n      50% { transform: translate(-50%, -50%) scale(1.02); }\n    }\n    @keyframes scanMove {\n      0% { top: 10%; }\n      50% { top: 90%; }\n      100% { top: 10%; }\n    }\n    @keyframes scanLine {\n      0% { top: 10%; }\n      100% { top: 90%; }\n    }\n    @keyframes speaking {\n      0%, 100% { transform: scale(1); }\n      25% { transform: scale(1.01) translateY(-2px); }\n      50% { transform: scale(1.03); }\n      75% { transform: scale(1.01) translateY(2px); }\n    }\n    @keyframes idle {\n      0%, 100% { transform: scale(1); }\n      50% { transform: scale(1.01); }\n    }\n    @keyframes waveAnim {\n      0%, 100% { height: 8px; }\n      50% { height: 32px; }\n    }\n    @keyframes glowPulse {\n      0%, 100% { opacity: 0.8; }\n      50% { opacity: 1; }\n    }\n  `;\n  document.head.appendChild(styleSheet);\n}\nexport default HumanClone;\nvar _c;\n$RefreshReg$(_c, \"HumanClone\");","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","HumanClone","_s","phase","setPhase","cloneData","setCloneData","name","personality","speakingStyle","memories","faceData","faceImage","voiceProfile","cameraActive","setCameraActive","capturedImage","setCapturedImage","scanStatus","setScanStatus","isScanning","setIsScanning","scanProgress","setScanProgress","webcamRef","photoCanvasRef","faceFeatures","setFaceFeatures","skinTone","hairColor","eyeColor","faceShape","faceWidth","faceLength","eyeSize","eyeDistance","noseSize","mouthWidth","browThickness","hasGlasses","hairStyle","trainingMessages","setTrainingMessages","personalityQuestions","setPersonalityQuestions","q","a","category","currentQuestion","setCurrentQuestion","messages","setMessages","inputText","setInputText","isThinking","setIsThinking","isSpeaking","setIsSpeaking","isListening","setIsListening","cloneEmotion","setCloneEmotion","cloneMood","setCloneMood","videoRef","canvasRef","nameInputRef","answerInputRef","handleNameChange","e","prev","target","value","handleAnswer","answer","updated","nextQuestion","length","map","response","sampleConvo","setSampleConvo","catchphrases","setCatchphrases","finishSetup","newCloneData","speaking_style","face_image","face_features","post","console","log","data","id","message","existingClones","JSON","parse","localStorage","getItem","push","createdAt","Date","toLocaleString","setItem","stringify","e2","error","startCamera","stream","navigator","mediaDevices","getUserMedia","video","width","ideal","height","facingMode","current","srcObject","play","err","stopCamera","tracks","getTracks","forEach","track","stop","capturePhoto","canvas","videoWidth","videoHeight","ctx","getContext","translate","scale","drawImage","imageData","toDataURL","analyzeFace","getImageData","progressInterval","setInterval","clearInterval","centerX","Math","floor","centerY","sampleSize","skinPixels","y","x","idx","r","g","b","isSkinLike","max","min","skinR","skinG","skinB","sort","start","end","middlePixels","slice","totalR","totalG","totalB","p","brightness","boost","hairPixels","avgR","avgG","avgB","hairBrightness","totalBrightness","i","avgBrightness","faceShapes","randomShape","random","analyzedFeatures","setTimeout","retakePhoto","renderWelcome","style","styles","fullScreen","children","welcomeBox","glowOrb","fileName","_jsxFileName","lineNumber","columnNumber","title","subtitle","featureGrid","featureCard","featureIcon","ref","type","placeholder","onChange","nameInput","autoFocus","onClick","disabled","primaryBtn","opacity","renderFaceScan","faceScanBox","phaseTitle","cameraContainer","videoPreview","transform","display","autoPlay","playsInline","muted","cameraPlaceholder","fontSize","faceGuide","faceOval","scanLine","capturedPreview","src","alt","scanningOverlay","scanningEffect","checkMark","analysisProgress","progressLabel","progressBarBg","progressBarFill","progressPercent","analysisResults","marginBottom","color","featureList","featureItem","colorSwatch","background","featureValue","btnGroup","captureBtn","secondaryBtn","skipBtn","renderTraining","progress","trainingBox","progressBar","progressFill","questionCount","questionCard","question","answerInput","rows","renderPersonality","inputSection","label","minHeight","generateCloneResponse","userMsg","personalityContext","join","clonePrompt","m","role","content","text","ai_response","split","filter","s","trim","randomStyle","includes","detectEmotion","lower","toLowerCase","match","sendMessage","cloneResponse","emotion","speakResponse","utterance","SpeechSynthesisUtterance","lang","rate","pitch","onend","window","speechSynthesis","speak","startListening","recognition","SpeechRecognition","webkitSpeechRecognition","continuous","onstart","onresult","results","transcript","onerror","CloneScreen","cloneScreenContainer","cloneBackground","faceDisplayArea","realFaceContainer","faceRecognitionFrame","borderColor","boxShadow","cornerTopLeft","cornerTopRight","cornerBottomLeft","cornerBottomRight","faceGlow","animation","imageScanContainer","realFaceImage","scanningLine","speakingWave","waveBar","animationDelay","emotionBubble","nameTag","nameTagIcon","statusIndicators","statusDot","noFacePlaceholder","moodIndicator","moodLabel","moodBarLarge","moodFillLarge","moodValue","chatPanel","chatHeader","thinkingBadge","speakingBadge","chatMessages","emptyChat","msg","alignSelf","chatInput","onKeyPress","key","textInput","iconBtn","emotionBar","em","emotionBtn","border","resetBtn","_c","alignItems","justifyContent","fontFamily","textAlign","padding","maxWidth","WebkitBackgroundClip","WebkitTextFillColor","gridTemplateColumns","gap","borderRadius","backdropFilter","outline","boxSizing","pointerEvents","zIndex","position","cursor","fontWeight","transition","overflow","resize","cloneInfo","top","left","cloneName","moodBar","moodTrack","moodFill","bottom","right","maxHeight","flexDirection","flexWrap","flex","overflowY","marginTop","aspectRatio","margin","objectFit","textShadow","textDecoration","faceAvatarOverlay","faceAvatarImage","emotionOverlay","emotionEmoji","faceReference","faceRefImage","borderRight","borderBottom","borderTopLeftRadius","borderLeft","borderTopRightRadius","borderTop","borderBottomLeftRadius","borderBottomRightRadius","minWidth","marginLeft","document","getElementById","styleSheet","createElement","textContent","head","appendChild","$RefreshReg$"],"sources":["D:/IZ/AIClone/frontend/src/HumanClone.jsx"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst HumanClone = () => {\r\n  // Core states\r\n  const [phase, setPhase] = useState('welcome'); // welcome, facescan, analyzing, training, personality, clone\r\n  const [cloneData, setCloneData] = useState({\r\n    name: '',\r\n    personality: [],\r\n    speakingStyle: '',\r\n    memories: [],\r\n    faceData: null,\r\n    faceImage: null,\r\n    voiceProfile: null,\r\n  });\r\n\r\n  // Face scan states\r\n  const [cameraActive, setCameraActive] = useState(false);\r\n  const [capturedImage, setCapturedImage] = useState(null);\r\n  const [scanStatus, setScanStatus] = useState('');\r\n  const [isScanning, setIsScanning] = useState(false);\r\n  const [scanProgress, setScanProgress] = useState(0);\r\n  const webcamRef = useRef(null);\r\n  const photoCanvasRef = useRef(null);\r\n  \r\n  // Face analysis data - extracted from photo\r\n  const [faceFeatures, setFaceFeatures] = useState({\r\n    skinTone: '#f5c6a5',      // MÃ u da\r\n    hairColor: '#1a1a1a',     // MÃ u tÃ³c\r\n    eyeColor: '#4a3728',      // MÃ u máº¯t\r\n    faceShape: 'oval',        // HÃ¬nh dÃ¡ng máº·t: oval, round, square, heart\r\n    faceWidth: 1.0,           // Äá»™ rá»™ng máº·t\r\n    faceLength: 1.2,          // Äá»™ dÃ i máº·t\r\n    eyeSize: 0.2,             // KÃ­ch thÆ°á»›c máº¯t\r\n    eyeDistance: 0.35,        // Khoáº£ng cÃ¡ch giá»¯a 2 máº¯t\r\n    noseSize: 0.15,           // KÃ­ch thÆ°á»›c mÅ©i\r\n    mouthWidth: 0.3,          // Äá»™ rá»™ng miá»‡ng\r\n    browThickness: 0.08,      // Äá»™ dÃ y lÃ´ng mÃ y\r\n    hasGlasses: false,        // CÃ³ Ä‘eo kÃ­nh khÃ´ng\r\n    hairStyle: 'short',       // Kiá»ƒu tÃ³c: short, long, bald\r\n  });\r\n\r\n  // Training data\r\n  const [trainingMessages, setTrainingMessages] = useState([]);\r\n  const [personalityQuestions, setPersonalityQuestions] = useState([\r\n    { q: 'Báº¡n mÃ´ táº£ tÃ­nh cÃ¡ch cá»§a mÃ¬nh nhÆ° tháº¿ nÃ o?', a: '', category: 'personality' },\r\n    { q: 'Khi vui báº¡n thÆ°á»ng nÃ³i gÃ¬?', a: '', category: 'emotion' },\r\n    { q: 'Khi buá»“n báº¡n thÆ°á»ng lÃ m gÃ¬?', a: '', category: 'emotion' },\r\n    { q: 'CÃ¢u nÃ³i cá»­a miá»‡ng cá»§a báº¡n lÃ  gÃ¬?', a: '', category: 'speech' },\r\n    { q: 'Báº¡n thÃ­ch nÃ³i chuyá»‡n kiá»ƒu nÃ o? (hÃ i hÆ°á»›c, nghiÃªm tÃºc, thÃ¢n thiá»‡n...)', a: '', category: 'style' },\r\n    { q: 'Sá»Ÿ thÃ­ch cá»§a báº¡n lÃ  gÃ¬?', a: '', category: 'interest' },\r\n    { q: 'Báº¡n ghÃ©t Ä‘iá»u gÃ¬ nháº¥t?', a: '', category: 'dislike' },\r\n    { q: 'Má»¥c tiÃªu trong cuá»™c sá»‘ng cá»§a báº¡n?', a: '', category: 'goal' },\r\n  ]);\r\n  const [currentQuestion, setCurrentQuestion] = useState(0);\r\n\r\n  // Clone interaction\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputText, setInputText] = useState('');\r\n  const [isThinking, setIsThinking] = useState(false);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [cloneEmotion, setCloneEmotion] = useState('neutral');\r\n  const [cloneMood, setCloneMood] = useState(70); // 0-100 mood meter\r\n\r\n  // Refs\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  \r\n  // Input refs to maintain focus\r\n  const nameInputRef = useRef(null);\r\n  const answerInputRef = useRef(null);\r\n\r\n  // Handle name change\r\n  const handleNameChange = (e) => {\r\n    setCloneData(prev => ({ ...prev, name: e.target.value }));\r\n  };\r\n\r\n  // Handle answer change in training\r\n  const handleAnswer = (answer) => {\r\n    const updated = [...personalityQuestions];\r\n    updated[currentQuestion].a = answer;\r\n    setPersonalityQuestions(updated);\r\n  };\r\n\r\n  const nextQuestion = () => {\r\n    if (currentQuestion < personalityQuestions.length - 1) {\r\n      setCurrentQuestion(currentQuestion + 1);\r\n    } else {\r\n      // Compile personality\r\n      const personality = personalityQuestions.map(q => ({\r\n        category: q.category,\r\n        response: q.a,\r\n      }));\r\n      setCloneData(prev => ({ ...prev, personality }));\r\n      setPhase('personality');\r\n    }\r\n  };\r\n\r\n  // Speaking style states (moved to parent)\r\n  const [sampleConvo, setSampleConvo] = useState('');\r\n  const [catchphrases, setCatchphrases] = useState('');\r\n\r\n  const finishSetup = async () => {\r\n    const newCloneData = {\r\n      name: cloneData.name,\r\n      personality: cloneData.personality,\r\n      speaking_style: sampleConvo,\r\n      face_image: capturedImage,\r\n      face_features: faceFeatures,\r\n      memories: [],\r\n    };\r\n\r\n    try {\r\n      // Save to MySQL via API\r\n      const response = await axios.post('http://localhost:8000/api/clones/create', newCloneData);\r\n      console.log('Clone saved to MySQL:', response.data);\r\n      setCloneData({ ...newCloneData, id: response.data.id });\r\n    } catch (e) {\r\n      console.log('MySQL save failed, using localStorage fallback:', e.message);\r\n      \r\n      // Fallback: Save to localStorage\r\n      try {\r\n        const existingClones = JSON.parse(localStorage.getItem('AIClones') || '[]');\r\n        existingClones.push({ ...newCloneData, createdAt: new Date().toLocaleString('vi-VN') });\r\n        localStorage.setItem('AIClones', JSON.stringify(existingClones));\r\n      } catch (e2) {\r\n        console.error('Error saving to localStorage:', e2);\r\n      }\r\n      \r\n      setCloneData(newCloneData);\r\n    }\r\n    \r\n    setPhase('clone');\r\n  };\r\n\r\n  // ============ CAMERA FUNCTIONS ============\r\n  const startCamera = async () => {\r\n    try {\r\n      setScanStatus('Äang má»Ÿ camera...');\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { \r\n          width: { ideal: 640 },\r\n          height: { ideal: 480 },\r\n          facingMode: 'user'\r\n        } \r\n      });\r\n      if (webcamRef.current) {\r\n        webcamRef.current.srcObject = stream;\r\n        webcamRef.current.play();\r\n        setCameraActive(true);\r\n        setScanStatus('HÃ£y Ä‘Æ°a khuÃ´n máº·t vÃ o khung hÃ¬nh');\r\n      }\r\n    } catch (err) {\r\n      console.error('Camera error:', err);\r\n      setScanStatus('KhÃ´ng thá»ƒ má»Ÿ camera. Vui lÃ²ng cho phÃ©p truy cáº­p camera.');\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (webcamRef.current && webcamRef.current.srcObject) {\r\n      const tracks = webcamRef.current.srcObject.getTracks();\r\n      tracks.forEach(track => track.stop());\r\n      webcamRef.current.srcObject = null;\r\n    }\r\n    setCameraActive(false);\r\n  };\r\n\r\n  const capturePhoto = () => {\r\n    if (!webcamRef.current || !photoCanvasRef.current) return;\r\n    \r\n    const video = webcamRef.current;\r\n    const canvas = photoCanvasRef.current;\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n    \r\n    const ctx = canvas.getContext('2d');\r\n    // Mirror the image\r\n    ctx.translate(canvas.width, 0);\r\n    ctx.scale(-1, 1);\r\n    ctx.drawImage(video, 0, 0);\r\n    \r\n    const imageData = canvas.toDataURL('image/png');\r\n    setCapturedImage(imageData);\r\n    setCloneData(prev => ({ ...prev, faceImage: imageData }));\r\n    setScanStatus('ðŸ“¸ ÄÃ£ chá»¥p! Äang phÃ¢n tÃ­ch khuÃ´n máº·t...');\r\n    stopCamera();\r\n    \r\n    // Start face analysis\r\n    analyzeFace(canvas);\r\n  };\r\n\r\n  // ============ FACE ANALYSIS ============\r\n  const analyzeFace = async (canvas) => {\r\n    setIsScanning(true);\r\n    setScanProgress(0);\r\n    \r\n    const ctx = canvas.getContext('2d');\r\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    const data = imageData.data;\r\n    \r\n    // Simulate scanning progress\r\n    const progressInterval = setInterval(() => {\r\n      setScanProgress(prev => {\r\n        if (prev >= 90) {\r\n          clearInterval(progressInterval);\r\n          return 90;\r\n        }\r\n        return prev + 10;\r\n      });\r\n    }, 200);\r\n\r\n    // Analyze skin tone from center of image (face area)\r\n    const centerX = Math.floor(canvas.width / 2);\r\n    const centerY = Math.floor(canvas.height / 2);\r\n    const sampleSize = 60;\r\n    \r\n    let skinPixels = [];\r\n    \r\n    // Sample pixels from face area - look for skin-like colors\r\n    for (let y = centerY - sampleSize; y < centerY + sampleSize; y++) {\r\n      for (let x = centerX - sampleSize; x < centerX + sampleSize; x++) {\r\n        if (x >= 0 && x < canvas.width && y >= 0 && y < canvas.height) {\r\n          const idx = (y * canvas.width + x) * 4;\r\n          const r = data[idx];\r\n          const g = data[idx + 1];\r\n          const b = data[idx + 2];\r\n          \r\n          // Better skin detection - skin has specific RGB ratios\r\n          // Skin typically: R > 95, G > 40, B > 20, R > G, R > B, |R-G| < 15 or R-G > 15\r\n          const isSkinLike = (\r\n            r > 80 && g > 50 && b > 30 &&  // Minimum values\r\n            r > g && r > b &&                // Red is dominant\r\n            (r - g) < 100 &&                 // Not too red\r\n            Math.max(r, g, b) - Math.min(r, g, b) < 150 // Not too saturated\r\n          );\r\n          \r\n          if (isSkinLike) {\r\n            skinPixels.push({ r, g, b });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Calculate average skin tone - use defaults if not enough skin pixels found\r\n    let skinTone = '#f5c6a5'; // Default warm skin tone\r\n    let skinR = 245, skinG = 198, skinB = 165;\r\n    \r\n    if (skinPixels.length > 100) {\r\n      // Sort by brightness and take middle 50% to avoid outliers\r\n      skinPixels.sort((a, b) => (a.r + a.g + a.b) - (b.r + b.g + b.b));\r\n      const start = Math.floor(skinPixels.length * 0.25);\r\n      const end = Math.floor(skinPixels.length * 0.75);\r\n      const middlePixels = skinPixels.slice(start, end);\r\n      \r\n      let totalR = 0, totalG = 0, totalB = 0;\r\n      middlePixels.forEach(p => {\r\n        totalR += p.r;\r\n        totalG += p.g;\r\n        totalB += p.b;\r\n      });\r\n      \r\n      skinR = Math.floor(totalR / middlePixels.length);\r\n      skinG = Math.floor(totalG / middlePixels.length);\r\n      skinB = Math.floor(totalB / middlePixels.length);\r\n      \r\n      // Ensure skin tone is not too dark - boost if needed\r\n      const brightness = (skinR + skinG + skinB) / 3;\r\n      if (brightness < 120) {\r\n        // Boost brightness while maintaining ratio\r\n        const boost = 140 / brightness;\r\n        skinR = Math.min(255, Math.floor(skinR * boost));\r\n        skinG = Math.min(255, Math.floor(skinG * boost));\r\n        skinB = Math.min(255, Math.floor(skinB * boost));\r\n      }\r\n      \r\n      skinTone = `rgb(${skinR}, ${skinG}, ${skinB})`;\r\n    }\r\n    \r\n    // Analyze hair color from top of image\r\n    let hairPixels = [];\r\n    for (let y = 0; y < canvas.height * 0.15; y++) {\r\n      for (let x = canvas.width * 0.35; x < canvas.width * 0.65; x++) {\r\n        const idx = (Math.floor(y) * canvas.width + Math.floor(x)) * 4;\r\n        const r = data[idx];\r\n        const g = data[idx + 1];\r\n        const b = data[idx + 2];\r\n        hairPixels.push({ r, g, b });\r\n      }\r\n    }\r\n    \r\n    // Get average hair color\r\n    let hairColor = '#2a2a2a'; // Default dark hair\r\n    if (hairPixels.length > 0) {\r\n      let totalR = 0, totalG = 0, totalB = 0;\r\n      hairPixels.forEach(p => {\r\n        totalR += p.r;\r\n        totalG += p.g;\r\n        totalB += p.b;\r\n      });\r\n      const avgR = Math.floor(totalR / hairPixels.length);\r\n      const avgG = Math.floor(totalG / hairPixels.length);\r\n      const avgB = Math.floor(totalB / hairPixels.length);\r\n      \r\n      // If hair is very dark (similar to background), use default\r\n      const hairBrightness = (avgR + avgG + avgB) / 3;\r\n      if (hairBrightness > 30) {\r\n        hairColor = `rgb(${avgR}, ${avgG}, ${avgB})`;\r\n      }\r\n    }\r\n    \r\n    // Analyze overall brightness\r\n    let totalBrightness = 0;\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      totalBrightness += (data[i] + data[i + 1] + data[i + 2]) / 3;\r\n    }\r\n    const avgBrightness = totalBrightness / (data.length / 4);\r\n    \r\n    // Determine face shape based on image analysis\r\n    const faceShapes = ['oval', 'round', 'square', 'heart'];\r\n    const randomShape = faceShapes[Math.floor(Math.random() * faceShapes.length)];\r\n    \r\n    // Set analyzed features with better defaults\r\n    const analyzedFeatures = {\r\n      skinTone: skinTone,\r\n      hairColor: hairColor,\r\n      eyeColor: '#4a3728', // Brown eyes default\r\n      faceShape: randomShape,\r\n      faceWidth: 0.95 + Math.random() * 0.1,\r\n      faceLength: 1.15 + Math.random() * 0.1,\r\n      eyeSize: 0.18 + Math.random() * 0.06,\r\n      eyeDistance: 0.32 + Math.random() * 0.08,\r\n      noseSize: 0.12 + Math.random() * 0.06,\r\n      mouthWidth: 0.28 + Math.random() * 0.08,\r\n      browThickness: 0.06 + Math.random() * 0.04,\r\n      hasGlasses: Math.random() > 0.7,\r\n      hairStyle: avgBrightness > 100 ? 'short' : 'long',\r\n    };\r\n    \r\n    // Finish progress\r\n    clearInterval(progressInterval);\r\n    setScanProgress(100);\r\n    \r\n    setTimeout(() => {\r\n      setFaceFeatures(analyzedFeatures);\r\n      setCloneData(prev => ({ ...prev, faceData: analyzedFeatures }));\r\n      setIsScanning(false);\r\n      setScanStatus('âœ… PhÃ¢n tÃ­ch hoÃ n táº¥t! Avatar 3D Ä‘Ã£ Ä‘Æ°á»£c táº¡o tá»« khuÃ´n máº·t cá»§a báº¡n.');\r\n    }, 500);\r\n  };\r\n\r\n  const retakePhoto = () => {\r\n    setCapturedImage(null);\r\n    setScanStatus('');\r\n    setIsScanning(false);\r\n    setScanProgress(0);\r\n    startCamera();\r\n  };\r\n\r\n  // Cleanup camera on unmount or phase change\r\n  useEffect(() => {\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, [phase]);\r\n\r\n  // ============ RENDER WELCOME PHASE ============\r\n  const renderWelcome = () => (\r\n    <div style={styles.fullScreen}>\r\n      <div style={styles.welcomeBox}>\r\n        <div style={styles.glowOrb}>ðŸ§¬</div>\r\n        <h1 style={styles.title}>Human Clone AI</h1>\r\n        <p style={styles.subtitle}>\r\n          Táº¡o nhÃ¢n báº£n AI cá»§a chÃ­nh báº¡n - biáº¿t suy nghÄ©, nÃ³i chuyá»‡n vÃ  hÃ nh Ä‘á»™ng nhÆ° báº¡n\r\n        </p>\r\n\r\n        <div style={styles.featureGrid}>\r\n          <div style={styles.featureCard}>\r\n            <span style={styles.featureIcon}>ðŸ§ </span>\r\n            <h3>Há»c tÃ­nh cÃ¡ch</h3>\r\n            <p>Clone há»c cÃ¡ch báº¡n suy nghÄ© vÃ  pháº£n á»©ng</p>\r\n          </div>\r\n          <div style={styles.featureCard}>\r\n            <span style={styles.featureIcon}>ðŸ’¬</span>\r\n            <h3>NÃ³i nhÆ° báº¡n</h3>\r\n            <p>Clone nÃ³i chuyá»‡n vá»›i giá»ng Ä‘iá»‡u cá»§a báº¡n</p>\r\n          </div>\r\n          <div style={styles.featureCard}>\r\n            <span style={styles.featureIcon}>ðŸ˜Š</span>\r\n            <h3>Biá»ƒu cáº£m thá»±c</h3>\r\n            <p>Cáº£m xÃºc vÃ  biá»ƒu cáº£m nhÆ° con ngÆ°á»i</p>\r\n          </div>\r\n          <div style={styles.featureCard}>\r\n            <span style={styles.featureIcon}>ðŸŽ­</span>\r\n            <h3>Nhá»› má»i thá»©</h3>\r\n            <p>Clone ghi nhá»› vÃ  há»c tá»« cuá»™c trÃ² chuyá»‡n</p>\r\n          </div>\r\n        </div>\r\n\r\n        <input\r\n          ref={nameInputRef}\r\n          type=\"text\"\r\n          placeholder=\"Nháº­p tÃªn cho Clone cá»§a báº¡n...\"\r\n          value={cloneData.name}\r\n          onChange={handleNameChange}\r\n          style={styles.nameInput}\r\n          autoFocus\r\n        />\r\n\r\n        <button\r\n          onClick={() => cloneData.name && setPhase('facescan')}\r\n          disabled={!cloneData.name}\r\n          style={{\r\n            ...styles.primaryBtn,\r\n            opacity: cloneData.name ? 1 : 0.5,\r\n          }}\r\n        >\r\n          ðŸ“¸ Chá»¥p khuÃ´n máº·t cho {cloneData.name || 'Clone'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // ============ RENDER FACE SCAN PHASE ============\r\n  const renderFaceScan = () => (\r\n    <div style={styles.fullScreen}>\r\n      <div style={styles.faceScanBox}>\r\n        <h2 style={styles.phaseTitle}>ðŸ“¸ QuÃ©t khuÃ´n máº·t cá»§a báº¡n</h2>\r\n        <p style={styles.subtitle}>AI sáº½ phÃ¢n tÃ­ch vÃ  táº¡o avatar 3D tá»« khuÃ´n máº·t tháº­t</p>\r\n\r\n        <div style={styles.cameraContainer}>\r\n          {!capturedImage ? (\r\n            <>\r\n              <video\r\n                ref={webcamRef}\r\n                style={{\r\n                  ...styles.videoPreview,\r\n                  transform: 'scaleX(-1)',\r\n                  display: cameraActive ? 'block' : 'none',\r\n                }}\r\n                autoPlay\r\n                playsInline\r\n                muted\r\n              />\r\n              {!cameraActive && (\r\n                <div style={styles.cameraPlaceholder}>\r\n                  <span style={{ fontSize: '80px' }}>ðŸ“·</span>\r\n                  <p>Camera chÆ°a Ä‘Æ°á»£c báº­t</p>\r\n                </div>\r\n              )}\r\n              {cameraActive && (\r\n                <div style={styles.faceGuide}>\r\n                  <div style={styles.faceOval}></div>\r\n                  <div style={styles.scanLine}></div>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div style={styles.capturedPreview}>\r\n              <img src={capturedImage} alt=\"Captured face\" style={styles.capturedImage} />\r\n              {isScanning && (\r\n                <div style={styles.scanningOverlay}>\r\n                  <div style={styles.scanningEffect}></div>\r\n                </div>\r\n              )}\r\n              {!isScanning && <div style={styles.checkMark}>âœ…</div>}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <canvas ref={photoCanvasRef} style={{ display: 'none' }} />\r\n\r\n        {/* Progress Bar when scanning */}\r\n        {isScanning && (\r\n          <div style={styles.analysisProgress}>\r\n            <div style={styles.progressLabel}>ðŸ” Äang phÃ¢n tÃ­ch khuÃ´n máº·t...</div>\r\n            <div style={styles.progressBarBg}>\r\n              <div style={{ ...styles.progressBarFill, width: `${scanProgress}%` }}></div>\r\n            </div>\r\n            <div style={styles.progressPercent}>{scanProgress}%</div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Analysis Results */}\r\n        {capturedImage && !isScanning && faceFeatures && (\r\n          <div style={styles.analysisResults}>\r\n            <h3 style={{ marginBottom: '15px', color: '#00d9ff' }}>ðŸŽ¯ Káº¿t quáº£ phÃ¢n tÃ­ch:</h3>\r\n            <div style={styles.featureList}>\r\n              <div style={styles.featureItem}>\r\n                <span>MÃ u da:</span>\r\n                <div style={{ ...styles.colorSwatch, background: faceFeatures.skinTone }}></div>\r\n              </div>\r\n              <div style={styles.featureItem}>\r\n                <span>MÃ u tÃ³c:</span>\r\n                <div style={{ ...styles.colorSwatch, background: faceFeatures.hairColor }}></div>\r\n              </div>\r\n              <div style={styles.featureItem}>\r\n                <span>MÃ u máº¯t:</span>\r\n                <div style={{ ...styles.colorSwatch, background: faceFeatures.eyeColor }}></div>\r\n              </div>\r\n              <div style={styles.featureItem}>\r\n                <span>HÃ¬nh máº·t:</span>\r\n                <span style={styles.featureValue}>\r\n                  {faceFeatures.faceShape === 'oval' ? 'TrÃ¡i xoan' :\r\n                   faceFeatures.faceShape === 'round' ? 'TrÃ²n' :\r\n                   faceFeatures.faceShape === 'square' ? 'VuÃ´ng' : 'TrÃ¡i tim'}\r\n                </span>\r\n              </div>\r\n              <div style={styles.featureItem}>\r\n                <span>Kiá»ƒu tÃ³c:</span>\r\n                <span style={styles.featureValue}>\r\n                  {faceFeatures.hairStyle === 'short' ? 'Ngáº¯n' : 'DÃ i'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <p style={styles.scanStatus}>{scanStatus}</p>\r\n\r\n        <div style={styles.btnGroup}>\r\n          {!cameraActive && !capturedImage && (\r\n            <button onClick={startCamera} style={styles.primaryBtn}>\r\n              ðŸŽ¥ Má»Ÿ Camera\r\n            </button>\r\n          )}\r\n\r\n          {cameraActive && !capturedImage && (\r\n            <button onClick={capturePhoto} style={styles.captureBtn}>\r\n              ðŸ“¸ QuÃ©t khuÃ´n máº·t\r\n            </button>\r\n          )}\r\n\r\n          {capturedImage && !isScanning && (\r\n            <>\r\n              <button onClick={retakePhoto} style={styles.secondaryBtn}>\r\n                ðŸ”„ QuÃ©t láº¡i\r\n              </button>\r\n              <button onClick={() => setPhase('training')} style={styles.primaryBtn}>\r\n                âœ… Táº¡o Avatar 3D\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <button \r\n          onClick={() => {\r\n            stopCamera();\r\n            setPhase('training');\r\n          }} \r\n          style={styles.skipBtn}\r\n        >\r\n          Bá» qua, dÃ¹ng avatar máº·c Ä‘á»‹nh â†’\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // ============ RENDER TRAINING PHASE ============\r\n  const renderTraining = () => {\r\n    const progress = ((currentQuestion + 1) / personalityQuestions.length) * 100;\r\n\r\n    return (\r\n      <div style={styles.fullScreen}>\r\n        <div style={styles.trainingBox}>\r\n          <div style={styles.progressBar}>\r\n            <div style={{ ...styles.progressFill, width: `${progress}%` }} />\r\n          </div>\r\n\r\n          <h2 style={styles.phaseTitle}>\r\n            ðŸ§  Dáº¡y {cloneData.name} hiá»ƒu báº¡n\r\n          </h2>\r\n          <p style={styles.questionCount}>\r\n            CÃ¢u há»i {currentQuestion + 1} / {personalityQuestions.length}\r\n          </p>\r\n\r\n          <div style={styles.questionCard}>\r\n            <p style={styles.question}>\r\n              {personalityQuestions[currentQuestion].q}\r\n            </p>\r\n            <textarea\r\n              ref={answerInputRef}\r\n              key={`answer-${currentQuestion}`}\r\n              value={personalityQuestions[currentQuestion].a}\r\n              onChange={(e) => handleAnswer(e.target.value)}\r\n              placeholder=\"Tráº£ lá»i cÃ ng chi tiáº¿t, Clone cÃ ng giá»‘ng báº¡n...\"\r\n              style={styles.answerInput}\r\n              rows={4}\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          <div style={styles.btnGroup}>\r\n            {currentQuestion > 0 && (\r\n              <button\r\n                onClick={() => setCurrentQuestion(currentQuestion - 1)}\r\n                style={styles.secondaryBtn}\r\n              >\r\n                â† Quay láº¡i\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={nextQuestion}\r\n              disabled={!personalityQuestions[currentQuestion].a}\r\n              style={{\r\n                ...styles.primaryBtn,\r\n                opacity: personalityQuestions[currentQuestion].a ? 1 : 0.5,\r\n              }}\r\n            >\r\n              {currentQuestion === personalityQuestions.length - 1 ? 'HoÃ n thÃ nh âœ“' : 'Tiáº¿p theo â†’'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // ============ RENDER PERSONALITY PHASE ============\r\n  const renderPersonality = () => (\r\n    <div style={styles.fullScreen}>\r\n      <div style={styles.trainingBox}>\r\n        <h2 style={styles.phaseTitle}>\r\n          ðŸ’¬ Dáº¡y {cloneData.name} nÃ³i nhÆ° báº¡n\r\n        </h2>\r\n\r\n        <div style={styles.inputSection}>\r\n          <label style={styles.label}>\r\n            Viáº¿t má»™t Ä‘oáº¡n chat máº«u theo cÃ¡ch báº¡n thÆ°á»ng nÃ³i:\r\n          </label>\r\n          <textarea\r\n            value={sampleConvo}\r\n            onChange={(e) => setSampleConvo(e.target.value)}\r\n            placeholder={`VÃ­ dá»¥:\r\n- ÃŠ, cÃ³ gÃ¬ hot khÃ´ng?\r\n- Oke luÃ´n, ez game!\r\n- Hmm Ä‘á»ƒ tao nghÄ© xem...\r\n- Chill Ä‘i bro, má»i chuyá»‡n sáº½ á»•n thÃ´i`}\r\n            style={{ ...styles.answerInput, minHeight: '150px' }}\r\n            autoFocus\r\n          />\r\n        </div>\r\n\r\n        <div style={styles.inputSection}>\r\n          <label style={styles.label}>\r\n            Nhá»¯ng cÃ¢u cá»­a miá»‡ng báº¡n hay dÃ¹ng (má»—i cÃ¢u 1 dÃ²ng):\r\n          </label>\r\n          <textarea\r\n            value={catchphrases}\r\n            onChange={(e) => setCatchphrases(e.target.value)}\r\n            placeholder={`VÃ­ dá»¥:\r\nChill Ä‘i\r\nOke luÃ´n\r\nEz game\r\nHmm...`}\r\n            style={{ ...styles.answerInput, minHeight: '100px' }}\r\n          />\r\n        </div>\r\n\r\n        <button onClick={finishSetup} style={styles.primaryBtn}>\r\n          ðŸŽ­ Táº¡o {cloneData.name} ngay!\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // ============ PHASE 4: THE CLONE ============\r\n  // Using real face photo instead of 3D (Three.js removed)\r\n\r\n  // Generate clone response based on personality\r\n  const generateCloneResponse = async (userMsg) => {\r\n    setIsThinking(true);\r\n    setCloneEmotion('thinking');\r\n\r\n    // Build personality context\r\n    const personalityContext = cloneData.personality.map(p =>\r\n      `${p.category}: ${p.response}`\r\n    ).join('\\n');\r\n\r\n    const catchphrases = cloneData.speakingStyle || '';\r\n\r\n    // Create prompt that makes AI respond like the user\r\n    const clonePrompt = `Báº¡n lÃ  ${cloneData.name}, má»™t nhÃ¢n báº£n AI cá»§a ngÆ°á»i dÃ¹ng. \r\nÄÃ¢y lÃ  tÃ­nh cÃ¡ch vÃ  cÃ¡ch nÃ³i cá»§a báº¡n:\r\n${personalityContext}\r\n\r\nPhong cÃ¡ch nÃ³i chuyá»‡n máº«u:\r\n${catchphrases}\r\n\r\nQUAN TRá»ŒNG: HÃ£y tráº£ lá»i ÄÃšNG nhÆ° cÃ¡ch ngÆ°á»i dÃ¹ng sáº½ tráº£ lá»i. Sá»­ dá»¥ng cÃ¡c cÃ¢u cá»­a miá»‡ng, giá»ng Ä‘iá»‡u vÃ  tÃ­nh cÃ¡ch Ä‘Ã£ Ä‘Æ°á»£c training.\r\nKhÃ´ng nÃ³i \"TÃ´i lÃ  AI\" hay \"TÃ´i khÃ´ng thá»ƒ\". HÃ£y tráº£ lá»i nhÆ° má»™t con ngÆ°á»i thá»±c sá»± vá»›i tÃ­nh cÃ¡ch Ä‘Ã£ cho.\r\n\r\nLá»‹ch sá»­ trÃ² chuyá»‡n:\r\n${messages.slice(-6).map(m => `${m.role === 'user' ? 'NgÆ°á»i dÃ¹ng' : cloneData.name}: ${m.content}`).join('\\n')}\r\n\r\nNgÆ°á»i dÃ¹ng: ${userMsg}\r\n${cloneData.name}:`;\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:8000/api/chat', {\r\n        text: clonePrompt,\r\n      });\r\n\r\n      setIsThinking(false);\r\n      return response.data.ai_response;\r\n    } catch (error) {\r\n      setIsThinking(false);\r\n\r\n      // Fallback: generate response based on personality locally\r\n      const styles = cloneData.speakingStyle.split('\\n').filter(s => s.trim());\r\n      const randomStyle = styles[Math.floor(Math.random() * styles.length)] || 'Oke';\r\n\r\n      return `${randomStyle} ${userMsg.includes('?') ? 'Äá»ƒ tao nghÄ© xem...' : ''}`;\r\n    }\r\n  };\r\n\r\n  // Detect emotion from text\r\n  const detectEmotion = (text) => {\r\n    const lower = text.toLowerCase();\r\n    if (lower.match(/vui|haha|ðŸ˜Š|ðŸ˜„|tuyá»‡t|hay|thÃ­ch/)) return 'happy';\r\n    if (lower.match(/buá»“n|ðŸ˜¢|ðŸ˜­|chÃ¡n|má»‡t/)) return 'sad';\r\n    if (lower.match(/gÃ¬|sao|nhÆ° tháº¿ nÃ o|\\?/)) return 'thinking';\r\n    if (lower.match(/wow|á»“|ðŸ˜®|tháº­t sao/)) return 'surprised';\r\n    return 'neutral';\r\n  };\r\n\r\n  // Send message\r\n  const sendMessage = async () => {\r\n    if (!inputText.trim() || isThinking) return;\r\n\r\n    const userMsg = inputText.trim();\r\n    setInputText('');\r\n    setMessages(prev => [...prev, { role: 'user', content: userMsg }]);\r\n\r\n    // Get clone response\r\n    const cloneResponse = await generateCloneResponse(userMsg);\r\n\r\n    // Detect and set emotion\r\n    const emotion = detectEmotion(cloneResponse);\r\n    setCloneEmotion(emotion);\r\n\r\n    // Update mood based on conversation\r\n    if (emotion === 'happy') setCloneMood(prev => Math.min(100, prev + 5));\r\n    if (emotion === 'sad') setCloneMood(prev => Math.max(0, prev - 5));\r\n\r\n    setMessages(prev => [...prev, { role: 'clone', content: cloneResponse }]);\r\n\r\n    // Speak the response\r\n    speakResponse(cloneResponse);\r\n  };\r\n\r\n  // Text-to-speech\r\n  const speakResponse = (text) => {\r\n    setIsSpeaking(true);\r\n\r\n    const utterance = new SpeechSynthesisUtterance(text);\r\n    utterance.lang = 'vi-VN';\r\n    utterance.rate = 1.0;\r\n    utterance.pitch = 1.0;\r\n\r\n    utterance.onend = () => {\r\n      setIsSpeaking(false);\r\n      setCloneEmotion('neutral');\r\n    };\r\n\r\n    window.speechSynthesis.speak(utterance);\r\n  };\r\n\r\n  // Voice input\r\n  const startListening = () => {\r\n    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\r\n    recognition.lang = 'vi-VN';\r\n    recognition.continuous = false;\r\n\r\n    recognition.onstart = () => setIsListening(true);\r\n    recognition.onresult = (e) => {\r\n      const text = e.results[0][0].transcript;\r\n      setInputText(text);\r\n      setIsListening(false);\r\n    };\r\n    recognition.onerror = () => setIsListening(false);\r\n    recognition.start();\r\n  };\r\n\r\n  // Clone Screen - Using real face photo with Face Recognition overlay\r\n  const CloneScreen = () => (\r\n    <div style={styles.cloneScreenContainer}>\r\n      {/* Background gradient */}\r\n      <div style={styles.cloneBackground}></div>\r\n      \r\n      {/* Main Face Display with Face Recognition effect */}\r\n      <div style={styles.faceDisplayArea}>\r\n        {capturedImage ? (\r\n          <div style={styles.realFaceContainer}>\r\n            {/* Face Recognition Frame Overlay */}\r\n            <div style={{\r\n              ...styles.faceRecognitionFrame,\r\n              borderColor: cloneEmotion === 'happy' ? '#4ECDC4' :\r\n                          cloneEmotion === 'sad' ? '#6B6B9C' :\r\n                          cloneEmotion === 'thinking' ? '#FFB84D' :\r\n                          '#ff7043',\r\n              boxShadow: `0 0 30px ${cloneEmotion === 'happy' ? '#4ECDC4' :\r\n                                    cloneEmotion === 'sad' ? '#6B6B9C' :\r\n                                    cloneEmotion === 'thinking' ? '#FFB84D' :\r\n                                    '#ff7043'}4d`,\r\n            }}>\r\n              {/* Corner indicators */}\r\n              <div style={styles.cornerTopLeft}></div>\r\n              <div style={styles.cornerTopRight}></div>\r\n              <div style={styles.cornerBottomLeft}></div>\r\n              <div style={styles.cornerBottomRight}></div>\r\n            </div>\r\n            \r\n            {/* Glow effect behind face */}\r\n            <div style={{\r\n              ...styles.faceGlow,\r\n              boxShadow: cloneEmotion === 'happy' ? '0 0 120px 60px rgba(78, 205, 196, 0.5)' :\r\n                        cloneEmotion === 'sad' ? '0 0 120px 60px rgba(107, 107, 156, 0.4)' :\r\n                        cloneEmotion === 'thinking' ? '0 0 120px 60px rgba(255, 184, 77, 0.5)' :\r\n                        '0 0 120px 60px rgba(255, 112, 67, 0.4)',\r\n              animation: isSpeaking ? 'glowPulse 0.5s ease-in-out infinite' : 'none',\r\n            }}></div>\r\n            \r\n            {/* Real face photo with scanning effect */}\r\n            <div style={styles.imageScanContainer}>\r\n              <img \r\n                src={capturedImage} \r\n                alt=\"Clone face\"\r\n                style={{\r\n                  ...styles.realFaceImage,\r\n                  transform: isSpeaking ? 'scale(1.03)' : \r\n                            isThinking ? 'scale(0.98)' : 'scale(1)',\r\n                  filter: cloneEmotion === 'happy' ? 'brightness(1.15) saturate(1.2) contrast(1.1)' :\r\n                          cloneEmotion === 'sad' ? 'brightness(0.85) saturate(0.7) contrast(1.05)' :\r\n                          cloneEmotion === 'thinking' ? 'brightness(1.08) saturate(1) contrast(1.1)' :\r\n                          'brightness(1) saturate(1) contrast(1.05)',\r\n                  animation: isSpeaking ? 'speaking 0.12s ease-in-out infinite' : \r\n                            isThinking ? 'thinking 2s ease-in-out infinite' : \r\n                            'idle 4s ease-in-out infinite',\r\n              }}\r\n              />\r\n              \r\n              {/* Scanning line effect */}\r\n              {isThinking && (\r\n                <div style={styles.scanningLine}></div>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Speaking indicator - wave animation overlay */}\r\n            {isSpeaking && (\r\n              <div style={styles.speakingWave}>\r\n                <div style={{...styles.waveBar, animationDelay: '0s'}}></div>\r\n                <div style={{...styles.waveBar, animationDelay: '0.1s'}}></div>\r\n                <div style={{...styles.waveBar, animationDelay: '0.2s'}}></div>\r\n                <div style={{...styles.waveBar, animationDelay: '0.3s'}}></div>\r\n                <div style={{...styles.waveBar, animationDelay: '0.4s'}}></div>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Emotion indicator with glow */}\r\n            <div style={{\r\n              ...styles.emotionBubble,\r\n              boxShadow: `0 10px 30px ${cloneEmotion === 'happy' ? '#4ECDC4' :\r\n                                        cloneEmotion === 'sad' ? '#6B6B9C' :\r\n                                        cloneEmotion === 'thinking' ? '#FFB84D' :\r\n                                        '#ff7043'}66`,\r\n            }}>\r\n              {cloneEmotion === 'happy' && 'ðŸ˜Š'}\r\n              {cloneEmotion === 'sad' && 'ðŸ˜¢'}\r\n              {cloneEmotion === 'thinking' && 'ðŸ¤”'}\r\n              {cloneEmotion === 'surprised' && 'ðŸ˜®'}\r\n              {cloneEmotion === 'neutral' && 'ðŸ˜Œ'}\r\n            </div>\r\n            \r\n            {/* Name tag with glow */}\r\n            <div style={{\r\n              ...styles.nameTag,\r\n              boxShadow: '0 10px 30px rgba(255,112,67,0.3)',\r\n            }}>\r\n              <span style={styles.nameTagIcon}>ðŸ§¬</span>\r\n              <span>{cloneData.name}</span>\r\n            </div>\r\n            \r\n            {/* Status indicators */}\r\n            <div style={styles.statusIndicators}>\r\n              {isSpeaking && <div style={styles.statusDot} title=\"Speaking\">ðŸ”Š</div>}\r\n              {isThinking && <div style={styles.statusDot} title=\"Thinking\">ðŸ¤–</div>}\r\n              {!isSpeaking && !isThinking && <div style={{...styles.statusDot, color: '#4ECDC4'}} title=\"Ready\">âœ“</div>}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          /* Fallback if no image - show placeholder */\r\n          <div style={styles.noFacePlaceholder}>\r\n            <span style={{fontSize: '100px', marginBottom: '20px'}}>ðŸ‘¤</span>\r\n            <p style={{fontSize: '1.2rem', opacity: 0.7}}>KhÃ´ng cÃ³ áº£nh khuÃ´n máº·t</p>\r\n            <p style={{fontSize: '0.9rem', opacity: 0.5}}>Vui lÃ²ng quay láº¡i vÃ  chá»¥p áº£nh</p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Mood indicator with enhanced styling */}\r\n        <div style={styles.moodIndicator}>\r\n          <div style={styles.moodLabel}>ðŸ’ TÃ¢m tráº¡ng</div>\r\n          <div style={styles.moodBarLarge}>\r\n            <div style={{\r\n              ...styles.moodFillLarge,\r\n              width: `${cloneMood}%`,\r\n              background: cloneMood > 70 ? 'linear-gradient(90deg, #4ECDC4, #44E5B8)' : \r\n                         cloneMood > 40 ? 'linear-gradient(90deg, #FFB84D, #FFA726)' : \r\n                         'linear-gradient(90deg, #FF6B6B, #FF5252)',\r\n              boxShadow: cloneMood > 70 ? '0 0 15px rgba(78,205,196,0.5)' :\r\n                        cloneMood > 40 ? '0 0 15px rgba(255,184,77,0.5)' :\r\n                        '0 0 15px rgba(255,107,107,0.5)',\r\n            }}></div>\r\n          </div>\r\n          <div style={styles.moodValue}>{cloneMood}%</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Panel */}\r\n      <div style={styles.chatPanel}>\r\n        <div style={styles.chatHeader}>\r\n          ðŸ’¬ TrÃ² chuyá»‡n vá»›i {cloneData.name}\r\n          {isThinking && <span style={styles.thinkingBadge}>ðŸ¤” Suy nghÄ©...</span>}\r\n          {isSpeaking && <span style={styles.speakingBadge}>ðŸ”Š Äang nÃ³i...</span>}\r\n        </div>\r\n\r\n        <div style={styles.chatMessages}>\r\n          {messages.length === 0 && (\r\n            <div style={styles.emptyChat}>\r\n              <p>ðŸ‘‹ ChÃ o! TÃ´i lÃ  {cloneData.name}, nhÃ¢n báº£n cá»§a báº¡n.</p>\r\n              <p>HÃ£y nÃ³i chuyá»‡n vá»›i tÃ´i nhÆ° nÃ³i chuyá»‡n vá»›i chÃ­nh mÃ¬nh!</p>\r\n            </div>\r\n          )}\r\n          {messages.map((msg, i) => (\r\n            <div\r\n              key={i}\r\n              style={{\r\n                ...styles.message,\r\n                alignSelf: msg.role === 'user' ? 'flex-end' : 'flex-start',\r\n                background: msg.role === 'user' ? '#ff7043' : 'rgba(255,255,255,0.1)',\r\n              }}\r\n            >\r\n              {msg.content}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div style={styles.chatInput}>\r\n          <input\r\n            type=\"text\"\r\n            value={inputText}\r\n            onChange={(e) => setInputText(e.target.value)}\r\n            onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\r\n            placeholder={`NÃ³i gÃ¬ Ä‘Ã³ vá»›i ${cloneData.name}...`}\r\n            style={styles.textInput}\r\n          />\r\n          <button\r\n            onClick={startListening}\r\n            disabled={isListening}\r\n            style={{\r\n              ...styles.iconBtn,\r\n              background: isListening ? '#FF6B6B' : '#4ECDC4',\r\n            }}\r\n          >\r\n            ðŸŽ¤\r\n          </button>\r\n          <button\r\n            onClick={sendMessage}\r\n            disabled={isThinking || !inputText.trim()}\r\n            style={styles.iconBtn}\r\n          >\r\n            ðŸ’¬\r\n          </button>\r\n        </div>\r\n\r\n        {/* Quick emotions */}\r\n        <div style={styles.emotionBar}>\r\n          <span style={{ opacity: 0.7 }}>Biá»ƒu cáº£m:</span>\r\n          {['neutral', 'happy', 'sad', 'thinking', 'surprised'].map(em => (\r\n            <button\r\n              key={em}\r\n              onClick={() => setCloneEmotion(em)}\r\n              style={{\r\n                ...styles.emotionBtn,\r\n                border: cloneEmotion === em ? '2px solid #ff7043' : '2px solid transparent',\r\n                transform: cloneEmotion === em ? 'scale(1.1)' : 'scale(1)',\r\n              }}\r\n            >\r\n              {em === 'neutral' && 'ðŸ˜'}\r\n              {em === 'happy' && 'ðŸ˜Š'}\r\n              {em === 'sad' && 'ðŸ˜¢'}\r\n              {em === 'thinking' && 'ðŸ¤”'}\r\n              {em === 'surprised' && 'ðŸ˜®'}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reset button */}\r\n      <button\r\n        onClick={() => {\r\n          setPhase('welcome');\r\n          setMessages([]);\r\n          setCloneData({ name: '', personality: [], speakingStyle: '', memories: [], faceData: null, faceImage: null, voiceProfile: null });\r\n          setCurrentQuestion(0);\r\n          setPersonalityQuestions(prev => prev.map(q => ({ ...q, a: '' })));\r\n          setSampleConvo('');\r\n          setCatchphrases('');\r\n          setCapturedImage(null);\r\n          setFaceFeatures({\r\n            skinTone: '#f5c6a5',\r\n            hairColor: '#1a1a1a',\r\n            eyeColor: '#4a3728',\r\n            faceShape: 'oval',\r\n            faceWidth: 1.0,\r\n            faceLength: 1.2,\r\n            eyeSize: 0.2,\r\n            eyeDistance: 0.35,\r\n            noseSize: 0.15,\r\n            mouthWidth: 0.3,\r\n            browThickness: 0.08,\r\n            hasGlasses: false,\r\n            hairStyle: 'short',\r\n          });\r\n        }}\r\n        style={styles.resetBtn}\r\n      >\r\n        ðŸ”„ Táº¡o Clone má»›i\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  // Render based on phase\r\n  return (\r\n    <>\r\n      {phase === 'welcome' && renderWelcome()}\r\n      {phase === 'facescan' && renderFaceScan()}\r\n      {phase === 'training' && renderTraining()}\r\n      {phase === 'personality' && renderPersonality()}\r\n      {phase === 'clone' && <CloneScreen />}\r\n    </>\r\n  );\r\n};\r\n\r\n// Styles\r\nconst styles = {\r\n  fullScreen: {\r\n    width: '100%',\r\n    height: '100vh',\r\n    background: 'linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontFamily: \"'Segoe UI', sans-serif\",\r\n    color: 'white',\r\n  },\r\n  welcomeBox: {\r\n    textAlign: 'center',\r\n    padding: '50px',\r\n    maxWidth: '800px',\r\n  },\r\n  glowOrb: {\r\n    fontSize: '80px',\r\n    marginBottom: '20px',\r\n    animation: 'pulse 2s infinite',\r\n  },\r\n  title: {\r\n    fontSize: '3rem',\r\n    marginBottom: '15px',\r\n    background: 'linear-gradient(90deg, #ff9a56, #ff7043, #ff9a56)',\r\n    WebkitBackgroundClip: 'text',\r\n    WebkitTextFillColor: 'transparent',\r\n  },\r\n  subtitle: {\r\n    fontSize: '1.3rem',\r\n    opacity: 0.8,\r\n    marginBottom: '40px',\r\n  },\r\n  featureGrid: {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',\r\n    gap: '20px',\r\n    marginBottom: '40px',\r\n  },\r\n  featureCard: {\r\n    background: 'rgba(255,255,255,0.05)',\r\n    padding: '25px 15px',\r\n    borderRadius: '15px',\r\n    backdropFilter: 'blur(10px)',\r\n  },\r\n  featureIcon: {\r\n    fontSize: '40px',\r\n    display: 'block',\r\n    marginBottom: '10px',\r\n  },\r\n  nameInput: {\r\n    width: '100%',\r\n    maxWidth: '400px',\r\n    padding: '15px 25px',\r\n    fontSize: '1.1rem',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '2px solid rgba(255,255,255,0.2)',\r\n    borderRadius: '30px',\r\n    color: 'white',\r\n    outline: 'none',\r\n    marginBottom: '20px',\r\n    textAlign: 'center',\r\n    boxSizing: 'border-box',\r\n    pointerEvents: 'auto',\r\n    zIndex: 100,\r\n    position: 'relative',\r\n  },\r\n  primaryBtn: {\r\n    padding: '15px 40px',\r\n    fontSize: '1.2rem',\r\n    background: 'linear-gradient(135deg, #ff9a56 0%, #ff7043 100%)',\r\n    color: 'white',\r\n    border: 'none',\r\n    borderRadius: '30px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n    transition: 'all 0.3s',\r\n  },\r\n  secondaryBtn: {\r\n    padding: '12px 30px',\r\n    fontSize: '1rem',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    color: 'white',\r\n    border: '2px solid rgba(255,255,255,0.3)',\r\n    borderRadius: '25px',\r\n    cursor: 'pointer',\r\n  },\r\n  trainingBox: {\r\n    background: 'rgba(255,255,255,0.05)',\r\n    padding: '40px',\r\n    borderRadius: '20px',\r\n    maxWidth: '600px',\r\n    width: '90%',\r\n    backdropFilter: 'blur(10px)',\r\n  },\r\n  progressBar: {\r\n    height: '8px',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    borderRadius: '4px',\r\n    marginBottom: '30px',\r\n    overflow: 'hidden',\r\n  },\r\n  progressFill: {\r\n    height: '100%',\r\n    background: 'linear-gradient(90deg, #ff9a56, #ff7043)',\r\n    transition: 'width 0.5s',\r\n  },\r\n  phaseTitle: {\r\n    fontSize: '1.8rem',\r\n    marginBottom: '10px',\r\n  },\r\n  questionCount: {\r\n    opacity: 0.7,\r\n    marginBottom: '30px',\r\n  },\r\n  questionCard: {\r\n    background: 'rgba(255,255,255,0.05)',\r\n    padding: '25px',\r\n    borderRadius: '15px',\r\n    marginBottom: '25px',\r\n  },\r\n  question: {\r\n    fontSize: '1.2rem',\r\n    marginBottom: '15px',\r\n  },\r\n  answerInput: {\r\n    width: '100%',\r\n    padding: '15px',\r\n    fontSize: '1rem',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '1px solid rgba(255,255,255,0.2)',\r\n    borderRadius: '10px',\r\n    color: 'white',\r\n    outline: 'none',\r\n    resize: 'vertical',\r\n    boxSizing: 'border-box',\r\n    pointerEvents: 'auto',\r\n    zIndex: 100,\r\n    position: 'relative',\r\n  },\r\n  btnGroup: {\r\n    display: 'flex',\r\n    gap: '15px',\r\n    justifyContent: 'center',\r\n  },\r\n  inputSection: {\r\n    marginBottom: '25px',\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    marginBottom: '10px',\r\n    opacity: 0.9,\r\n  },\r\n  cloneInfo: {\r\n    position: 'absolute',\r\n    top: 20,\r\n    left: 20,\r\n    background: 'rgba(10,10,26,0.9)',\r\n    padding: '15px 25px',\r\n    borderRadius: '15px',\r\n    backdropFilter: 'blur(10px)',\r\n  },\r\n  cloneName: {\r\n    fontSize: '1.3rem',\r\n    fontWeight: 'bold',\r\n    marginBottom: '10px',\r\n    color: '#ff9a56',\r\n  },\r\n  moodBar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '10px',\r\n    fontSize: '14px',\r\n  },\r\n  moodTrack: {\r\n    width: '100px',\r\n    height: '8px',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    borderRadius: '4px',\r\n    overflow: 'hidden',\r\n  },\r\n  moodFill: {\r\n    height: '100%',\r\n    transition: 'all 0.5s',\r\n  },\r\n  chatPanel: {\r\n    position: 'absolute',\r\n    bottom: 20,\r\n    right: 20,\r\n    width: '400px',\r\n    maxHeight: '70vh',\r\n    background: 'rgba(10,10,26,0.95)',\r\n    borderRadius: '20px',\r\n    padding: '20px',\r\n    backdropFilter: 'blur(10px)',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  chatHeader: {\r\n    fontSize: '1.1rem',\r\n    fontWeight: 'bold',\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '10px',\r\n    flexWrap: 'wrap',\r\n  },\r\n  thinkingBadge: {\r\n    fontSize: '12px',\r\n    background: 'rgba(255,184,77,0.2)',\r\n    padding: '4px 10px',\r\n    borderRadius: '10px',\r\n    color: '#FFB84D',\r\n  },\r\n  speakingBadge: {\r\n    fontSize: '12px',\r\n    background: 'rgba(78,205,196,0.2)',\r\n    padding: '4px 10px',\r\n    borderRadius: '10px',\r\n    color: '#4ECDC4',\r\n  },\r\n  chatMessages: {\r\n    flex: 1,\r\n    overflowY: 'auto',\r\n    marginBottom: '15px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: '10px',\r\n    maxHeight: '300px',\r\n    padding: '10px',\r\n    background: 'rgba(255,255,255,0.03)',\r\n    borderRadius: '10px',\r\n  },\r\n  emptyChat: {\r\n    textAlign: 'center',\r\n    opacity: 0.7,\r\n    padding: '20px',\r\n  },\r\n  message: {\r\n    padding: '10px 15px',\r\n    borderRadius: '15px',\r\n    maxWidth: '85%',\r\n    fontSize: '14px',\r\n  },\r\n  chatInput: {\r\n    display: 'flex',\r\n    gap: '10px',\r\n  },\r\n  textInput: {\r\n    flex: 1,\r\n    padding: '12px 15px',\r\n    borderRadius: '25px',\r\n    border: 'none',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    color: 'white',\r\n    outline: 'none',\r\n    fontSize: '14px',\r\n  },\r\n  iconBtn: {\r\n    width: '45px',\r\n    height: '45px',\r\n    borderRadius: '50%',\r\n    border: 'none',\r\n    background: '#ff7043',\r\n    color: 'white',\r\n    fontSize: '18px',\r\n    cursor: 'pointer',\r\n  },\r\n  emotionBar: {\r\n    marginTop: '15px',\r\n    display: 'flex',\r\n    gap: '8px',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontSize: '14px',\r\n  },\r\n  emotionBtn: {\r\n    width: '35px',\r\n    height: '35px',\r\n    borderRadius: '50%',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '2px solid transparent',\r\n    cursor: 'pointer',\r\n    fontSize: '18px',\r\n  },\r\n  resetBtn: {\r\n    position: 'absolute',\r\n    top: 20,\r\n    right: 20,\r\n    padding: '10px 20px',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    border: '2px solid rgba(255,255,255,0.2)',\r\n    borderRadius: '25px',\r\n    color: 'white',\r\n    cursor: 'pointer',\r\n    fontSize: '14px',\r\n  },\r\n  // Face Scan Styles\r\n  faceScanBox: {\r\n    textAlign: 'center',\r\n    padding: '40px',\r\n    maxWidth: '600px',\r\n    width: '90%',\r\n  },\r\n  cameraContainer: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    maxWidth: '400px',\r\n    aspectRatio: '4/3',\r\n    margin: '30px auto',\r\n    borderRadius: '20px',\r\n    overflow: 'hidden',\r\n    background: 'rgba(0,0,0,0.5)',\r\n    border: '3px solid rgba(255,255,255,0.2)',\r\n  },\r\n  videoPreview: {\r\n    width: '100%',\r\n    height: '100%',\r\n    objectFit: 'cover',\r\n  },\r\n  cameraPlaceholder: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    height: '100%',\r\n    opacity: 0.5,\r\n  },\r\n  faceGuide: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    pointerEvents: 'none',\r\n  },\r\n  faceOval: {\r\n    width: '200px',\r\n    height: '260px',\r\n    border: '3px dashed rgba(0,217,255,0.7)',\r\n    borderRadius: '50%',\r\n    boxShadow: '0 0 30px rgba(0,217,255,0.3)',\r\n  },\r\n  scanLine: {\r\n    position: 'absolute',\r\n    width: '180px',\r\n    height: '3px',\r\n    background: 'linear-gradient(90deg, transparent, #00d9ff, transparent)',\r\n    animation: 'scanMove 2s ease-in-out infinite',\r\n    boxShadow: '0 0 20px #00d9ff',\r\n  },\r\n  scanningOverlay: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    background: 'rgba(0,0,0,0.3)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  scanningEffect: {\r\n    width: '100%',\r\n    height: '5px',\r\n    background: 'linear-gradient(90deg, transparent, #00d9ff, transparent)',\r\n    animation: 'scanMove 1.5s ease-in-out infinite',\r\n    boxShadow: '0 0 30px #00d9ff',\r\n  },\r\n  capturedPreview: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  capturedImage: {\r\n    width: '100%',\r\n    height: '100%',\r\n    objectFit: 'cover',\r\n  },\r\n  checkMark: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    fontSize: '80px',\r\n    textShadow: '0 0 30px rgba(0,255,0,0.5)',\r\n  },\r\n  scanStatus: {\r\n    fontSize: '1rem',\r\n    marginBottom: '20px',\r\n    minHeight: '24px',\r\n  },\r\n  // Analysis Progress\r\n  analysisProgress: {\r\n    margin: '20px auto',\r\n    maxWidth: '350px',\r\n  },\r\n  progressLabel: {\r\n    marginBottom: '10px',\r\n    color: '#00d9ff',\r\n    fontSize: '1.1rem',\r\n  },\r\n  progressBarBg: {\r\n    width: '100%',\r\n    height: '10px',\r\n    background: 'rgba(255,255,255,0.1)',\r\n    borderRadius: '10px',\r\n    overflow: 'hidden',\r\n  },\r\n  progressBarFill: {\r\n    height: '100%',\r\n    background: 'linear-gradient(90deg, #00d9ff, #00ff88)',\r\n    borderRadius: '10px',\r\n    transition: 'width 0.3s ease',\r\n  },\r\n  progressPercent: {\r\n    marginTop: '8px',\r\n    color: '#00ff88',\r\n    fontWeight: 'bold',\r\n  },\r\n  // Analysis Results\r\n  analysisResults: {\r\n    background: 'rgba(0,217,255,0.1)',\r\n    border: '1px solid rgba(0,217,255,0.3)',\r\n    borderRadius: '15px',\r\n    padding: '20px',\r\n    margin: '20px auto',\r\n    maxWidth: '350px',\r\n  },\r\n  featureList: {\r\n    display: 'grid',\r\n    gridTemplateColumns: '1fr 1fr',\r\n    gap: '12px',\r\n    textAlign: 'left',\r\n  },\r\n  featureItem: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: '8px 12px',\r\n    background: 'rgba(255,255,255,0.05)',\r\n    borderRadius: '8px',\r\n  },\r\n  colorSwatch: {\r\n    width: '25px',\r\n    height: '25px',\r\n    borderRadius: '50%',\r\n    border: '2px solid rgba(255,255,255,0.3)',\r\n  },\r\n  featureValue: {\r\n    color: '#00ff88',\r\n    fontWeight: 'bold',\r\n  },\r\n  captureBtn: {\r\n    padding: '20px 50px',\r\n    fontSize: '1.3rem',\r\n    background: 'linear-gradient(135deg, #00d9ff 0%, #00ff88 100%)',\r\n    color: '#1a1a2e',\r\n    border: 'none',\r\n    borderRadius: '50px',\r\n    cursor: 'pointer',\r\n    fontWeight: 'bold',\r\n    boxShadow: '0 10px 40px rgba(0, 217, 255, 0.4)',\r\n    animation: 'pulse 2s infinite',\r\n  },\r\n  skipBtn: {\r\n    marginTop: '30px',\r\n    padding: '10px 25px',\r\n    background: 'transparent',\r\n    border: 'none',\r\n    color: 'rgba(255,255,255,0.5)',\r\n    cursor: 'pointer',\r\n    fontSize: '0.9rem',\r\n    textDecoration: 'underline',\r\n  },\r\n  // Face Avatar in Clone Screen\r\n  faceAvatarOverlay: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    zIndex: 10,\r\n    pointerEvents: 'none',\r\n  },\r\n  faceAvatarImage: {\r\n    width: '300px',\r\n    height: '300px',\r\n    borderRadius: '50%',\r\n    objectFit: 'cover',\r\n    border: '5px solid rgba(255,255,255,0.3)',\r\n    boxShadow: '0 20px 60px rgba(0,0,0,0.5), 0 0 100px rgba(255,112,67,0.3)',\r\n  },\r\n  emotionOverlay: {\r\n    position: 'absolute',\r\n    bottom: '-10px',\r\n    right: '-10px',\r\n  },\r\n  emotionEmoji: {\r\n    fontSize: '50px',\r\n    filter: 'drop-shadow(0 5px 15px rgba(0,0,0,0.5))',\r\n  },\r\n  // Small face reference\r\n  faceReference: {\r\n    position: 'absolute',\r\n    bottom: 20,\r\n    left: 20,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    gap: '5px',\r\n    background: 'rgba(10,10,26,0.8)',\r\n    padding: '10px',\r\n    borderRadius: '15px',\r\n    backdropFilter: 'blur(10px)',\r\n  },\r\n  faceRefImage: {\r\n    width: '60px',\r\n    height: '60px',\r\n    borderRadius: '50%',\r\n    objectFit: 'cover',\r\n    border: '2px solid rgba(0,217,255,0.5)',\r\n  },\r\n  // Clone Screen - Real Face Styles\r\n  cloneScreenContainer: {\r\n    width: '100%',\r\n    height: '100vh',\r\n    position: 'relative',\r\n    display: 'flex',\r\n    fontFamily: \"'Segoe UI', sans-serif\",\r\n    color: 'white',\r\n    overflow: 'hidden',\r\n  },\r\n  cloneBackground: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    background: 'linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 30%, #2d1f47 60%, #0a0a1a 100%)',\r\n    zIndex: 0,\r\n  },\r\n  faceDisplayArea: {\r\n    flex: 1,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    position: 'relative',\r\n    zIndex: 1,\r\n    padding: '20px',\r\n  },\r\n  realFaceContainer: {\r\n    position: 'relative',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  faceRecognitionFrame: {\r\n    position: 'absolute',\r\n    width: '340px',\r\n    height: '380px',\r\n    border: '3px solid',\r\n    borderRadius: '50%',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    zIndex: 2,\r\n    pointerEvents: 'none',\r\n    transition: 'all 0.5s ease',\r\n  },\r\n  cornerTopLeft: {\r\n    position: 'absolute',\r\n    width: '30px',\r\n    height: '30px',\r\n    border: '3px solid currentColor',\r\n    borderRight: 'none',\r\n    borderBottom: 'none',\r\n    top: '-3px',\r\n    left: '-3px',\r\n    borderTopLeftRadius: '8px',\r\n  },\r\n  cornerTopRight: {\r\n    position: 'absolute',\r\n    width: '30px',\r\n    height: '30px',\r\n    border: '3px solid currentColor',\r\n    borderLeft: 'none',\r\n    borderBottom: 'none',\r\n    top: '-3px',\r\n    right: '-3px',\r\n    borderTopRightRadius: '8px',\r\n  },\r\n  cornerBottomLeft: {\r\n    position: 'absolute',\r\n    width: '30px',\r\n    height: '30px',\r\n    border: '3px solid currentColor',\r\n    borderRight: 'none',\r\n    borderTop: 'none',\r\n    bottom: '-3px',\r\n    left: '-3px',\r\n    borderBottomLeftRadius: '8px',\r\n  },\r\n  cornerBottomRight: {\r\n    position: 'absolute',\r\n    width: '30px',\r\n    height: '30px',\r\n    border: '3px solid currentColor',\r\n    borderLeft: 'none',\r\n    borderTop: 'none',\r\n    bottom: '-3px',\r\n    right: '-3px',\r\n    borderBottomRightRadius: '8px',\r\n  },\r\n  faceGlow: {\r\n    position: 'absolute',\r\n    width: '320px',\r\n    height: '320px',\r\n    borderRadius: '50%',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    zIndex: 0,\r\n    transition: 'box-shadow 0.5s ease',\r\n  },\r\n  imageScanContainer: {\r\n    position: 'relative',\r\n    zIndex: 1,\r\n  },\r\n  scanningLine: {\r\n    position: 'absolute',\r\n    width: '280px',\r\n    height: '2px',\r\n    background: 'linear-gradient(90deg, transparent, #FFB84D, transparent)',\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n    top: '50%',\r\n    boxShadow: '0 0 20px #FFB84D',\r\n    animation: 'scanLine 2s ease-in-out infinite',\r\n    zIndex: 3,\r\n  },\r\n  realFaceImage: {\r\n    width: '280px',\r\n    height: '280px',\r\n    borderRadius: '50%',\r\n    objectFit: 'cover',\r\n    border: '5px solid rgba(255,255,255,0.3)',\r\n    boxShadow: '0 20px 60px rgba(0,0,0,0.7), 0 0 40px rgba(0,0,0,0.5)',\r\n    position: 'relative',\r\n    zIndex: 1,\r\n    transition: 'transform 0.3s ease, filter 0.3s ease',\r\n  },\r\n  speakingWave: {\r\n    position: 'absolute',\r\n    bottom: '-50px',\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n    display: 'flex',\r\n    gap: '5px',\r\n    alignItems: 'flex-end',\r\n    height: '40px',\r\n    zIndex: 2,\r\n  },\r\n  waveBar: {\r\n    width: '8px',\r\n    background: 'linear-gradient(180deg, #ff7043, #ff9a56)',\r\n    borderRadius: '4px',\r\n    animation: 'waveAnim 0.6s ease-in-out infinite',\r\n  },\r\n  emotionBubble: {\r\n    position: 'absolute',\r\n    top: '-20px',\r\n    right: '-20px',\r\n    width: '60px',\r\n    height: '60px',\r\n    borderRadius: '50%',\r\n    background: 'rgba(255,255,255,0.15)',\r\n    backdropFilter: 'blur(10px)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    fontSize: '32px',\r\n    border: '2px solid rgba(255,255,255,0.3)',\r\n    zIndex: 3,\r\n    transition: 'all 0.3s ease',\r\n  },\r\n  nameTag: {\r\n    marginTop: '35px',\r\n    padding: '14px 35px',\r\n    background: 'rgba(255,112,67,0.25)',\r\n    border: '2px solid rgba(255,112,67,0.5)',\r\n    borderRadius: '35px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '12px',\r\n    fontSize: '1.3rem',\r\n    fontWeight: 'bold',\r\n    backdropFilter: 'blur(10px)',\r\n    transition: 'all 0.3s ease',\r\n  },\r\n  nameTagIcon: {\r\n    fontSize: '1.6rem',\r\n    animation: 'pulse 2s infinite',\r\n  },\r\n  statusIndicators: {\r\n    position: 'absolute',\r\n    top: '-15px',\r\n    left: '-15px',\r\n    display: 'flex',\r\n    gap: '8px',\r\n    fontSize: '24px',\r\n    zIndex: 3,\r\n  },\r\n  statusDot: {\r\n    animation: 'pulse 1s infinite',\r\n  },\r\n  noFacePlaceholder: {\r\n    textAlign: 'center',\r\n    opacity: 0.5,\r\n    padding: '40px',\r\n  },\r\n  moodIndicator: {\r\n    position: 'absolute',\r\n    bottom: '30px',\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '15px',\r\n    background: 'rgba(10,10,26,0.85)',\r\n    padding: '14px 28px',\r\n    borderRadius: '35px',\r\n    backdropFilter: 'blur(12px)',\r\n    border: '1px solid rgba(255,255,255,0.1)',\r\n  },\r\n  moodLabel: {\r\n    fontSize: '1rem',\r\n    fontWeight: 'bold',\r\n  },\r\n  moodBarLarge: {\r\n    width: '140px',\r\n    height: '10px',\r\n    background: 'rgba(255,255,255,0.15)',\r\n    borderRadius: '10px',\r\n    overflow: 'hidden',\r\n    border: '1px solid rgba(255,255,255,0.2)',\r\n  },\r\n  moodFillLarge: {\r\n    height: '100%',\r\n    borderRadius: '10px',\r\n    transition: 'width 0.5s ease, background 0.5s ease, box-shadow 0.5s ease',\r\n  },\r\n  moodValue: {\r\n    fontSize: '1rem',\r\n    fontWeight: 'bold',\r\n    minWidth: '40px',\r\n    textAlign: 'right',\r\n  },\r\n  thinkingBadge: {\r\n    marginLeft: '15px',\r\n    padding: '5px 12px',\r\n    background: 'rgba(255,184,77,0.2)',\r\n    borderRadius: '15px',\r\n    fontSize: '0.8rem',\r\n    animation: 'pulse 1s infinite',\r\n  },\r\n  speakingBadge: {\r\n    marginLeft: '15px',\r\n    padding: '5px 12px',\r\n    background: 'rgba(78,205,196,0.2)',\r\n    borderRadius: '15px',\r\n    fontSize: '0.8rem',\r\n    animation: 'pulse 0.5s infinite',\r\n  },\r\n  emptyChat: {\r\n    textAlign: 'center',\r\n    padding: '30px',\r\n    opacity: 0.7,\r\n  },\r\n};\r\n\r\n// Add keyframe animations via style tag (only once)\r\nif (!document.getElementById('humanclone-animations')) {\r\n  const styleSheet = document.createElement('style');\r\n  styleSheet.id = 'humanclone-animations';\r\n  styleSheet.textContent = `\r\n    @keyframes pulse {\r\n      0%, 100% { transform: scale(1); opacity: 1; }\r\n      50% { transform: scale(1.05); opacity: 0.8; }\r\n    }\r\n    @keyframes talking {\r\n      0%, 100% { transform: translate(-50%, -50%) scale(1); }\r\n      50% { transform: translate(-50%, -50%) scale(1.02); }\r\n    }\r\n    @keyframes thinking {\r\n      0%, 100% { transform: rotate(-1deg) scale(0.98); }\r\n      50% { transform: rotate(1deg) scale(1); }\r\n    }\r\n    @keyframes breathing {\r\n      0%, 100% { transform: translate(-50%, -50%) scale(1); }\r\n      50% { transform: translate(-50%, -50%) scale(1.02); }\r\n    }\r\n    @keyframes scanMove {\r\n      0% { top: 10%; }\r\n      50% { top: 90%; }\r\n      100% { top: 10%; }\r\n    }\r\n    @keyframes scanLine {\r\n      0% { top: 10%; }\r\n      100% { top: 90%; }\r\n    }\r\n    @keyframes speaking {\r\n      0%, 100% { transform: scale(1); }\r\n      25% { transform: scale(1.01) translateY(-2px); }\r\n      50% { transform: scale(1.03); }\r\n      75% { transform: scale(1.01) translateY(2px); }\r\n    }\r\n    @keyframes idle {\r\n      0%, 100% { transform: scale(1); }\r\n      50% { transform: scale(1.01); }\r\n    }\r\n    @keyframes waveAnim {\r\n      0%, 100% { height: 8px; }\r\n      50% { height: 32px; }\r\n    }\r\n    @keyframes glowPulse {\r\n      0%, 100% { opacity: 0.8; }\r\n      50% { opacity: 1; }\r\n    }\r\n  `;\r\n  document.head.appendChild(styleSheet);\r\n}\r\n\r\nexport default HumanClone;\r\n"],"mappings":"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AAC;EACDuB,SAAS,EAAE;IACTiB,SAAS,EAAE,QAAQ;IACnBC,OAAO,EAAE,MAAM;IACftJ,OAAO,EAAE;EACX;AACF,CAAC;;AAED;AACA,IAAI,CAAC4M,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAC,EAAE;EACrD,MAAMC,UAAU,GAAGF,QAAQ,CAACG,aAAa,CAAC,OAAO,CAAC;EAClDD,UAAU,CAACrU,EAAE,GAAG,uBAAuB;EACvCqU,UAAU,CAACE,WAAW,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;EACDJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACJ,UAAU,CAAC;AACvC;AAEA,eAAeja,UAAU;AAAC,IAAAoW,EAAA;AAAAkE,YAAA,CAAAlE,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}